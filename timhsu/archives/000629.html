<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>timhsu: 聊聊 ASUS WL500g</title>

<link rel="stylesheet" href="http://blog.linux.org.tw/~timhsu/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.linux.org.tw/~timhsu/index.rdf" />

<link rel="start" href="http://blog.linux.org.tw/~timhsu/" title="Home" />
<link rel="prev" href="http://blog.linux.org.tw/~timhsu/archives/000613.html" title="Who Call Me?" />

<link rel="next" href="http://blog.linux.org.tw/~timhsu/archives/001012.html" title="邪惡的 GGKit" />


<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.linux.org.tw';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.linux.org.tw/~timhsu/archives/000629.html">
<dc:title>聊聊 ASUS WL500g</dc:title>
<dc:description>現在我就用這台 WL500g 無線上網中, 感覺還不錯用哩. 根據從原始碼來看, CPU 為 MIPS32/little edian 搭配 Linux Kernel 2.4.20, 根目錄檔案系統採用 Cramfs 並未使用 ramdisk(initrd).</dc:description>
<dc:creator>timhsu</dc:creator>
<dc:date>2004-05-14T22:36:13+08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
<prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.linux.org.tw/~timhsu/" accesskey="1">timhsu</a></h1>
<span class="description"></span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="http://blog.linux.org.tw/~timhsu/archives/000613.html">&laquo; Who Call Me?</a> |

<a href="http://blog.linux.org.tw/~timhsu/">回到主頁面</a>
| <a href="http://blog.linux.org.tw/~timhsu/archives/001012.html">邪惡的 GGKit &raquo;</a>

</div>

</div>


<div class="blog">

<h2 class="date">May 14, 2004</h2>

<div class="blogbody">

<h3 class="title">聊聊 ASUS WL500g</h3>

<p>上個星期從 <a href="http://jouston.no-ip.com/archives/000075.html">jouston blog</a> 看到 ASUS WL500b/g 的消息, 當下就去網站上下載了全部的 <a href="http://taiwan.asus.com.tw/support/download/item.aspx?ModelName=WL-500b&Type=Latest">Soure Code </a>來研究.<br />
現在我就用這台 WL500g 無線上網中, 感覺還不錯用哩. 根據從原始碼來看, CPU 為 MIPS32/little edian 搭配 Linux Kernel 2.4.20, 根目錄檔案系統(rootfs)採用 Cramfs 並未使用 ramdisk(initrd). Wireless Solution 採用 <a href="http://www.broadcom.com">Broadcom</a> 的晶片.<br />
MTD partition 分為四層 nvram, bootloader(pmon), kernel, rootfs. 系統參數存放在 nvram, 按住 reset 鍵五秒可恢復出廠預設值. 而 rootfs 只有一份因此沒有 backup firmware 功能, kernel 初始化後會從 flash 直接載入 rootfs.<br />
使用的軟體還有 Busybox 0.60.0, mini_httpd, pppd/re-pppoe, birdge utils, iptables, GNU zebra 等. 令人訝異的是, 似乎toolschain, web 網頁也完整開放出來.<br />
儘管已經是個不錯的產品, 我還是龜毛的希望有更好的功能支援, 也許透過 Firemware Upgrade 的方式, 可以私下作些改良,底下是我對此產品的建議:<br />
1. Proxy support - <br />
    如果能把 proxy(squid) 功能加入會更好用, 不過可能需要更多的硬體資源.<br />
2. Samba Server support -<br />
   雖然有 stupid_ftpd 來讓使用者存取 USB-storage, 但網路芳鄰應該比 FTP 來得容易使用.<br />
3. Traffic Control (QoS) support -<br />
   真的, 若有 QoS 就更美啦! 這個功能應該多佔不了多少 flash 空間.<br />
4. VPN/PPTP support -<br />
   哈哈哈....別理我.<br />
說真的, 國內很多公司在做 embedded linux, 但像華碩那樣開放整個 150MB 原始碼的實在很少. 真的該多支持多鼓勵.<br />
聽說華碩最近有在徵 Embedded 的工程師喔! 或許我該去應徵呢? 呵呵...<br />
</p>

<a name="more"></a>


<span class="posted">由 timhsu 發表於 May 14, 2004 10:36 PM

<br /></span>

</div>


<div class="comments-head"><a name="comments"></a>迴響</div>

<div class="comments-body">
<p>高手  你好</p>

<p>我來自PCZONE   我遇到一些問題<br />
請問 可以幫忙嗎</p>

<p>[url]http://www.pczone.com.tw/showthread.php?s=&threadid=125120[/url] <br />
[url]http://www.pczone.com.tw/showthread.php?s=&threadid=125677[/url] <br />
[url]http://www.pczone.com.tw/showthread.php?s=&threadid=123588[/url] </p>

<p>上面這幾篇 是我的小小試玩心得 </p>

<p>也因為試玩 我發現這一台 是使用LINUX KERNEL2.4的核心 的小型遷入式系統 但是由於他硬體的限制 有許多功能被移除了 </p>

<p>我先介紹一下 這台的主要元件 </p>

<p>1.包含CPU跟ADSL連接用的CHIP ----BCM96335 <br />
雖說TELNET的時候式顯示BCM96345但是實際上他是使用BCM96335搭配修改過本來是給BCM96345使用的LINUX </p>

<p>2.主要存放OS的地方 FLASHRAM__大小2MB [IMG]http://mail.apol.com.tw/~if2/m1.jpg[/IMG] </p>

<p>3.OS核心解壓後執行跟TEMP存放處 ___RAM一顆6MB [IMG]http://mail.apol.com.tw/~if2/m2.jpg[/IMG] </p>

<p>由於這台有一台兄弟機 使用BCM96345晶片 </p>

<p>我昨天找到後也發現到該兄弟機的最新BIN檔(就是把整個OS都全部 </p>

<p>更新並加入新的功能)也就拿來用看看,但是更新後ATU_R就掛了 </p>

<p>也因為如此 我想到了 既然有新的BIN 也就是說這個可以自己想 然後 </p>

<p>想辦法更新 並且加入新的功能 </p>

<p>這台的原有功能還算強大 他有辦法MOUNT 也有好用的IPTABLES可 </p>

<p>以用 可惜記憶體上的限制 它開機完成到執行已經耗用5MB多的記憶 </p>

<p>體 </p>

<p><br />
所以我想 把他的記憶體換成32B的 FLASHRAM部分改成4MB的 </p>

<p>但是以下有幾個麻煩 想問一下 有經驗開發過遷入(EM)式系統的 各位 </p>

<p>高手 </p>

<p><br />
1.我知道他是BCM96335 但是不知道他裡面包含的CPU是啥款的 因 </p>

<p>為他可以說是SOC 那我該如何偵測出核心 打造出專用的KERNEL </p>

<p>2.它使用BusyBox V6版作他的SHELL 但是很多功能移除 如果說不 </p>

<p>能達成第一項目的 那我有辦法只更新他的 BusyBox 版本嗎 </p>

<p><br />
3.如果1跟2都可以完成 這台的硬體又可以提升 那合併頻寬應該是可 </p>

<p>以的 我剛剛測試了一下 他可以多次撥接上去 甚至 只要VCI通道有開 </p>

<p>多的 他也可以使用 也就是我可以做到小小的機器就可以合併頻寬 </p>

<p>另外或許可以外加上SAMBA伺服器 當PDC伺服器使用 </p>

<p></p>

<p>我到GOOGLE 找了一下 應該是找到CPU的型號了 <br />
The embedded MIPS32 CPU, with Broadcom-supplied software, controls the ADSL modem, performs high-performance bridging and routing between the ADSL WAN interface and various LAN interfaces, and allows for customer application development with industry-standard EJTAG/Ethernet tool chains and development environments. </p>

<p><br />
請問該如何 下面的動作 </p>

<p>我手邊有已經變成BIN檔的這台ATU_R的OS 我該如何打開 </p>

<p>THX</p>

<p><br />
煩請各位高手給予指教 </p>

<p></p>

<p><br />
THX</p>
<span class="comments-post">Posted by: <a href="http://www.pczone.com.tw/showthread.php?s=&threadid=125797">punk</a> 發表於 June 21, 2004 08:51 PM</span>
</div>
<div class="comments-body">
<p>http://wl500g.dyndns.org/#tips</p>

<p>custom firmware 1.7.5.9 已有支援SAMBA (不過要telnet進去改script)...當然也支援Ssh and telnet daemons</p>

<p>原作者(Oleg)已經在發展QoS...snmpd...等功能...</p>

<p>不錯的wl-500g討論區:http://www.chupa.nl/forum/</p>

<p>期待中...</p>
<span class="comments-post">Posted by: <a href="mailto&#58;adar&#46;chiu&#64;msa&#46;hinet&#46;net">adar</a> 發表於 July 11, 2004 11:34 PM</span>
</div>
<div class="comments-body">
<p>嗨, 高手你好, 我是WL500g的軟體研發工程師.....<br />
你有興趣來華碩面試嗎?</p>
<span class="comments-post">Posted by: <a href="mailto&#58;Cheni_Shen&#64;asus&#46;com&#46;tw">Joey</a> 發表於 July 28, 2004 09:47 AM</span>
</div>
<div class="comments-body">
<p>hi Joey,<br />
感謝您看得起我, 可惜我已在七月初接任新工作了.<br />
我的女友在不久前進入華碩研發, 華碩真的是間不錯的公司, 福利也很好.<br />
Anyway, WL500g 作得很好, 真是辛苦你們了, 加油 :-)<br />
</p>
<span class="comments-post">Posted by: <a href="http://timhsu.sayya.org">timhsu</a> 發表於 August  9, 2004 08:59 PM</span>
</div>




</div>
</div>
</body>
</html>
