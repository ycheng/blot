<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>timhsu: July 2003 彙整</title>

<link rel="stylesheet" href="http://blog.linux.org.tw/~timhsu/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.linux.org.tw/~timhsu/index.rdf" />
<link rel="start" href="http://blog.linux.org.tw/~timhsu/" title="Home" />
<link rel="prev" href="http://blog.linux.org.tw/~timhsu/archives/2003_06.html" title="June 2003" />

<link rel="next" href="http://blog.linux.org.tw/~timhsu/archives/2004_03.html" title="March 2004" />


<script language="javascript" type="text/javascript">
function OpenComments (c) {
    window.open(c,
                    'comments',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}
</script>

</head>

<body>	

<div id="banner">
<h1><a href="http://blog.linux.org.tw/~timhsu/" accesskey="1">timhsu</a></h1>
<span class="description"></span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="http://blog.linux.org.tw/~timhsu/archives/2003_06.html">&laquo; June 2003</a> |

<a href="http://blog.linux.org.tw/~timhsu/">回到主頁面</a>
| <a href="http://blog.linux.org.tw/~timhsu/archives/2004_03.html">March 2004 &raquo;</a>

</div>

</div>

<div class="blog">


<h2 class="date">July 16, 2003</h2>


<div class="blogbody">
<a name="000044"></a>
<h3 class="title">關於 Dlink 650+ for Linux</h3>

<p>各位看倌, 有人用過 Dlink 650+ wireless card 嗎?<br />
今個兒, 我想談談這個卡用的 TI acx100 chipset 的故事...<br />
首先, 我個人覺得這是張不錯的卡, 然而不錯在那我並不十分清楚.<br />
只不過, 如果有人和我一樣是個 linuxer 又恰巧買了 Dlink 650+ 那就十分不妙了...<br />
Dlink650+ 用的是 TI 的 acx100 chipset, 而前一代 Dlink 650 並非用 acx100 chipset, 而且 Dlink650 在 Linux 上 support 還算不錯.<br />
當有些 linux 朋友見到功能更強的 Dlink 650+, 而希望在自個的 linux 上使用時, 便開始了一連串的惡夢....<br />
首先, 來看看外國人的討論 <a href="http://www.seattlewireless.net/index.cgi/DlinkDwl650Plus">SeattleWireless: DlinkDwl650Plus</a></p>

<p>節錄其中一段:<br />
============<br />
 I just checked and D-Link (listed as D Link Systems Incorporated) is a member of the Better Business Bureau (their ID is 13033848). Since D-Link and TI and not listening to us this way, perhaps they will listen if their BBB status is at risk (this is valuble to companies for many reasons)..</p>

<p>Here are the facts:</p>

<p>* From around August 2002, D-Link support began telling Linux users that a driver would be released in December, so we should just hang on until then.</p>

<p>* Eventually, an offical FAQ item showed up on their web site stating this.</p>

<p>* In December, it was annouced that the driver had be delayed til Quarter 1 of 2003.</p>

<p>* At the end of December, D-Link reversed course and began telling users that there were no plans for a Linux driver because they coundn't obtain the source code from TI. After the Eusso driver became available and Eusso support stated that they obtained the source for the driver from TI under an NDA, this statement was retracted by D-Link</p>

<p>* At the current time, the driver's development has apparently been frozen and now we're all stuck with card we were told would be supported.</p>

<p>===========</p>

<p>僅管 Dlink 在不久前放出了 linux binary driver for Dlink 650+, 但是有些 hacker 已耐不住性子了, 開始了 <a href="http://www.seattlewireless.net/index.cgi/Acx100ReverseEngineering">Acx100ReverseEngineering</a>計畫, 想利用已有的 binary driver(linux/windows)作逆向工程, 並在 sourceforge 開個 <a href="http://acx100.sourceforge.net/">acx100 oss driver project</a>...</p>

<p>從 20030706 release 的成果來看, 已令我十分吃驚. Ad-Hoc without WEP 已可使用. 而且整個 source tree & code 整理的十分好. 很難想像是完全沒有任何文件或技術支援下硬幹出來的產物.</p>

<p>這個 porject 會發展起來也算是對製造商的一種抗議, 據我所知, Dlink 事實上也想 release linux station driver source, 只不過 TI 基於一些商業因素(可能還有其它)並不願意釋出 source. 也可能 source 裡有一些機密形成的商業考量.</p>

<p><br />
最後, 我想節錄一段 acx100 oss driver project 的 README 作為結束, 我不便譯為中文, 那會失去一些原味, 請各位好好細讀一翻 :-)</p>

<p>Let me mention that we REALLY dislike the way very stupid hardware vendors<br />
name their cards containing DIFFERENT chipsets!!</p>

<p>One of these vendors is SpeedStream/Siemens: a card that uses the same<br />
name "SS1021" is available in both Orinoco chip and ACX100 chip versions.</p>

<p>Another one is D-Link: they have "DWL-650" and "DWL-650+".<br />
"DWL-650+" is simply an improved version of the "DWL-650", right?<br />
WRONG!<br />
The standard versions use Prism2.5, whereas the "+" versions use ACX100<br />
chipset. Good luck in finding a (correct) driver!!<br />
And it's even WORSE: I just found out that there is some newer<br />
version of the "DWL-650" out that also contains the ACX100<br />
(it uses the same hardware as the "+" versions).<br />
This BRAINDEAD STUPIDITY in device naming easily entitles D-Link<br />
for the "Most Braindead Hardware Vendor 2003" award. And of course<br />
they were also talking about developing another Linux driver for some time,<br />
without any results (although I guess that's because they wanted to<br />
develop it, but were not allowed to, unfortunately, so it's understandable).</p>

<p>IF you dare to release cards with a different incompatible chipset<br />
that doesn't even have proper driver support for a popular alternative OS,<br />
then AT LEAST change the card name in order to let people know and discern<br />
which hardware to avoid like the plague, for heaven's sake!<br />
This is such a <CENSORED>, I could <OUCH, CENSORED!>...</p>

<p>Finally, let me mention that we really dislike the way how<br />
Texas Instruments handles Linux driver support. It's a really shameful<br />
pity, with delays to be measured in years versus the Windows driver<br />
support, and with poor and buggy binary driver support.<br />
All in all our team would be very grateful to receive proper<br />
development support and cooperation from TI in order to create<br />
proper Linux drivers. That would be The Good Way to do it...<br />
(although admittedly that would still only be the second-best way to do it,<br />
with the best way being to have paid company developers work on a<br />
well-working OSS driver, of course)<br />
After all it's the hardware VENDOR that's earning money via OUR, the<br />
customers', payment, so it should be the damn responsibility of the<br />
hardware vendor to ensure good driver support, not the other way around!<br />
Just imagine the weird looks of thousands and thousands of Linux users<br />
when they discovered the lack of support for the product that they just<br />
shelled out considerable amounts of money for...</p>



<div class="posted">
	由 timhsu 發表於 <a href="http://blog.linux.org.tw/~timhsu/archives/000044.html">12:32 AM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=44" onclick="OpenComments(this.href); return false">迴響 (1)</a>
	
	
</div>

</div>



<h2 class="date">July 14, 2003</h2>


<div class="blogbody">
<a name="000040"></a>
<h3 class="title">Fix Module Binary</h3>

<p>How to fix symbols and version of module binary?</p>

<p>有沒有遇過像這樣的訊息呢?<br />
[root@localhost net]# insmod acx100sta_cs.o<br />
acx100sta_cs.o: kernel-module version mismatch<br />
        acx100sta_cs.o was compiled for kernel version 2.4.21-0.13mdk<br />
        while this kernel is version 2.4.21-0.18mdk.                 </p>

<p>有時候我們從一些網站上下載回某個 linux driver, 有些含 source, 有些僅是<br />
module binary 若該 module binary 編譯的環境(kernel 版本)和目前正在用的<br />
kernel 版本不符時, 往往就會出現 kernel-module version mismatch 的錯誤.</p>

<p>有個方法是利用 insmod -f 來強迫載入 module.<br />
還有個法子, 請下載 <a href="http://info.sayya.org/~kids/tools/fixscript">fixscript</a></p>

<p>fixscript 可直接修改 module binary 裡的符號表和版本資訊以符合目前<br />
運行中的 kernel 版本和環境. fixscript 處理過後即可不用 insmod -f <br />
來強迫載入. 只是這樣的 module 可能帶來一些風險, 要自行斟酌使用之.</p>

<p>使用範例:<br />
[root@localhost root]# ./fixscript acx100sta_cs.o newacx100sta_cs.o<br />
Fixscript V1.7                                                     <br />
doing eth_type_trans trunc=eth_type_trans new=eth_type_trans_R729edb6c<br />
doing __wake_up trunc=__wake_up new=__wake_up_Rb76c5f1e               <br />
doing __kfree_skb trunc=__kfree_skb new=__kfree_skb_Rc45b82d1<br />
doing alloc_skb trunc=alloc_skb new=alloc_skb_Rdc2b24bd      <br />
doing pci_register_driver trunc=pci_register_driver new=pci_register_driver_R1e536d21                                                                          <br />
doing __generic_copy_from_user trunc=__generic_copy_from_user new=__generic_copy_from_user_R116166aa                                                           <br />
doing __release_region trunc=__release_region new=__release_region_Rd49501d4<br />
doing kmalloc trunc=kmalloc new=kmalloc_R93d4cfe6                           <br />
doing pci_free_consistent trunc=pci_free_consistent new=pci_free_consistent_R1bfc1908                                                                          <br />
doing pci_enable_device trunc=pci_enable_device new=pci_enable_device_R1bc741d2<br />
doing alloc_etherdev trunc=alloc_etherdev new=alloc_etherdev_R6520b46c         <br />
doing vfree trunc=vfree new=vfree_R2fd1d81c                           <br />
doing pci_disable_device trunc=pci_disable_device new=pci_disable_device_R958460<br />
05                                                                             <br />
doing boot_cpu_data trunc=boot_cpu_data new=boot_cpu_data_R0657d037<br />
doing cpu_raise_softirq trunc=cpu_raise_softirq new=cpu_raise_softirq_Rd01f3ee8<br />
doing free_irq trunc=free_irq new=free_irq_Rf20dabd8                           <br />
doing unregister_netdev trunc=unregister_netdev new=unregister_netdev_Rd372bc38<br />
doing __out_of_line_bug trunc=__out_of_line_bug new=__out_of_line_bug_R8b0fd3c5<br />
doing iounmap trunc=iounmap new=iounmap_R5fb196d4                              <br />
doing pci_alloc_consistent trunc=pci_alloc_consistent new=pci_alloc_consistent_Rca1c24c8                                                                       <br />
doing __ioremap trunc=__ioremap new=__ioremap_R9eac042a<br />
doing del_timer trunc=del_timer new=del_timer_Rfc62f16d<br />
doing register_netdev trunc=register_netdev new=register_netdev_Rc85ab262<br />
doing iomem_resource trunc=iomem_resource new=iomem_resource_R9efed5af   <br />
doing kfree trunc=kfree new=kfree_R037a0cba                           <br />
doing request_irq trunc=request_irq new=request_irq_R0c60f2e0<br />
doing netif_rx trunc=netif_rx new=netif_rx_Rd1546c1c         <br />
doing __verify_write trunc=__verify_write new=__verify_write_R203afbeb<br />
doing pci_unregister_driver trunc=pci_unregister_driver new=pci_unregister_driver_Re8061e13                                                                    <br />
doing skb_over_panic trunc=skb_over_panic new=skb_over_panic_R5ced0794<br />
doing pci_set_master trunc=pci_set_master new=pci_set_master_R99cc7ae2<br />
doing sleep_on_timeout trunc=sleep_on_timeout new=sleep_on_timeout_R75c8e394<br />
doing sprintf trunc=sprintf new=sprintf_R1d26aa98                           <br />
doing jiffies trunc=jiffies new=jiffies_R0da02d67<br />
doing __vmalloc trunc=__vmalloc new=__vmalloc_R79995c5b<br />
doing softnet_data trunc=softnet_data new=softnet_data_R338e35b2<br />
doing __request_region trunc=__request_region new=__request_region_R1a1a4f09<br />
doing printk trunc=printk new=printk_R1b7d4074                              <br />
doing add_timer trunc=add_timer new=add_timer_Ra19eacf8<br />
doing __generic_copy_to_user trunc=__generic_copy_to_user new=__generic_copy_to_<br />
user_Rd523fdd3                                                                 </p>

<p>[root@localhost root]# insmod newacx100sta_cs.o<br />
Warning: loading newacx100sta_cs.o will taint the kernel: no license<br />
  See http://www.tux.org/lkml/#export-tainted for information about tainted modu<br />
les                                                                            <br />
newacx100sta_cs.o: init_module: No such device<br />
Hint: insmod errors can be caused by incorrect module parameters, including inva<br />
lid IO or IRQ parameters.                                                      <br />
      You may find more information in syslog or the output from dmesg</p>



<div class="posted">
	由 timhsu 發表於 <a href="http://blog.linux.org.tw/~timhsu/archives/000040.html">11:13 AM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=40" onclick="OpenComments(this.href); return false">迴響 (0)</a>
	
	
</div>

</div>



<h2 class="date">July 01, 2003</h2>


<div class="blogbody">
<a name="000028"></a>
<h3 class="title">傾印執行檔 (dump2bin)</h3>

<p>很久以前曾經看到一位很有名的 hacker - <a href="http://www.big.net.au/~silvio/">silvio</a> 將 core 檔轉換成 ELF 執行檔(core2elf), 當時覺得非常有趣. 在 Un*x 的檔案權限限制裡, 如果我們將某個執行檔設為可執行卻不可讀寫, 那麼我們將無法讀取檔案內容, 也無法對該執行檔作正常的 gdb 動作.<br />
對執行檔進行讀取和除錯其實是逆向工程或是系統安全裡的基本操作, 有些系統管理者或程式設計者太過信賴 Un*x 權限管理, 將過多的資訊保存在執行檔裡, 卻可能導至一些問題的發生.<br />
這個程式 <a href="http://info.sayya.org/~kids/source/dump2bin.c">dump2bin.c</a> 是我利用 Linux 提供的 ptrace 系統呼叫, 將執行檔內容傾印至指定的檔案. <br />
例如: ./flags 原本是不可讀寫的執行檔, 但經過 dump2bin 轉換成 ./flags2 即可讀寫.<br />
flags 的 file owner 可以為任何人, 只要可以執行的檔案都可轉換.</p>

<p>[tim@localhost hack]$ ls -al ./flags<br />
---x--x--x    1 tim      tim         11400  6月 23 17:21 ./flags*<br />
[tim@localhost hack]$ ./dump2bin ./flags ./flags2 <br />
Ready to dump ./flags to ./flags2 ...<br />
Child pid = 12183<br />
Converted successfully!<br />
[tim@localhost hack]$ ls -al ./flags2 <br />
-rwx------    1 tim      tim         11400  7月  1 01:01 ./flags2*<br />
[tim@localhost hack]$ file ./flags2 <br />
./flags2: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.2.5, dynamically linked (uses shared libs), stripped</p>



<div class="posted">
	由 timhsu 發表於 <a href="http://blog.linux.org.tw/~timhsu/archives/000028.html">01:07 AM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=28" onclick="OpenComments(this.href); return false">迴響 (0)</a>
	
	
</div>

</div>


</div>
</div>

</body>
</html>
