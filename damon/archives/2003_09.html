<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>damon's notepad: September 2003 彙整</title>

<link rel="stylesheet" href="http://blog.linux.org.tw/~damon/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.linux.org.tw/~damon/index.rdf" />
<link rel="start" href="http://blog.linux.org.tw/~damon/" title="Home" />
<link rel="prev" href="http://blog.linux.org.tw/~damon/archives/2003_08.html" title="August 2003" />

<link rel="next" href="http://blog.linux.org.tw/~damon/archives/2003_10.html" title="October 2003" />


<script language="javascript" type="text/javascript">
function OpenComments (c) {
    window.open(c,
                    'comments',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}
</script>

</head>

<body>	

<div id="banner">
<h1><a href="http://blog.linux.org.tw/~damon/" accesskey="1">damon's notepad</a></h1>
<span class="description"></span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="http://blog.linux.org.tw/~damon/archives/2003_08.html">&laquo; August 2003</a> |

<a href="http://blog.linux.org.tw/~damon/">回到主頁面</a>
| <a href="http://blog.linux.org.tw/~damon/archives/2003_10.html">October 2003 &raquo;</a>

</div>

</div>

<div class="blog">


<h2 class="date">September 29, 2003</h2>


<div class="blogbody">
<a name="000425"></a>
<h3 class="title">元智半日遊</h3>

<p>趁著到新公司報到前的休假日，到桃園元智一趟</p>

<p>看看上次FreeBSD arp sa patch重新開機之後就一直連不上的yzim84網站<br />
元智一館還是差不多，不過旁邊新蓋的那棟蓋得很醜就是了，維持元智建築的一慣風格:p<br />
看了看機器，花了一些時間測試軟硬體之後，發覺有想把整台機器拿去丟掉的衝動<br />
問題真多，網路卡換過之後有時開機網路可以通有時不行，一下又是ram沒接好在響，但根本沒去動到ram，一下是ram test fail @_@<br />
最後還是放棄了，先暫時這樣吧，至少資料都還在，沒問題</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000425.html">11:26 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=425" onclick="OpenComments(this.href); return false">迴響 (705)</a>
	
	
</div>

</div>



<h2 class="date">September 28, 2003</h2>


<div class="blogbody">
<a name="000418"></a>
<h3 class="title">FreeBSD完全探索</h3>

<p><img alt="EB207_72_4x5.jpg" src="http://blog.linux.org.tw/~damon/archives/EB207_72_4x5.jpg" width="114" height="155" border="0" /><br />
</p>

<p>今天下午在外面閒晃時買的，稍微翻了一下，翻譯的不錯，雖然是以4.5為基礎，不過大部份在5.X上還是通用的重點是比原文版的便宜滿多的XD<br />
原文的大概要一千多，中文版只要六百多還可以打折<br />
一些基礎觀念的部份解釋的滿詳細的，雖然我沒看過原文版的<br />
有興趣踏入FreeBSD的朋友可以買來看看，翻這本時旁邊有另外一本我當初一開始的時候買的另外一本的更新版本，比較一下的感覺是真的有那麼點差距，價格上也差不多，雖然那本現在被我丟在角落，很久沒去動他了<br />
書上compile kernel的部份有點老舊了，對於5.X來說作法上有一些不太一樣，不過觀念上大致上是一樣的<br />
</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000418.html">05:40 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=418" onclick="OpenComments(this.href); return false">迴響 (77)</a>
	
	
</div>

</div>



<h2 class="date">September 27, 2003</h2>


<div class="blogbody">
<a name="000412"></a>
<h3 class="title">gdm安裝筆記</h3>

<p>今天花了一些時間把FreeBSD , Debian都改用gdm登入並裝上gnome2</p>

<p>FreeBSD:cd /usr/ports/x11/gnome2/;make install clean<br />
東西很多，要等一陣子<br />
比較需要注意的是如果是用5.1 release的話，會因為open pam的bug無法正常用gdm登入，所以升級到current吧 :p<br />
安裝完之後/usr/X11R6/etc/rc.d/裡面的gdm.sh.sample直接複製成gdm.sh吧<br />
/etc/profile直接加入<br />
export LC_ALL=zh_TW.Big5<br />
export LANG=zh_TW.Big5<br />
export XMODIFIERS="@im=xcin"<br />
exec /usr/X11R6/bin/xcin2.5 &<br />
重新開機就可以直接用gdm登入，並自動啟動xcin，作法有點dirty :p</p>

<p>Debian unstable:apt-get install gnome<br />
/etc/gdm/locale.conf把底下這行改成這樣<br />
Chinese(Taiwan_R.O.C.)  zh_TW.Big5<br />
/etc/gdm/Sessions/Gnome加入<br />
export LC_ALL=zh_TW.Big5<br />
export LANG=zh_TW.Big5<br />
export XMODIFIERS="@im=xcin"<br />
exec /usr/bin/xcin &<br />
/etc/init.d/gdm加入<br />
export LANG=zh_TW.Big5<br />
/etc/init.d/gdm restart<br />
同樣也是有點dirty的作法，參考chihchun的作法 :p<br />
enjoy it<br />
</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000412.html">11:19 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=412" onclick="OpenComments(this.href); return false">迴響 (103)</a>
	
	
</div>

</div>



<h2 class="date">September 25, 2003</h2>


<div class="blogbody">
<a name="000399"></a>
<h3 class="title">FreeBSD 5.1 p6 arp sa patch problem</h3>

<p>今天看到每天跑的cvsup RELENG_5_1有更新，就給他放下去更新，不過下班回到家發現家中nat service掛了@_@</p>

<p>將螢幕接過去server發現console上有錯誤訊息說/etc/hosts裡面有一筆192.168.1.2的記錄，但卻無法透過arp找到這個ip<br />
Sep 25 19:08:40 damon kernel: arplookup 192.168.1.2 failed: host is not on local network<br />
登入之後直接編輯/etc/hosts把除了本機nic所用的ip之外都移除，並重新開機終於一切恢復正常，可能是這個patch的bug也可能不是<br />
詭異的是kernel怎麼會去做arplookup？<br />
我也不知道，別問我XD</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000399.html">08:16 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=399" onclick="OpenComments(this.href); return false">迴響 (475)</a>
	
	
</div>

</div>



<h2 class="date">September 23, 2003</h2>


<div class="blogbody">
<a name="000387"></a>
<h3 class="title">kdm安裝完成</h3>

<p>今天利用一點休假時間把kdm裝起來了</p>

<p>不過有一些小問題，可能是bug，也可能不是<br />
修改了按鈕的風格可以，修改了使用的顏色卻不行<br />
字型沒辦法在清單中選擇中文字型<br />
其他到是沒問題，只要把能夠正常使用中文kde的.xinitrc直接cp成.xsession<br />
export LC_ALL=zh_TW.Big5<br />
export LANG=zh_TW.Big5<br />
export XMODIFIERS="@im=xcin"<br />
exec xcin &<br />
exec startkde<br />
我的設定檔是這樣.xinitrc .xsession都一樣<br />
在選擇session的時候選擇default，這樣就能夠正常的讀取.xsession中的設定值了<br />
題外話，看過gdm , kdm之後，還是覺得gdm比較符合eye candy，對於佈景主題的support也比較完整方便，不過有一些部份需要自己手動調整有點小麻煩，所以還是選擇簡單的kdm<br />
使用gdm的朋友可以參考chihchun的文章<br />
http://wiki.debian.org.tw/index.php?page=gdm</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000387.html">12:19 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=387" onclick="OpenComments(this.href); return false">迴響 (114)</a>
	
	
</div>

</div>



<h2 class="date">September 22, 2003</h2>


<div class="blogbody">
<a name="000378"></a>
<h3 class="title">debian重裝筆記</h3>

<p>趁著安裝大會，把機器重整了一次，順便寫一下小筆記好了</p>

<p>安裝系統,一樣用網路安裝,選擇ext3,20g分割成/(400mb) , /var (1g) , /home (1g) , swap (1xx) , /usr (剩下的)<br />
安裝好woody之後，直接升級到unstable<br />
/etc/apt/source.list中有提到stable的地方都改成unstable<br />
apt-get update;apt-get dist-upgrade<br />
換各kernel,怪異的是2.4.22 for k7的kernel image的apm module無法modprobe，所以換成沒問題的版本<br />
apt-get install kernel-image-2.4.21-5-k7<br />
/etc/lilo.conf加入initrd=initrd.img<br />
cd /;lilo -v -v -v;reboot<br />
adduser damon audio<br />
apt-get install x-window-system locales ttf-arphic* xcin xfonts-intl-chinese mozilla-firebird gaim xchat ssh rxvt-ml rcconf xine-ui openoffice.org openoffice.org-l10n-zh-tw openoffice.org-help-zh-tw<br />
安裝完用rcconf把開機不需要的service全都拿掉<br />
/etc/init.d/xxxx stop停掉不需要的service<br />
/etc/apt/source.list把官方的都拿掉改成<br />
deb http://snapshot.debian.net/archive/2003/08/11/debian unstable main contrib non-free<br />
日期的部分就試到可以直接跑apt-get install kde的就好，隨便改<br />
跑完apt-get install kde之後再把/etc/apt/source.list改回來用官方的<br />
apt-get update;apt-get upgrade升級2003/08/11之後更新的kde相關的東西<br />
apt-get install kde-i18n-zhtw安裝一下kde中文<br />
編輯一下平常使用的帳號的.xinitrc<br />
root跟平常使用的帳號的.bashxxxx檔案，讓目錄跟檔案顏色作用並重新登入<br />
startx完成<br />
locales如果沒有產生所要的locale的話就自己手動編輯/etc/locales.gen再重新來吧</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000378.html">11:59 AM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=378" onclick="OpenComments(this.href); return false">迴響 (631)</a>
	
	
</div>

</div>



<h2 class="date">September 21, 2003</h2>


<div class="blogbody">
<a name="000375"></a>
<h3 class="title">新竹交大debian安裝大會圓滿結束</h3>

<p>今天感謝BBNS感冒還是努力的為安裝大會學員上課m(_._)m</p>

<p>今天下午的新竹天空有點雲，風也很大，騎著車，帶著沈重pc 到交大，好像該買nb了，pc 這樣搬來搬去真是要人命~_~<br />
交大網路真快，不愧是gb base的網路，用apt-get安裝東西真是超快，可以到2xx kb<br />
雖然參加的人大約只有10幾位，不過還是有幾位很有興趣的學員參加，感謝大家的參與:)<br />
離開交大的時候還看到彩虹喔A_Ay<br />
</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000375.html">10:31 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=375" onclick="OpenComments(this.href); return false">迴響 (842)</a>
	
	
</div>

</div>



<h2 class="date">September 17, 2003</h2>


<div class="blogbody">
<a name="000317"></a>
<h3 class="title">New FreeBSD, NetBSD security advisories</h3>

<p>FreeBSD has formally announced a security advisory entitled "OpenSSH buffer management error" for the now famous OpenSSH advisory (OpenSSH has released a new version 3.7.1 to address this). Everyone is urged to patch their OS, details provided below. NetBSD has issued a similar advisory and fix for this issue (see NetBSD emails below). NetBSD has released two additional security advisories entitled "Kernel memory disclosure via ibcs2" and "Insufficient argument checking in sysctl(2)".</p>

<p>From "FreeBSD Security Advisories" <security-advisories@freebsd.org> <br />
Subject [FreeBSD-Announce] FreeBSD Security Advisory FreeBSD-SA-03:12.openssh<br />
Date Tue, September 16, 2003 12:17 pm <br />
To "FreeBSD Security Advisories" <security-advisories@freebsd.org> </p>

<p>--------------------------------------------------------------------------------</p>

<p><br />
-----BEGIN PGP SIGNED MESSAGE-----<br />
Hash: SHA1</p>

<p>==================================================<br />
===========================<br />
FreeBSD-SA-03:12 Security Advisory<br />
FreeBSD, Inc.</p>

<p>Topic: OpenSSH buffer management error</p>

<p>Category: core, ports<br />
Module: openssh, ports_openssh, openssh-portable<br />
Announced: 2003-09-16<br />
Credits: The OpenSSH Project <openssh@openssh.org><br />
Affects: All FreeBSD releases after 4.0-RELEASE<br />
FreeBSD 4-STABLE prior to the correction date<br />
openssh port prior to openssh-3.6.1_1<br />
openssh-portable port prior to openssh-portable-3.6.1p2_1<br />
Corrected: 2003-09-16 16:24:02 UTC (RELENG_4)<br />
2003-09-16 16:27:57 UTC (RELENG_5_1)<br />
2003-09-16 17:34:32 UTC (RELENG_5_0)<br />
2003-09-16 16:24:02 UTC (RELENG_4_8)<br />
2003-09-16 16:45:16 UTC (RELENG_4_7)<br />
2003-09-16 17:44:15 UTC (RELENG_4_6)<br />
2003-09-16 17:45:23 UTC (RELENG_4_5)<br />
2003-09-16 17:46:02 UTC (RELENG_4_4)<br />
2003-09-16 17:46:37 UTC (RELENG_4_3)<br />
2003-09-16 12:43:09 UTC (ports/security/openssh)<br />
2003-09-16 12:43:10 UTC (ports/security/openssh-portable)<br />
CVE: CAN-2003-0693<br />
FreeBSD only: NO</p>

<p>I. Background</p>

<p>OpenSSH is a free version of the SSH protocol suite of network<br />
connectivity tools. OpenSSH encrypts all traffic (including<br />
passwords) to effectively eliminate eavesdropping, connection<br />
hijacking, and other network-level attacks. Additionally, OpenSSH<br />
provides a myriad of secure tunneling capabilities, as well as a<br />
variety of authentication methods. `ssh' is the client application,<br />
while `sshd' is the server.</p>

<p>II. Problem Description</p>

<p>When a packet is received that is larger than the space remaining in<br />
the currently allocated buffer, OpenSSH's buffer management attempts<br />
to reallocate a larger buffer. During this process, the recorded size<br />
of the buffer is increased. The new size is then range checked. If<br />
the range check fails, then fatal() is called to cleanup and exit.<br />
In some cases, the cleanup code will attempt to zero and free the<br />
buffer that just had its recorded size (but not actual allocation)<br />
increased. As a result, memory outside of the allocated buffer will<br />
be overwritten with NUL bytes.</p>

<p>III. Impact</p>

<p>A remote attacker can cause OpenSSH to crash. The bug is not believed<br />
to be exploitable for code execution on FreeBSD.</p>

<p>IV. Workaround</p>

<p>Do one of the following:</p>

<p>1) Disable the base system sshd by executing the following command as<br />
root:</p>

<p># kill `cat /var/run/sshd.pid`</p>

<p>Be sure that sshd is not restarted when the system is restarted<br />
by adding the following line to the end of /etc/rc.conf:</p>

<p>sshd_enable="NO"</p>

<p>AND</p>

<p>Deinstall the openssh or openssh-portable ports if you have one of<br />
them installed.</p>

<p>V. Solution</p>

<p>Do one of the following:</p>

<p>[For OpenSSH included in the base system]</p>

<p>1) Upgrade your vulnerable system to 4-STABLE or to the RELENG_5_1,<br />
RELENG_4_8, or RELENG_4_7 security branch dated after<br />
the correction date (5.1-RELEASE-p3, 4.8-RELEASE-p5, or<br />
4.7-RELEASE-p15, respectively).</p>

<p>2) FreeBSD systems prior to the correction date:</p>

<p>The following patches have been verified to apply to FreeBSD 4.x and<br />
FreeBSD 5.x systems prior to the correction date.</p>

<p>Download the appropriate patch and detached PGP signature from the following<br />
locations, and verify the signature using your PGP utility.</p>

<p>[FreeBSD 4.3 through 4.5]<br />
# fetch ftp://ftp.FreeBSD.org/pub/FreeBSD/C.../buffer45.patch<br />
# fetch ftp://ftp.FreeBSD.org/pub/FreeBSD/C...fer45.patch.asc</p>

<p>[FreeBSD 4.6 and later, FreeBSD 5.0 and later]<br />
# fetch ftp://ftp.FreeBSD.org/pub/FreeBSD/C.../buffer46.patch<br />
# fetch ftp://ftp.FreeBSD.org/pub/FreeBSD/C...fer46.patch.asc</p>

<p>Execute the following commands as root:</p>

<p># cd /usr/src<br />
# patch < /path/to/sshd.patch<br />
# cd /usr/src/secure/lib/libssh<br />
# make depend && make all install<br />
# cd /usr/src/secure/usr.sbin/sshd<br />
# make depend && make all install<br />
# cd /usr/src/secure/usr.bin/ssh<br />
# make depend && make all install</p>

<p>Be sure to restart `sshd' after updating.</p>

<p># kill `cat /var/run/sshd.pid`<br />
# (. /etc/rc.conf && ${sshd_program:-/usr/bin/sshd} ${sshd_flags})</p>

<p>[For the OpenSSH ports]</p>

<p>One of the following:</p>

<p>1) Upgrade your entire ports collection and rebuild the OpenSSH port.</p>

<p>2) Deinstall the old package and install a new package obtained from<br />
the following directory:</p>

<p>[i386]<br />
ftp://ftp.FreeBSD.org/pub/FreeBSD/p...table/security/</p>

<p>[other platforms]<br />
Packages are not automatically generated for other platforms at this<br />
time due to lack of build resources.</p>

<p>3) Download a new port skeleton for the openssh or openssh-portable<br />
port from:</p>

<p>http://www.freebsd.org/ports/</p>

<p>and use it to rebuild the port.</p>

<p>4) Use the portcheckout utility to automate option (3) above. The<br />
portcheckout port is available in /usr/ports/devel/portcheckout or the<br />
package can be obtained from:</p>

<p>ftp://ftp.FreeBSD.org/pub/FreeBSD/p...ortcheckout.tgz<br />
ftp://ftp.FreeBSD.org/pub/FreeBSD/p...ortcheckout.tgz</p>

<p>Be sure to restart `sshd' after updating.</p>

<p># kill `cat /var/run/sshd.pid`<br />
# test -x /usr/local/etc/rc.d/sshd.sh && sh /usr/local/etc/rc.d/sshd.sh start</p>

<p>VI. Correction details</p>

<p>The following list contains the revision numbers of each file that was<br />
corrected in the FreeBSD base system and ports collection.</p>

<p>Branch Revision<br />
Path<br />
- -------------------------------------------------------------------------<br />
[Base system]<br />
RELENG_4<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.5<br />
src/crypto/openssh/version.h 1.1.1.1.2.11<br />
RELENG_5_1<br />
src/UPDATING 1.251.2.4<br />
src/crypto/openssh/buffer.c 1.1.1.6.4.1<br />
src/crypto/openssh/version.h 1.20.2.1<br />
src/sys/conf/newvers.sh 1.50.2.5<br />
RELENG_5_0<br />
src/UPDATING 1.229.2.18<br />
src/crypto/openssh/buffer.c 1.1.1.6.2.1<br />
src/crypto/openssh/version.h 1.18.2.1<br />
src/sys/conf/newvers.sh 1.48.2.13<br />
RELENG_4_8<br />
src/UPDATING 1.73.2.80.2.7<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.4.4.1<br />
src/crypto/openssh/version.h 1.1.1.1.2.10.2.1<br />
src/sys/conf/newvers.sh 1.44.2.29.2.6<br />
RELENG_4_7<br />
src/UPDATING 1.73.2.74.2.18<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.4.2.1<br />
src/crypto/openssh/version.h 1.1.1.1.2.9.2.1<br />
src/sys/conf/newvers.sh 1.44.2.26.2.17<br />
RELENG_4_6<br />
src/UPDATING 1.73.2.68.2.46<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.3.4.2<br />
src/crypto/openssh/version.h 1.1.1.1.2.8.2.2<br />
src/sys/conf/newvers.sh 1.44.2.23.2.35<br />
RELENG_4_5<br />
src/UPDATING 1.73.2.50.2.47<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.3.2.1<br />
src/crypto/openssh/version.h 1.1.1.1.2.7.2.2<br />
src/sys/conf/newvers.sh 1.44.2.20.2.31<br />
RELENG_4_4<br />
src/UPDATING 1.73.2.43.2.48<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.2.4.1<br />
src/crypto/openssh/version.h 1.1.1.1.2.5.2.3<br />
src/sys/conf/newvers.sh 1.44.2.17.2.39<br />
RELENG_4_3<br />
src/UPDATING 1.73.2.28.2.35<br />
src/crypto/openssh/buffer.c 1.1.1.1.2.2.2.1<br />
src/crypto/openssh/version.h 1.1.1.1.2.4.2.3<br />
src/sys/conf/newvers.sh 1.44.2.14.2.25<br />
[Ports]<br />
ports/security/openssh-portable/Makefile 1.73<br />
ports/security/openssh-portable/files/patch-buffer.c 1.1<br />
ports/security/openssh/Makefile 1.120<br />
ports/security/openssh/files/patch-buffer.c 1.1<br />
- -------------------------------------------------------------------------</p>

<p>Branch Version string<br />
- -------------------------------------------------------------------------<br />
HEAD OpenSSH_3.6.1p1 FreeBSD-20030916<br />
RELENG_4 OpenSSH_3.5p1 FreeBSD-20030916<br />
RELENG_5_1 OpenSSH_3.6.1p1 FreeBSD-20030916<br />
RELENG_4_8 OpenSSH_3.5p1 FreeBSD-20030916<br />
RELENG_4_7 OpenSSH_3.4p1 FreeBSD-20030916<br />
RELENG_4_6 OpenSSH_3.4p1 FreeBSD-20030916<br />
RELENG_4_5 OpenSSH_2.9 FreeBSD localisations 20030916<br />
RELENG_4_4 OpenSSH_2.3.0 FreeBSD localisations 20030916<br />
RELENG_4_3 OpenSSH_2.3.0 green@FreeBSD.org 20030916<br />
- -------------------------------------------------------------------------</p>

<p>To view the version string of the OpenSSH server, execute the<br />
following command:</p>

<p>% /usr/sbin/sshd -\?</p>

<p>The version string is also displayed when a client connects to the<br />
server.</p>

<p>To view the version string of the OpenSSH client, execute the<br />
following command:</p>

<p>% /usr/bin/ssh -V</p>

<p>VII. References</p>

<p><URL:http://www.mindrot.org/pipermail/op...ber/000063.html></p>

<p>The Common Vulnerabilities and Exposures project (cve.mitre.org) has<br />
assigned the name CAN-2003-0693 to this issue.<br />
<URL:http://cve.mitre.org/cgi-bin/cvenam...e=CAN-2003-0693><br />
-----BEGIN PGP SIGNATURE-----<br />
Version: GnuPG v1.2.3 (FreeBSD)</p>

<p>iD8DBQE/ Z1MtFdaIBMps37IRApcyAKCIjophc4e8UGhAlTTiNCunVJSlfg<br />
CffMgQ<br />
PW0VvEnS7MMUYyekHuz49ro=<br />
=vcm1<br />
-----END PGP SIGNATURE-----<br />
_______________________________________________<br />
freebsd-announce@freebsd.org mailing list<br />
http://lists.freebsd.org/mailman/li...reebsd-announce<br />
To unsubscribe, send any mail to "freebsd-announce-unsubscribe@freebsd.org"</p>

<p>==========================<br />
-----BEGIN PGP SIGNED MESSAGE-----</p>

<p><br />
NetBSD Security Advisory 2003-012<br />
=================================</p>

<p>Topic: Out of bounds memset(0) in sshd</p>

<p>Version: NetBSD-current: source prior to September 17, 2003<br />
NetBSD 1.6.1: affected<br />
NetBSD 1.6: affected<br />
NetBSD-1.5.3: affected<br />
NetBSD-1.5.2: affected<br />
NetBSD-1.5.1: affected<br />
NetBSD-1.5: affected<br />
pkgsrc: packages prior to 3.7.1</p>

<p>Severity: Unknown - Rumours speculate remote root exploitability</p>

<p>Fixed: NetBSD-current: September 17, 2003<br />
NetBSD-1.6 branch: September 17, 2003 (1.6.2 will include the fix)<br />
NetBSD-1.5 branch: September 17, 2003 (1.5.4 will include the fix)<br />
pkgsrc: openssh-3.7.1 corrects this issue</p>

<p><br />
Abstract<br />
========</p>

<p>A buffer overwrite with unknown consequences has been found in OpenSSH.</p>

<p>No evidence to support remote root exploitability has been provided by<br />
any source.</p>

<p>The ssh daemon does not run by default in a NetBSD installation, but is<br />
often enabled by administrators for convenience of remote<br />
administration.</p>

<p>Changes are still being committed to the OpenSSH source distribution. We<br />
will continue to update this advisory as new information becomes<br />
available. Currently, we expect that more patches are likely, so if you<br />
are maintaining a large number of machines, use the workarounds<br />
discussed below if appropriate, and be prepared for further updates.</p>

<p>The NetBSD Project will make binary patchsets available when builds have<br />
completed. This advisory will be updated with details when they are<br />
available.</p>

<p><br />
Technical Details<br />
=================</p>

<p>In NetBSD installations where OpenSSH 3.2.1 and later are used -<br />
including the base system installations of NetBSD-1.6 and later, the<br />
privilege separation feature of OpenSSH is enabled by default. In the<br />
case of this buffer issue, privilege separation may prevent exploitation<br />
of these buffer problems, and this advisory will be updated once any<br />
exploits are demonstrated, whether successfully or not.</p>

<p>Regardless of privilege separation being enabled, this buffer issue<br />
occurs in the child process of sshd, and so any over-zero'd buffer will<br />
not crash the parent service, and will not deny ssh connectivity to the<br />
machine. If the over-zeroing is exploitable, the attacker could of<br />
course shut down the ssh daemon manually.</p>

<p>There is a lot of commotion over this buffer issue. Individuals have<br />
mentioned an increased occurrence of port scans searching for open sshd<br />
services. Since hard facts are not available yet, individuals<br />
will have to decide whether to believe the rumours, and apply patches to<br />
protect against this possible issue, or to use workarounds provided<br />
below, where appropriate, and await further information.</p>

<p><br />
http://www.openssh.com/txt/buffer.adv</p>

<p>http://xforce.iss.net/xforce/alerts/id/144</p>

<p><br />
Solutions and Workarounds<br />
=========================</p>

<p>Workaround: Disable sshd.</p>

<p>If not required, and alternate means of administration, such as consoles<br />
or serial consoles are available, disabling sshd may be acceptable.</p>

<p>Confirm that sshd is running. It is usually configured to start by the<br />
presence of a line in /etc/rc.conf, such as:</p>

<p>sshd=YES</p>

<p>Stop any currently running daemon, with</p>

<p>/etc/rc.d/sshd stop</p>

<p>OR - for a pkgsrc installation:</p>

<p>/usr/pkg/etc/rc.d/sshd stop</p>

<p>Change YES to NO in /etc/rc.conf</p>

<p><br />
Workaround: Constrain hosts which can connect to sshd.</p>

<p>In order to overflow this buffer, a client must be able to connect to<br />
the sshd in question. As a workaround, the tcp wrapper functionality<br />
included in all NetBSD installations of OpenSSH can be used to restrict<br />
connections to a limited list of source IPs.</p>

<p>As an example, populating /etc/hosts.allow with:</p>

<p>sshd : 192.168.1.1</p>

<p>And /etc/hosts.deny with:</p>

<p>sshd : ALL</p>

<p>Will result in only allowing connections from the (RFC 1918, private<br />
network) IP address 192.168.1.1.</p>

<p>Host names may also be used in the hosts.allow file. Lists are comma<br />
separated, as explained in the hosts_access(5) manpage. Review the<br />
manpage hosts_access(5) for further details. If you use hostnames, it<br />
may also be desirable to specify hosts.deny as 'sshd : ALL, PARANOID',<br />
to require the forward and reverse DNS lookups to correspond. This<br />
provides protection in cases where the host you are allowing access from<br />
is on a remote network outside your control, and you wish to protect<br />
against hijacked nameservers.</p>

<p>Another workaround is to prevent network access to only trusted<br />
systems via a perimeter router or firewall, or using IPFilter on the<br />
host itself.</p>

<p>Solution:</p>

<p>The following instructions describe how to upgrade your OpenSSH<br />
binaries by updating your source tree and rebuilding and<br />
installing a new version.</p>

<p>* NetBSD-current:</p>

<p>Systems running NetBSD-current dated from before 2003-09-16<br />
should be upgraded to NetBSD-current dated 2003-09-17 or later.</p>

<p>The following directories need to be updated from the<br />
netbsd-current CVS branch (aka HEAD):<br />
src/crypto/dist/ssh</p>

<p>To update from CVS, re-build, and re-install ssh related<br />
binaries:</p>

<p># cd src<br />
# cvs update -d -P crypto/dist/ssh<br />
# cd usr.bin/ssh</p>

<p># make USETOOLS=no cleandir dependall<br />
# make USETOOLS=no install</p>

<p><br />
* NetBSD 1.6, 1.6.1:</p>

<p>The binary distribution of NetBSD 1.6 and 1.6.1 are vulnerable.</p>

<p>Systems running NetBSD 1.6 sources dated from before 2003-09-16<br />
should be upgraded from NetBSD 1.6 sources dated 2003-09-17 or<br />
later.</p>

<p>NetBSD 1.6.2 will include the fix.</p>

<p>The following directories need to be updated from the<br />
netbsd-1-6 CVS branch:<br />
src/crypto/dist/ssh</p>

<p>To update from CVS, re-build, and re-install ssh related<br />
binaries:</p>

<p># cd src<br />
# cvs update -d -P -r netbsd-1-6 crypto/dist/ssh<br />
# cd usr.bin/ssh</p>

<p># make USETOOLS=no cleandir dependall<br />
# make USETOOLS=no install</p>

<p><br />
* NetBSD 1.5, 1.5.1, 1.5.2, 1.5.3:</p>

<p>The binary distribution of NetBSD 1.5 to 1.5.3 are vulnerable. </p>

<p>Systems running NetBSD 1.5, 1.5.1, 1.5.2, or 1.5.3 sources dated<br />
from before 2003-09-16 should be upgraded from NetBSD 1.5.*<br />
sources dated 2003-09-17 or later.</p>

<p>The following directories need to be updated from the<br />
netbsd-1-5 CVS branch:<br />
src/crypto/dist/ssh</p>

<p>To update from CVS, re-build, and re-install ssh related<br />
binaries:</p>

<p># cd src<br />
# cvs update -d -P -r netbsd-1-5 crypto/dist/ssh<br />
# cd usr.bin/ssh</p>

<p># make cleandir dependall<br />
# make install</p>

<p><br />
Thanks To<br />
=========</p>

<p>Christos Zoulas for the fix to NetBSD-current, Grant Beattie for<br />
pullups to NetBSD release branches.</p>

<p>The Full-Disclosure rumour mill.</p>

<p><br />
Revision History<br />
================</p>

<p>2003-09-17 Initial release</p>

<p><br />
More Information<br />
================</p>

<p>Advisories may be updated as new information becomes available.<br />
The most recent version of this advisory (PGP signed) can be found at <br />
ftp://ftp.NetBSD.org/pub/NetBSD/sec...003-012.txt.asc</p>

<p>Information about NetBSD and NetBSD security can be found at<br />
http://www.NetBSD.org/ and http://www.NetBSD.org/Security/.</p>

<p><br />
Copyright 2003, The NetBSD Foundation, Inc. All Rights Reserved.<br />
Redistribution permitted only in full, unmodified form.</p>

<p>$NetBSD: NetBSD-SA2003-012.txt,v 1.9 2003/09/17 03:26:25 david Exp $</p>

<p>-----BEGIN PGP SIGNATURE-----<br />
Version: GnuPG v1.0.6 (NetBSD)<br />
Comment: For info see http://www.gnupg.org</p>

<p>iQCVAwUBP2fWHz5Ru2/4N2IFAQHffAP+NgV72mh+qW6208lsAEx3R2+VrFkQtGkm<br />
FSQnMLZR9GmAl95+me3oVuVtQo/qM9aeXJuQi6zREw/oJ2I04dWvG56axss52DAW<br />
r6s9uyGBUmIsU6krImSdTpWXEMAPmQsthpRRY/QKtUp2swJLCZeQWEsOndMnewI8<br />
uI7g0ynBcwM=<br />
=D3tA<br />
-----END PGP SIGNATURE-----</p>

<p>===============</p>

<p>-----BEGIN PGP SIGNED MESSAGE-----</p>

<p><br />
NetBSD Security Advisory 2003-013<br />
=================================</p>

<p>Topic: Kernel memory disclosure via ibcs2</p>

<p>Version: NetBSD-current: source prior to August 7, 2002<br />
NetBSD 1.6.1: not affected<br />
NetBSD 1.6: not affected<br />
NetBSD-1.5.3: affected<br />
NetBSD-1.5.2: affected<br />
NetBSD-1.5.1: affected<br />
NetBSD-1.5: affected</p>

<p>Severity: </p>

<p>Fixed: NetBSD-current: August 7, 2002<br />
NetBSD-1.6 branch: not affected<br />
NetBSD-1.5 branch: August 28, 2002</p>

<p><br />
Abstract<br />
========</p>

<p>The iBCS2 system call translator for statfs(2) erroneously used the<br />
user-supplied length parameter when copying a kernel data structure<br />
into userland. If the length parameter were larger than required,<br />
then instead of copying only the statfs-related data structure,<br />
additional kernel memory would also be made available to the user.</p>

<p><br />
Technical Details<br />
=================</p>

<p>If iBCS2 support were enabled, a malicious user could call the iBCS2<br />
version of statfs(2) with an arbitrarily large length parameter,<br />
causing the kernel to return a large portion of kernel memory. Such<br />
memory might contain sensitive information, such as portions of the<br />
file cache or terminal buffers. This information might be directly<br />
useful, or it might be leveraged to obtain elevated privileges in some<br />
way. For example, a terminal buffer might include a user-entered<br />
password.</p>

<p>iBCS2 support is only present on i386/vax GENERIC kernel.</p>

<p><br />
Solutions and Workarounds<br />
=========================</p>

<p>If your kernel configuration file does not contain COMPAT_IBCS2, <br />
your system is not affected.</p>

<p>The following instructions describe how to upgrade your kernel<br />
binaries by updating your source tree and rebuilding and<br />
installing a new version of kernel.</p>

<p>* NetBSD-current:</p>

<p>Systems running NetBSD-current dated from before 2002-08-06<br />
should be upgraded to NetBSD-current dated 2002-08-07 or later.</p>

<p>The following directories need to be updated from the<br />
netbsd-current CVS branch (aka HEAD):<br />
src/sys/compat/ibcs2/ibcs2_stat.c<br />
However, because the date of the point fix is way too old, we'd suggest<br />
you to update the whole kernel. The following instruction is for<br />
updating the whole kernel.</p>

<p>To update from CVS, re-build, and re-install the kernel and reboot:<br />
# cd src<br />
# cvs update -d -P sys</p>

<p># cd sys/ARCH/conf<br />
# config KERNELCONF<br />
# cd ../../compile/KERNELCONF<br />
# make depend; make</p>

<p># cp netbsd /<br />
# reboot</p>

<p><br />
* NetBSD 1.6, 1.6.1:</p>

<p>The binary distribution of NetBSD 1.6 and 1.6.1 are NOT vulnerable.</p>

<p><br />
* NetBSD 1.5, 1.5.1, 1.5.2, 1.5.3:</p>

<p>The binary distribution of NetBSD 1.5 to 1.5.3 are vulnerable. </p>

<p>Systems running NetBSD 1.5, 1.5.1, 1.5.2, or 1.5.3 sources dated<br />
from before 2003-08-27 should be upgraded from NetBSD 1.5.*<br />
sources dated 2003-08-28 or later.</p>

<p>The following directories need to be updated from the<br />
netbsd-1-5 CVS branch:<br />
src/sys/compat/ibcs2/ibcs2_stat.c</p>

<p>To update from CVS, re-build, and re-install the kernel and reboot:</p>

<p># cd src<br />
# cvs update -d -P -r netbsd-1-5 sys/compat/ibcs2/ibcs2_stat.c</p>

<p># cd sys/ARCH/conf<br />
# config KERNELCONF<br />
# cd ../../compile/KERNELCONF<br />
# make depend; make</p>

<p># cp netbsd /<br />
# reboot</p>

<p><br />
Alternatively, apply the following patch (with potential offset<br />
differences):<br />
ftp://ftp.NetBSD.org/pub/NetBSD/sec...013-ibcs2.patch</p>

<p>To patch, re-build and re-install re-install the kernel and reboot:</p>

<p># cd src/sys/compat/ibcs2<br />
# patch < /path/to/SA2003-013-ibcs2.patch</p>

<p># make cleandir dependall<br />
# make install</p>

<p><br />
Thanks To<br />
=========</p>

<p>Some of the text are derived from FreeBSD security advisory<br />
FreeBSD-SA-03:10.ibcs2.</p>

<p>The problem in ibcs2_stat.c was pointed out by silvio@qualys.com.</p>

<p><br />
Revision History<br />
================</p>

<p>2003-09-17 Initial release</p>

<p><br />
More Information<br />
================</p>

<p>Advisories may be updated as new information becomes available.<br />
The most recent version of this advisory (PGP signed) can be found at <br />
ftp://ftp.NetBSD.org/pub/NetBSD/sec...003-013.txt.asc</p>

<p>Information about NetBSD and NetBSD security can be found at<br />
http://www.NetBSD.org/ and http://www.NetBSD.org/Security/.</p>

<p><br />
Copyright 2003, The NetBSD Foundation, Inc. All Rights Reserved.<br />
Redistribution permitted only in full, unmodified form.</p>

<p>$NetBSD: NetBSD-SA2003-013.txt,v 1.4 2003/09/17 02:47:19 david Exp $</p>

<p>-----BEGIN PGP SIGNATURE-----<br />
Version: GnuPG v1.0.6 (NetBSD)<br />
Comment: For info see http://www.gnupg.org</p>

<p>iQCVAwUBP2fWJj5Ru2/4N2IFAQE9wAP/TGHBn/CeZwH3XnVRmc3ef46Za7mKv4Q2<br />
xut0DVEwoVBNadCdBjsBmjivRC48U7fTDu5G/tv2c9innL34Uwt0hwh0skybyKQg<br />
BtrPUJv8ytf9VhkiuHZBc+Vl/VCLS1RhbGelyHje3JcXJRkgB3i3B6WsomzS8YSQ<br />
bJrlaSxPHc4=<br />
=XK3L<br />
-----END PGP SIGNATURE-----</p>

<p>=============</p>

<p>-----BEGIN PGP SIGNED MESSAGE-----</p>

<p><br />
NetBSD Security Advisory 2003-014<br />
=================================</p>

<p>Topic: Insufficient argument checking in sysctl(2)</p>

<p>Version: NetBSD-current: source prior to August 25, 2003<br />
NetBSD 1.6.1: affected<br />
NetBSD 1.6: affected<br />
NetBSD-1.5.3: affected<br />
NetBSD-1.5.2: affected<br />
NetBSD-1.5.1: affected<br />
NetBSD-1.5: affected</p>

<p>Severity: local DOS, read protected kernel memory</p>

<p>Fixed: NetBSD-current: August 25, 2003<br />
NetBSD-1.6 branch: August 28, 2003 (1.6.2 will include the fix)<br />
NetBSD-1.5 branch: August 28, 2003</p>

<p><br />
Abstract<br />
========</p>

<p>Three unrelated problems with inappropriate argument handling were<br />
found in the kernel sysctl(2) code, which could be exploited by<br />
malicious local user:</p>

<p>Some sysctl nodes could cause the kernel to dereference a NULL<br />
pointer, resulting in a panic.</p>

<p>Passing the process id of a zombie process could cause the kernel to<br />
dereference invalid process data, and panic.</p>

<p>Other sysctl nodes had an insufficient range check, which could be<br />
abused to read arbitrary locations in kernel memory space.</p>

<p><br />
Technical Details<br />
=================</p>

<p>There are three unrelated problems, found during an effort to rewrite<br />
the present sysctl(2) infrastructure.</p>

<p>1) A pointer variable was used both for pointing user-level address<br />
(sysctl(2) argument) and kernel address, and there was a chance for<br />
a local user to set NULL pointer to the variable.</p>

<p>2) The proc.* sysctl tree could be invoked on a zombie process, but<br />
made assumptions that the processes were in a valid state, and so<br />
could attempt to reference process information that is invalid or<br />
non-existent for zombies. This is no longer possible.</p>

<p>3) Under the proc.curproc.rlimit subtree are a number of nodes<br />
representing the process resource limits, soft and hard. The sysctl<br />
helper used to manipulate these values had an insufficient range<br />
check, and could be used to read values outside of the working copy<br />
of the rlimit structure. Writes were checked more thoroughly, and<br />
could not abuse this problem.</p>

<p><br />
Solutions and Workarounds<br />
=========================</p>

<p>To correct this problem, upgrade of the kernel (and reboot) is<br />
required. There is no practical work-around for systems running the<br />
vulnerable code in the kernel.</p>

<p>The fixes for all of these issues are contained in the one file,<br />
sys/kern/kern_sysctl.c. The following table lists the fixed revisions<br />
and dates of this file for each branch:</p>

<p>CVS branch revision date<br />
------------- ----------- ----------------<br />
HEAD 1.143 2003/08/24<br />
netbsd-1-6 1.108.4.3 2003/08/27<br />
netbsd-1-5 1.73.2.7 2003/08/27</p>

<p>The following instructions describe how to upgrade your kernel<br />
binaries by updating your source tree and rebuilding and installing a<br />
new version of the kernel. In these instructions, replace: </p>

<p>BRANCH with the appropriate CVS branch (from the above table)<br />
ARCH with your architecture (from uname -m), and<br />
KERNCONF with the name of your kernel configuration file.</p>

<p>To update from CVS, re-build, and re-install the kernel:</p>

<p># cd src<br />
# cvs update -d -P -r BRANCH sys/kern/kern_sysctl.c<br />
# cd sys/ARCH/conf<br />
# config KERNCONF<br />
# cd ../compile/KERNCONF<br />
# make depend;make<br />
# mv /netbsd /netbsd.old<br />
# cp netbsd /<br />
# reboot</p>

<p><br />
Thanks To<br />
=========</p>

<p>Andrew Brown</p>

<p><br />
Revision History<br />
================</p>

<p>2003-09-17 Initial release</p>

<p><br />
More Information<br />
================</p>

<p>Advisories may be updated as new information becomes available.<br />
The most recent version of this advisory (PGP signed) can be found at <br />
ftp://ftp.NetBSD.org/pub/NetBSD/sec...003-014.txt.asc</p>

<p>Information about NetBSD and NetBSD security can be found at<br />
http://www.NetBSD.org/ and http://www.NetBSD.org/Security/.</p>

<p><br />
Copyright 2003, The NetBSD Foundation, Inc. All Rights Reserved.<br />
Redistribution permitted only in full, unmodified form.</p>

<p>$NetBSD: NetBSD-SA2003-014.txt,v 1.12 2003/09/17 02:49:00 david Exp $</p>

<p>-----BEGIN PGP SIGNATURE-----<br />
Version: GnuPG v1.0.6 (NetBSD)<br />
Comment: For info see http://www.gnupg.org</p>

<p>iQCVAwUBP2fWKz5Ru2/4N2IFAQGEnAQAw5QkAzSr6lTP3wH3e8pvrSVWb9jhMxCi<br />
+P96ZYsxkDJNqkU33xtCIIN72GKom2uFOeswNX1qK8QEhfplX0<br />
3/peOjqRZ4L4Kk<br />
f0ECf0xIIr54Kn1JYp/PeUsOPyAAT+I6CCRplB7ZtvPjQ7l7YtYid5smO6szAQjG<br />
I92V/aNY/fs=<br />
=Ch3/<br />
-----END PGP SIGNATURE-----<br />
</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000317.html">11:29 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=317" onclick="OpenComments(this.href); return false">迴響 (7114)</a>
	
	
</div>

</div>



<h2 class="date">September 14, 2003</h2>


<div class="blogbody">
<a name="000185"></a>
<h3 class="title">感謝chihchun處理blog問題:)</h3>

<p>中秋節休假前發現在blog.debian.org.tw取消之後blog.linux.org.tw上某些user的blog有問題，感謝chihchun大大犧牲休假時間處理並修復m(_._)m</p>



<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000185.html">09:40 PM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=185" onclick="OpenComments(this.href); return false">迴響 (1347)</a>
	
	
</div>

</div>



<h2 class="date">September 11, 2003</h2>


<div class="blogbody">
<a name="000085"></a>
<h3 class="title">新竹交大debian安裝大會</h3>

<p>新竹交大debian安裝大會</p>

<p>時間:9月21日下午14:00-17:00 <br />
地點:交大資工系計中 工程三館三樓 <br />
講師:damon , BBNS(交大debian user) <br />
費用:免費 <br />
新竹地區的學員有興趣的可以來聽聽看，會場大約可容納40人 <br />
不需報名，要安裝的話請自行攜帶pc or nb，會場提供鍵盤、螢幕、滑鼠 <br />
講義主要以 <br />
http://wiki.debian.org.tw/index.php?page=VMwareInstall_Blue119 <br />
這邊的內容為主 <br />
有要參加的學員可以先印下來 <br />
http://wiki.debian.org.tw/DebianInstallationNotes <br />
您可以在這邊找到安裝磁片檔或是安裝iso檔燒成光碟，並在當天帶去，當天主辦單位無法提供這些 <br />
當天的內容大致上為 <br />
01.Debain介紹(stable , testing , unstable , main , contrib , non-free) <br />
02.硬體測試 <br />
03.安裝教學 <br />
04.實機操作 <br />
05.X window <br />
06.KDE </p>

<p>前四項由我主講，後面5,6由BBNS主講 <br />
歡迎新竹有空的朋友來聽聽看瞭解一下debian<br />
</p>


<div class="posted">
	由  發表於 <a href="http://blog.linux.org.tw/~damon/archives/000085.html">10:16 AM</a>
		| <a href="http://mt.debian.org.tw/mt-yijian.cgi?entry_id=85" onclick="OpenComments(this.href); return false">迴響 (1970)</a>
	
	
</div>

</div>


</div>
</div>

</body>
</html>
