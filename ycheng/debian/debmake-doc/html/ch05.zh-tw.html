<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>章 5. 基本內容</title>
    <link rel="stylesheet" type="text/css" href="debian.css"/>
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="home" href="index.zh-tw.html" title="Debian 維護者指南"/>
    <link rel="up" href="index.zh-tw.html" title="Debian 維護者指南"/>
    <link rel="prev" href="ch04.zh-tw.html" title="章 4. 簡單例子"/>
    <link rel="next" href="ch06.zh-tw.html" title="章 6. debmake 選項"/>
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">章 5. 基本內容</th>
        </tr>
        <tr>
          <td align="left"><a accesskey="p" href="ch04.zh-tw.html"><img src="images/prev.png" alt="前一頁"/></a> </td>
          <th width="60%" align="center"> </th>
          <td align="right"> <a accesskey="n" href="ch06.zh-tw.html"><img src="images/next.png" alt="下一頁"/></a></td>
        </tr>
      </table>
      <hr/>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="basics"/>章 5. 基本內容</h1>
          </div>
        </div>
      </div>
      <div class="toc">
        <p>
          <strong>內容目錄</strong>
        </p>
        <dl class="toc">
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#workflow">5.1. 打包工作流</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#debhelper">5.1.1. <span class="strong"><strong>debhelper</strong></span> 套件</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#name-version">5.2. 套件名稱和版本</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#native">5.3. 原生 Debian 套件</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#rules">5.4. debian/rules</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#dh">5.4.1. dh</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#simplerules">5.4.2. 簡單的 debian/rules</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#customrules">5.4.3. 設定 debian/rules</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#variablesrules">5.4.4. debian/rules 中的變數</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#reproducible">5.4.5. 可重現的構建</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#control">5.5. debian/control</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#split">5.5.1. Debian 二進位制套件的拆分</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="ch05.zh-tw.html#boption">5.5.1.1. debmake -b</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="ch05.zh-tw.html#package-split-example">5.5.1.2. 拆包的場景和例子</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="ch05.zh-tw.html#libnames">5.5.1.3. 程式庫套件名稱</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#substvar">5.5.2. Substvar</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#binnmu">5.5.3. binNMU 安全</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#changelog">5.6. debian/changelog</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#copyright">5.7. debian/copyright</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#patches">5.8. debian/patches/*</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#dpkg-source-x">5.8.1. dpkg-source -x</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#quilt-dpkg">5.8.2. dquilt 和 dpkg-source</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#signing-key">5.9. debian/upstream/signing-key.asc</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#dfsg">5.10. debian/watch 和 DFSG</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#debianconf">5.11. 其它 debian/* 檔案</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#custom">5.12. Debian 打包的定製化</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#vcs">5.13. 在版本控制系統中進行記錄（標準）</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#alt-vcs">5.14. 在版本控制系統中進行記錄（備選方案）</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#build-noextra">5.15. 構建套件時排除不必要的內容</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#rules-clean">5.15.1. 使用 debian/rules clean 進行修復</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#git-clean">5.15.2. 使用版本控制系統修復</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#extend-diff-ignore">5.15.3. 使用 extend-diff-ignore 修復</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#tar-ignore">5.15.4. 使用 tar-ignore 修復</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#build">5.16. 上游構建系統</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#autotools">5.16.1. Autotools</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#cmake">5.16.2. CMake</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#distutils">5.16.3. Python distutils</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#dbg">5.17. 除錯資訊</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#dbgsym">5.17.1. 新的 -dbgsym 套件（Stretch 9.0 或更新）</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#lib">5.18. 程式庫套件</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#symbols">5.18.1. 程式庫符號</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#lib-trans">5.18.2. 程式庫變遷</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#debconf">5.19. debconf</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#multiarch">5.20. 多體系架構</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#_the_multiarch_library_path">5.20.1. 多架構程式庫路徑</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#_the_multiarch_header_file_path">5.20.2. 多架構標頭檔案路徑</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="ch05.zh-tw.html#_the_multiarch_emphasis_role_strong_pc_emphasis_file_path">5.20.3. 多架構支援下的 <span class="strong"><strong>*.pc</strong></span> 檔案路徑</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#harden">5.21. 編譯強化</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#ci">5.22. 持續整合</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#bootstrap">5.23. 自建構</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="ch05.zh-tw.html#bug">5.24. 錯誤報告</a>
            </span>
          </dt>
        </dl>
      </div>
      <p>這裡展示了 Debian 打包工作中針對非原生套件使用“<span class="strong"><strong>3.0 (quilt)</strong></span>”格式進行打包所遵循基本規則的一個全域性性概覽。</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top">
              <img alt="[注意]" src="images/note.png"/>
            </td>
            <th align="left">注意</th>
          </tr>
          <tr>
            <td align="left" valign="top">
              <p>為簡明起見，某些細節被有意跳過。請按需查閱對應命令的手冊頁，例如<span class="strong"><strong>dpkg-source</strong></span>(1)、<span class="strong"><strong>dpkg-buildpackage</strong></span>(1)、<span class="strong"><strong>dpkg</strong></span>(1)、<span class="strong"><strong>dpkg-deb</strong></span>(1)、<span class="strong"><strong>deb</strong></span>(5)，等等。</p>
            </td>
          </tr>
        </table>
      </div>
      <p>Debian 原始碼包是一組用於構建 Debian 二進位制套件的輸入檔案，而非單個檔案。</p>
      <p>Debian 二進位制套件是一個特殊的檔案檔案，其中包含了一系列可安裝的二進位制資料及與它們相關的資訊。</p>
      <p>單個 Debian 原始碼包可能根據 <span class="strong"><strong>debian/control</strong></span> 檔案定義的內容產生多個 Debian 二進位制套件。</p>
      <p>使用 “<span class="strong"><strong>3.0 (quilt)</strong></span>”格式的非原生 Debian 套件是最普通的 Debian 原始碼包格式。</p>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top">
              <img alt="[注意]" src="images/note.png"/>
            </td>
            <th align="left">注意</th>
          </tr>
          <tr>
            <td align="left" valign="top">
              <p>有許多封裝指令碼可用。合理使用它們可以幫助您理順工作流程，但是請確保您能理解它們內部的基本工作原理。</p>
            </td>
          </tr>
        </table>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="workflow"/>5.1. 打包工作流</h2>
            </div>
          </div>
        </div>
        <p>建立 Debian 二進位制套件的 Debian 打包工作流涉及建立數個特定名稱的檔案（參見 <a class="xref" href="ch05.zh-tw.html#name-version" title="5.2. 套件名稱和版本">節 5.2, “套件名稱和版本”</a>），與《Debian 政策手冊》的定義保持一致。</p>
        <p>一個極其簡化的 Debian 打包工作流可以概括為以下五步。</p>
        <div class="orderedlist">
          <ol class="orderedlist">
            <li class="listitem">下載上游原始碼壓縮包（tarball）並命名為 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>.tar.gz</strong></span> 檔案。</li>
            <li class="listitem">使上游提供的原始碼壓縮包解壓縮後的所有檔案儲存在 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>/</strong></span> 目錄中。</li>
            <li class="listitem">
              <p class="simpara">上游的原始碼壓縮包被複制（或符號連結）至一個特定的檔名 <span class="emphasis"><em>packagename_version</em></span><span class="strong"><strong>.orig.tar.gz</strong></span>。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">分隔 <span class="emphasis"><em>package</em></span> 和 <span class="emphasis"><em>version</em></span> 的符號從 <span class="strong"><strong>-</strong></span>（連字元）更改為 <span class="strong"><strong>_</strong></span>（下劃線）</li>
                  <li class="listitem">副檔名添加了 <span class="strong"><strong>.orig</strong></span> 部分。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">Debian 套件規範檔案將被新增至上游原始碼中，存放在 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>/debian/</strong></span> 目錄下。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
                    <p class="simpara"><span class="strong"><strong>debian/</strong></span>* 目錄下的必需技術說明檔案：</p>
                    <div class="variablelist">
                      <dl class="variablelist">
                        <dt>
                          <span class="term">
                            <span class="strong">
                              <strong>debian/rules</strong>
                            </span>
                          </span>
                        </dt>
                        <dd>構建 Debian 套件所需的可執行指令碼（參見 <a class="xref" href="ch05.zh-tw.html#rules" title="5.4. debian/rules">節 5.4, “debian/rules”</a>）</dd>
                        <dt>
                          <span class="term">
                            <span class="strong">
                              <strong>debian/control</strong>
                            </span>
                          </span>
                        </dt>
                        <dd>套件配置檔案包含了原始碼包名稱、原始碼構建依賴、二進位制套件名稱、二進位制套件依賴，等等。（參見 <a class="xref" href="ch05.zh-tw.html#control" title="5.5. debian/control">節 5.5, “debian/control”</a>）</dd>
                        <dt>
                          <span class="term">
                            <span class="strong">
                              <strong>debian/changelog</strong>
                            </span>
                          </span>
                        </dt>
                        <dd>Debian 套件歷史檔案，其中第一行定義了上游套件版本號和 Debian 修訂版本號（參見 <a class="xref" href="ch05.zh-tw.html#changelog" title="5.6. debian/changelog">節 5.6, “debian/changelog”</a>）</dd>
                        <dt>
                          <span class="term">
                            <span class="strong">
                              <strong>debian/copyright</strong>
                            </span>
                          </span>
                        </dt>
                        <dd>版權和許可證摘要資訊（參看 <a class="xref" href="ch05.zh-tw.html#copyright" title="5.7. debian/copyright">節 5.7, “debian/copyright”</a>）</dd>
                      </dl>
                    </div>
                  </li>
                  <li class="listitem">在 <span class="strong"><strong>debian/</strong></span>* 下的可選配置檔案（參見 <a class="xref" href="ch05.zh-tw.html#debianconf" title="5.11. 其它 debian/* 檔案">節 5.11, “其它 debian/* 檔案”</a>）：</li>
                  <li class="listitem">
                    <p class="simpara">在 <span class="emphasis"><em>package-version/</em></span> 目錄中呼叫 <span class="strong"><strong>debmake</strong></span> 命令將會提供這些配置檔案的一套模板。</p>
                    <div class="itemizedlist">
                      <ul class="itemizedlist">
                        <li class="listitem">必備的配置檔案總會生成，無論是否提供 <span class="strong"><strong>-x0</strong></span> 選項。</li>
                        <li class="listitem"><span class="strong"><strong>debmake</strong></span> 命令永遠不會覆寫任何已經存在的配置檔案。</li>
                      </ul>
                    </div>
                  </li>
                  <li class="listitem">這些檔案必須手工編輯以達到理想狀態。請使用《Debian 政策手冊》和《Debian 開發者參考》作為編輯依據。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>dpkg-buildpackage</strong></span> 命令（通常由它的封裝命令 <span class="strong"><strong>debuild</strong></span> 或 <span class="strong"><strong>pdebuild</strong></span> 所使用）會在 <span class="emphasis"><em>package-version/</em></span> 目錄中被呼叫，進而以呼叫 <span class="strong"><strong>debian/rules</strong></span> 指令碼的方式製作 Debian 原始碼包和二進位制套件。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">當前工作目錄會被設為：<span class="strong"><strong>$(CURDIR)=</strong></span><span class="emphasis"><em>/path/to/package-version/</em></span></li>
                  <li class="listitem">
                    <p class="simpara">使用 <span class="strong"><strong>dpkg-source</strong></span>(1) 以“<span class="strong"><strong>3.0 (quilt)</strong></span>”格式建立 Debian 原始碼包</p>
                    <div class="itemizedlist">
                      <ul class="itemizedlist">
                        <li class="listitem"><span class="emphasis"><em>package_version</em></span>.<span class="strong"><strong>orig.tar.gz</strong></span>（<span class="emphasis"><em>package-version</em></span>.<span class="strong"><strong>tar.gz</strong></span> 的副本或符號連結）</li>
                        <li class="listitem"><span class="emphasis"><em>package_version-revision</em></span>.<span class="strong"><strong>debian.tar.xz</strong></span>（<span class="emphasis"><em>package-version</em></span>/<span class="strong"><strong>debian/</strong></span>* 的 tar 壓縮包，即 tarball）</li>
                        <li class="listitem"><span class="emphasis"><em>package_version-revision</em></span>.<span class="strong"><strong>dsc</strong></span></li>
                      </ul>
                    </div>
                  </li>
                  <li class="listitem">
                    <p class="simpara">使用“<span class="strong"><strong>debian/rules build</strong></span>”構建原始碼並安裝到 <span class="strong"><strong>$(DESTDIR)</strong></span> 中</p>
                    <div class="itemizedlist">
                      <ul class="itemizedlist">
                        <li class="listitem"><span class="strong"><strong>DESTDIR=debian</strong></span>/<span class="emphasis"><em>binarypackage/</em></span>（單二進位制包）</li>
                        <li class="listitem"><span class="strong"><strong>DESTDIR=debian/tmp/</strong></span>（多個二進位制包）</li>
                      </ul>
                    </div>
                  </li>
                  <li class="listitem">
                    <p class="simpara">使用 <span class="strong"><strong>dpkg-deb</strong></span>(1)、<span class="strong"><strong>dpkg-genbuildinfo</strong></span>(1) 和 <span class="strong"><strong>dpkg-genchanges</strong></span>(1) 建立 Debian 二進位制套件。</p>
                    <div class="itemizedlist">
                      <ul class="itemizedlist">
                        <li class="listitem"><span class="emphasis"><em>binarypackage_version-revision_arch</em></span>.<span class="strong"><strong>deb</strong></span></li>
                        <li class="listitem">……（可能有多個 Debian 二進位制包檔案。）</li>
                        <li class="listitem"><span class="emphasis"><em>package_version-revision_arch</em></span>.<span class="strong"><strong>changes</strong></span></li>
                      </ul>
                    </div>
                  </li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">使用 <span class="strong"><strong>lintian</strong></span> 命令檢查 Debian 套件的質量。（推薦）</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
                    <p class="simpara">遵守 <a class="ulink" href="https://ftp-master.debian.org/">ftp-master</a> 的拒絕（rejection）指導方針。</p>
                    <div class="itemizedlist">
                      <ul class="itemizedlist">
                        <li class="listitem">
<a class="ulink" href="https://ftp-master.debian.org/REJECT-FAQ.html">套件被拒絕常見問題解答（REJECT-FAQ）</a>
</li>
                        <li class="listitem">
<a class="ulink" href="https://ftp-master.debian.org/NEW-checklist.html">新套件（NEW）檢查清單</a>
</li>
                        <li class="listitem"><a class="ulink" href="https://ftp-master.debian.org/#lintianrejects">Lintian 自動拒絕（autoreject）</a>（<a class="ulink" href="https://ftp-master.debian.org/static/lintian.tags">lintian 標籤列表</a>）</li>
                      </ul>
                    </div>
                  </li>
                </ul>
              </div>
            </li>
            <li class="listitem">使用 <span class="strong"><strong>debsign</strong></span> 命令，用您的 GPG 私鑰為 <span class="emphasis"><em>package_version-revision</em></span>.<span class="strong"><strong>dsc</strong></span> 和 <span class="emphasis"><em>package_version-revision_arch</em></span>.<span class="strong"><strong>changes</strong></span> 檔案進行簽名。</li>
            <li class="listitem">使用 <span class="strong"><strong>dput</strong></span> 命令向 Debian 倉庫上傳一套 Debian 原始碼包和二進位制套件檔案。</li>
          </ol>
        </div>
        <p>這裡，請將檔名中對應的部分使用下面的方式進行替換：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">將 <span class="emphasis"><em>package</em></span> 部分替換為 Debian 原始碼包名稱</li>
            <li class="listitem">將 <span class="emphasis"><em>binarypackage</em></span> 部分替換為 Debian 二進位制套件名稱</li>
            <li class="listitem">將 <span class="emphasis"><em>version</em></span> 部分替換為上游版本號</li>
            <li class="listitem">將 <span class="emphasis"><em>revision</em></span> 部分替換為 Debian 修訂號</li>
            <li class="listitem">將 <span class="emphasis"><em>arch</em></span> 部分替換為套件對應架構</li>
          </ul>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>有很多種通過實踐摸索而得到的補丁管理方法和版本控制系統的使用策略與技巧。您沒有必要將它們全部用上。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>在“Debian 開發者參考”一文的 <a class="ulink" href="https://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html">第 6 章 最佳打包實踐</a> 部分有十分詳盡的相關文件。請讀一讀這些內容。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="debhelper"/>5.1.1. <span class="strong"><strong>debhelper</strong></span> 套件</h3>
              </div>
            </div>
          </div>
          <p>儘管 Debian 套件可以僅由編寫 <span class="strong"><strong>debian/rules</strong></span> 指令碼而不使用 <span class="strong"><strong>debhelper</strong></span> 套件來生成，其實這樣做是不切實際的。現代的 Debian“政策”對許多功能特性的實現做了要求，如應用適當的檔案許可權、使用合適的與硬體架構相關的軟體庫安裝路徑、安裝觸動指令碼的插入、除錯符號套件的生成、套件依賴資訊的生成、套件資訊檔案的生成、對時間戳調節以符合可重現構建的要求，等等。</p>
          <p><span class="strong"><strong>Debhelper</strong></span> 套件提供了一套實用指令碼，用來簡化 Debian 打包工作流並減輕套件維護者的負擔。若能適當運用，它們可以幫助打包者自動地處理並實現 Debian”政策“所要求的功能。</p>
          <p>現代化的 Debian 打包工作流可以組織成一個簡單的模組化工作流，如下所示：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">使用 <span class="strong"><strong>dh</strong></span> 命令以自動呼叫來自 <span class="strong"><strong>debhelper</strong></span> 套件的許多實用指令碼，以及</li>
              <li class="listitem">使用 <span class="strong"><strong>debian/</strong></span> 目錄下的宣告式配置檔案配置它們的行為。</li>
            </ul>
          </div>
          <p>您幾乎總是應當將 <span class="strong"><strong>debhelper</strong></span> 列為您的軟體包的構建依賴之一。本文件在接下來的內容中也假設您正在使用一個版本足夠新的 <span class="strong"><strong>debhelper</strong></span> 協助進行打包工作。</p>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="name-version"/>5.2. 套件名稱和版本</h2>
            </div>
          </div>
        </div>
        <p>如果所取得上游原始碼的形式為 <span class="strong"><strong>hello-0.9.12.tar.gz</strong></span>，您可以將 <span class="strong"><strong>hello</strong></span> 作為上游原始碼名稱，並將 <span class="strong"><strong>0.9.12</strong></span> 作為上游版本號。</p>
        <p><span class="strong"><strong>debmake</strong></span> 的目的是為套件維護者提供開始工作的模板檔案。註釋行以 <span class="strong"><strong>#</strong></span> 開始，其中包含一些教材文字。您在將套件上傳至 Debian 倉庫之前必須刪除或者修改這樣的註釋行。</p>
        <p>許可證資訊的提取和賦值過程應用了大量啟發式操作，因此在某些情況下可能不會正常工作。強烈建議您搭配使用其它工具，例如來自 <span class="strong"><strong>devscripts</strong></span> 套件的 <span class="strong"><strong>licensecheck</strong></span> 工具，以配合 <span class="strong"><strong>debmake</strong></span> 的使用。</p>
        <p>組成 Debian 套件名稱的字元選取存在一定的限制。最明顯的限制應當是套件名稱中禁止出現大寫字母。這裡給出正則表示式形式的規則總結：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">上游套件名稱（<span class="strong"><strong>-p</strong></span>）：[-+.a-z0-9]{2,}</li>
            <li class="listitem">二進位制套件名稱（<span class="strong"><strong>-b</strong></span>）：[-+.a-z0-9]{2,}</li>
            <li class="listitem">上游版本號（<span class="strong"><strong>-u</strong></span>）：[0-9][-+.:~a-z0-9A-Z]*</li>
            <li class="listitem">Debian 修訂版本（<span class="strong"><strong>-r</strong></span>）： [0-9][+.~a-z0-9A-Z]*</li>
          </ul>
        </div>
        <p>請在《Debian 政策手冊》的 <a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-controlfields">第 5 章 - Control 檔案及其欄位</a> 一節中檢視其精確定義。</p>
        <p><span class="strong"><strong>debmake</strong></span> 所假設的打包情景是相對簡單的。因此，所有與直譯器相關的程式都會預設為“<span class="strong"><strong>Architecture: all</strong></span>”的情況。當然，這個假設並非總是成立。</p>
        <p>您必須為 Debian 打包工作適當地調整套件名稱和上游版本號。</p>
        <p>為了能有效地使用一些流行的工具（如 <span class="strong"><strong>aptitude</strong></span>）管理套件名稱和版本資訊，最好能將套件名稱保持在 30 字元以下；版本號和修訂號加起來最好能不超過 14 個字元。<a href="#ftn.idm1599" class="footnote" id="idm1599"><sup class="footnote">[10]</sup></a></p>
        <p>為了避免命名衝突，對使用者可見的二進位制套件名稱不應選擇任何常用的單詞。</p>
        <p>如果上游沒有使用像 <span class="strong"><strong>2.30.32</strong></span> 這樣正常的版本編號方案，而是使用了諸如 <span class="strong"><strong>11Apr29</strong></span> 這樣包含日期、某些代號或者一個版本控制系統雜湊值等字串作為版本號的一部分的話，請在上游版本號中將這些部分移除。這些資訊可以稍後在 <span class="strong"><strong>debian/changelog</strong></span> 檔案中進行記錄。如果您需要為軟體設計一個版本字符串，可以使用 <span class="strong"><strong>YYYYMMDD</strong></span> 格式，如 <span class="strong"><strong>20110429</strong></span> 的字串作為上游版本號。這樣能保證 <span class="strong"><strong>dpkg</strong></span> 命令在升級時能正確地確定版本的先後關係。如果您想要確保萬一上游在未來重新採納正常版本編號方案，例如 <span class="strong"><strong>0.1</strong></span> 時能夠做到順暢地遷移，可以另行使用 <span class="strong"><strong>0~YYMMDD</strong></span> 的格式，如 <span class="strong"><strong>0~110429</strong></span> 作為上游版本號。</p>
        <p>版本字串可以按如下的方式使用 <span class="strong"><strong>dpkg</strong></span> 命令進行比較。</p>
        <pre class="screen">$ dpkg --compare-versions ver1 op ver2</pre>
        <p>版本比較的規則可以歸納如下：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">字串按照起始到末尾的順序進行比較。</li>
            <li class="listitem">字元比數字大。</li>
            <li class="listitem">數字按照整數順序進行比較。</li>
            <li class="listitem">字元按照 ASCII 編碼的順序進行比較。</li>
          </ul>
        </div>
        <p>對於某些字元，如句點（<span class="strong"><strong>.</strong></span>）、加號（<span class="strong"><strong>+</strong></span>）和波浪號（<span class="strong"><strong>~</strong></span>），有如下的特殊規則。</p>
        <pre class="screen">0.0 &lt; 0.5 &lt; 0.10 &lt; 0.99 &lt; 1 &lt; 1.0~rc1 &lt; 1.0 &lt; 1.0+b1 &lt; 1.0+nmu1 &lt; 1.1 &lt; 2.0</pre>
        <p>有一個稍需注意的情況，即當上遊將 <span class="strong"><strong>hello-0.9.12-ReleaseCandidate-99.tar.gz</strong></span> 這樣的版本當作預釋出版本，而將 <span class="strong"><strong>hello-0.9.12.tar.gz</strong></span> 作為正式版本時。為了確保 Debian 套件升級能夠順暢進行，您應當修改版本號命名，如將上游原始碼壓縮包重新命名為 <span class="strong"><strong>hello-0.9.12~rc99.tar.gz</strong></span>。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="native"/>5.3. 原生 Debian 套件</h2>
            </div>
          </div>
        </div>
        <p>使用“<span class="strong"><strong>3.0 (quilt)</strong></span>”格式的非原生 Debian 套件是最常見最標準的 Debian 原始碼包格式。根據 <span class="strong"><strong>dpkg-source</strong></span>(1) 的描述，此時的 <span class="strong"><strong>debian/source/format</strong></span> 檔案應當包含“<span class="strong"><strong>3.0 (quilt)</strong></span> 的文字內容。上述的工作流和接下來給出的打包範例都使用了這種格式。</p>
        <p>而原生 Debian 套件是較罕見的一種 Debian 套件格式。它通常只用於打包僅對 Debian 專案有價值、有意義的軟體。因此，該格式的使用通常不被提倡。</p>
        <div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Caution">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[注意]" src="images/caution.png"/>
              </td>
              <th align="left">注意</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>在上游 tarball 原始碼壓縮包無法使用其正確名稱 <span class="emphasis"><em>package_version</em></span>.<span class="strong"><strong>orig.tar.gz</strong></span> 被 <span class="strong"><strong>dpkg-buildpackage</strong></span> 取得到的時候，會出現意外地構建了原生 Debian 套件的情況。這是新手常見的一個錯誤，通常是因構建中錯誤地在符號連結名稱中使用了“<span class="strong"><strong>-</strong></span>”字元而非正確的“<span class="strong"><strong>_</strong></span>”字元。[譯註：此處仍然假設打包的場景是已經取得或形成了名為 <span class="strong"><strong>package-version</strong></span>.<span class="strong"><strong>tar.gz</strong></span> 的上游原始碼 tarball。Debian 的打包工作很大程度上是以上游原始碼 tarball 作為基礎的，這一點須時刻牢記在心。]</p>
              </td>
            </tr>
          </table>
        </div>
        <p>原生 Debian 套件不對 <span class="strong"><strong>上游程式碼</strong></span> 和 <span class="strong"><strong>Debian 的修改</strong></span> 進行區分，僅包含以下內容：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem"><span class="emphasis"><em>package_version</em></span>.<span class="strong"><strong>tar.gz</strong></span>（<span class="emphasis"><em>package-version</em></span>.<span class="strong"><strong>tar.gz</strong></span> 檔案的副本或符號連結，包含 <span class="strong"><strong>debian/</strong></span>* 的各個檔案。）</li>
            <li class="listitem"><span class="emphasis"><em>package_version</em></span>.<span class="strong"><strong>dsc</strong></span></li>
          </ul>
        </div>
        <p>如果您需要手動建立原生 Debian 套件，可以使用 <span class="strong"><strong>dpkg-source</strong></span>(1) 工具以“<span class="strong"><strong>3.0 (native)</strong></span>”格式進行建立。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>某些人希望推行對那些即使是僅針對 Debian 編寫的那些軟體也使用非原生套件格式的做法。這種做法所需要的不包含 <span class="strong"><strong>debian/</strong></span>* 檔案的 tarball 壓縮包事先需要手動生成以符合在 <a class="xref" href="ch05.zh-tw.html#workflow" title="5.1. 打包工作流">節 5.1, “打包工作流”</a> 中的標準工作流。他們認為使用非原生套件格式可以方便與下游發行版之間的溝通與交流。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>如果使用原生套件格式，沒有必要事先建立 tarball 壓縮包。要建立一個原生 Debian 套件，應當將 <span class="strong"><strong>debian/source/format</strong></span> 檔案的內容設定為“<span class="strong"><strong>3.0 (native)</strong></span>”，適當編寫 <span class="strong"><strong>debian/changelog</strong></span> 文件使得版本號中不包含 Debian 修訂號（例如，<span class="strong"><strong>1.0</strong></span> 而非 <span class="strong"><strong>1.0-1</strong></span>），最後在原始碼樹中調用“<span class="strong"><strong>dpkg-source -b .</strong></span>”命令。這樣做便可以自動生成包含原始碼的 tarball。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="rules"/>5.4. debian/rules</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debian/rules</strong></span> 指令碼是用於實際構建 Debian 套件的可執行指令碼。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>debian/rules</strong></span> 指令碼重新封裝了上游的構建系統（參見 <a class="xref" href="ch05.zh-tw.html#build" title="5.16. 上游構建系統">節 5.16, “上游構建系統”</a>）以達到將檔案安裝至 <span class="strong"><strong>$(DESTDIR)</strong></span>並將生成的檔案存入各個 <span class="strong"><strong>deb</strong></span> 格式檔案中的目的。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">這裡的 <span class="strong"><strong>deb</strong></span> 檔案用於二進位制的檔案分發，並將被 <span class="strong"><strong>dpkg</strong></span> 命令所使用以將軟體安裝至系統中。</li>
                </ul>
              </div>
            </li>
            <li class="listitem"><span class="strong"><strong>dh</strong></span> 命令通常在 <span class="strong"><strong>debian/rules</strong></span> 指令碼中使用，用作構建系統的一個前端。</li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>$(DESTDIR)</strong></span> 路徑具體值依賴於構建的型別。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem"><span class="strong"><strong>$(DESTDIR)=debian/</strong></span><span class="emphasis"><em>binarypackage</em></span>（單個二進位制套件）</li>
                  <li class="listitem"><span class="strong"><strong>$(DESTDIR)=debian/tmp</strong></span>（多個二進位制軟體包）</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="dh"/>5.4.1. dh</h3>
              </div>
            </div>
          </div>
          <p>由 <span class="strong"><strong>debhelper</strong></span> 套件提供的 <span class="strong"><strong>dh</strong></span> 命令與一些相關的套件共同工作，作為典型的上游構建系統的一層封裝，同時它支援所有 Debian 政策（Debian Policy）規定必須在 <span class="strong"><strong>debian/rules</strong></span> 實現的目標（target），以此提供一個統一的查詢介面。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem"><span class="strong"><strong>dh clean</strong></span>：清理原始碼樹中的檔案。</li>
              <li class="listitem"><span class="strong"><strong>dh build</strong></span>：在原始碼樹中進行構建</li>
              <li class="listitem"><span class="strong"><strong>dh build-arch</strong></span>：在原始碼樹中構建架構相關的套件</li>
              <li class="listitem"><span class="strong"><strong>dh build-indep</strong></span>：在原始碼中構建架構無關的套件</li>
              <li class="listitem"><span class="strong"><strong>dh install</strong></span>：將二進位制檔案安裝至 <span class="strong"><strong>$(DESTDIR)</strong></span></li>
              <li class="listitem"><span class="strong"><strong>dh install-arch</strong></span>：為架構相關的套件將二進位制檔案安裝至 <span class="strong"><strong>$(DESTDIR)</strong></span> 中</li>
              <li class="listitem"><span class="strong"><strong>dh install-indep</strong></span>：為架構無關的套件將二進位制檔案安裝進入 <span class="strong"><strong>$(DESTDIR)</strong></span> 中</li>
              <li class="listitem"><span class="strong"><strong>dh binary</strong></span>：產生 <span class="strong"><strong>deb</strong></span> 檔案</li>
              <li class="listitem"><span class="strong"><strong>dh binary-arch</strong></span>：為架構相關的套件產生 <span class="strong"><strong>deb</strong></span> 檔案</li>
              <li class="listitem"><span class="strong"><strong>dh binary-indep</strong></span>：為架構無關的套件產生 <span class="strong"><strong>deb</strong></span> 檔案</li>
            </ul>
          </div>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/note.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>對使用了 <span class="strong"><strong>debhelper</strong></span>“compat &gt;=9”的情況，<span class="strong"><strong>dh</strong></span> 命令將在編譯引數未事先設定的情況下根據 <span class="strong"><strong>dpkg-buildflags</strong></span> 命令返回的值設定並匯出各個編譯引數（如 <span class="strong"><strong>CFLAGS</strong></span>、<span class="strong"><strong>CXXFLAGS</strong></span>、<span class="strong"><strong>FFLAGS</strong></span>、<span class="strong"><strong>CPPFLAGS</strong></span> 和 <span class="strong"><strong>LDFLAGS</strong></span>）。（<span class="strong"><strong>dh</strong></span> 命令將呼叫在 <span class="strong"><strong>Debian::Debhelper::Dh_Lib</strong></span> 模組中定義的 <span class="strong"><strong>set_buildflags</strong></span>。）</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="simplerules"/>5.4.2. 簡單的 debian/rules</h3>
              </div>
            </div>
          </div>
          <p>受益於 <span class="strong"><strong>dh</strong></span> 命令對構建目標的抽象化 <a href="#ftn.idm1772" class="footnote" id="idm1772"><sup class="footnote">[11]</sup></a>，一個符合 Debian 政策而支援所有必需目標（target）的 <span class="strong"><strong>debian/rules</strong></span> 檔案可以簡單地寫成如下形式<a href="#ftn.idm1777" class="footnote" id="idm1777"><sup class="footnote">[12]</sup></a>：</p>
          <p><strong>簡單的 <span class="strong"><strong>debian/rules</strong></span>：. </strong>
</p>
          <pre class="screen">#!/usr/bin/make -f
#export DH_VERBOSE = 1

%:
        dh $@</pre>
          <p>
</p>
          <p>從本質上來看，這裡的 <span class="strong"><strong>dh</strong></span> 命令的作用是作為一個序列化工具，在合適的時候呼叫所有所需的 <span class="strong"><strong>dh_</strong></span>* 命令。</p>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/note.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p><span class="strong"><strong>debmake</strong></span> 命令會在 <span class="strong"><strong>debian/control</strong></span> 檔案中寫入“<span class="strong"><strong>Build-Depends: debhelper (&gt;=9)</strong></span>”，並在 <span class="strong"><strong>debian/compat</strong></span> 檔案中寫入“<span class="strong"><strong>9</strong></span>”。</p>
                </td>
              </tr>
            </table>
          </div>
          <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Tip">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[提示]" src="images/tip.png"/>
                </td>
                <th align="left">提示</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>設定“<span class="strong"><strong>export DH_VERBOSE = 1</strong></span>”會輸出構建系統中每一條會修改檔案內容的命令。它同時會在某些構建系統中啟用詳細輸出構建日誌的選項。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="customrules"/>5.4.3. 設定 debian/rules</h3>
              </div>
            </div>
          </div>
          <p>通過新增合適的 <span class="strong"><strong>override_dh_</strong></span>* 目標（target）並編寫對應的規則，可以實現對 <span class="strong"><strong>debian/rules</strong></span> 指令碼的靈活定製。</p>
          <p>如果需要在 <span class="strong"><strong>dh</strong></span> 命令呼叫某些特定的 <span class="strong"><strong>dh_</strong></span><span class="emphasis"><em>foo</em></span> 命令時採取某些特別的操作，則任何自動執行的操作均可以被 <span class="strong"><strong>debian/rules</strong></span> 中額外新增的 <span class="strong"><strong>override_dh_</strong></span><span class="emphasis"><em>foo</em></span> 這樣的 Makefile 目標所覆寫。</p>
          <p>構建的過程可以使用某些上游提供的介面進行定製化，如使用傳遞給標準的原始碼構建系統的引數。這些構建系統包括但不限於：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem"><span class="strong"><strong>configure</strong></span>，</li>
              <li class="listitem"><span class="strong"><strong>Makefile</strong></span>，</li>
              <li class="listitem"><span class="strong"><strong>setup.py</strong></span>，或</li>
              <li class="listitem"><span class="strong"><strong>Build.PL</strong></span>。</li>
            </ul>
          </div>
          <p>在這種情況下，您應該新增一個 <span class="strong"><strong>override_dh_auto_build</strong></span> 目標並在其中執行“<span class="strong"><strong>dh_auto_build --</strong></span> <span class="emphasis"><em>設定引數”</em></span> 的命令。這樣可以在 <span class="strong"><strong>dh_auto_build</strong></span> 預設傳遞的引數之後確保將使用者給出的 <span class="emphasis"><em>設定引數</em></span> 繼續傳遞給那些構建系統。</p>
          <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Tip">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[提示]" src="images/tip.png"/>
                </td>
                <th align="left">提示</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>如果上文提到的構建系統命令已知得到了 <span class="strong"><strong>dh_auto_build</strong></span> 命令的支援的話，請避免直接呼叫這些命令（而讓 <span class="strong"><strong>dh_auto_build</strong></span> 自動處理）。</p>
                </td>
              </tr>
            </table>
          </div>
          <p><span class="strong"><strong>debmake</strong></span> 命令所建立的初始模版檔案除了應用了上文提到的簡單 <span class="strong"><strong>debian/rules</strong></span> 檔案的優點外，同時為後續可能涉及的套件強化等情景添加了一些額外的定製選項。您需要先了解整個構建系統背後的工作原理（參見 <a class="xref" href="ch05.zh-tw.html#build" title="5.16. 上游構建系統">節 5.16, “上游構建系統”</a>），之後才能收放自如地定製套件來處理某些非常規的工作情況。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">請參考 <a class="xref" href="ch04.zh-tw.html#step-maintainer" title="4.6. 第三步：編輯模板檔案">節 4.6, “第三步：編輯模板檔案”</a> 一節以瞭解如何對 <span class="strong"><strong>debmake</strong></span> 命令生成的 <span class="strong"><strong>debian/rules</strong></span> 檔案模版進行定製。</li>
              <li class="listitem">請參見 <a class="xref" href="ch05.zh-tw.html#multiarch" title="5.20. 多體系架構">節 5.20, “多體系架構”</a> 以瞭解與 multiarch 相關的定製方法。</li>
              <li class="listitem">請參見 <a class="xref" href="ch05.zh-tw.html#harden" title="5.21. 編譯強化">節 5.21, “編譯強化”</a> 以瞭解與套件強化相關的定製方法。</li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="variablesrules"/>5.4.4. debian/rules 中的變數</h3>
              </div>
            </div>
          </div>
          <p>某些對設定 <span class="strong"><strong>debian/rules</strong></span> 有用的變數定義可以在 <span class="strong"><strong>/usr/share/dpkg/</strong></span> 目錄下的檔案中找到。比較重要的包括：</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term">
                  <span class="strong">
                    <strong>pkg-info.mk</strong>
                  </span>
                </span>
              </dt>
              <dd><span class="strong"><strong>DEB_SOURCE</strong></span>、<span class="strong"><strong>DEB_VERSION</strong></span>、<span class="strong"><strong>DEB_VERSION_EPOCH_UPSTREAM</strong></span>、<span class="strong"><strong>DEB_VERSION_UPSTREAM_REVISION</strong></span>、<span class="strong"><strong>DEB_VERSION_UPSTREAM</strong></span> 和 <span class="strong"><strong>DEB_DISTRIBUTION</strong></span> 變數。它們在向後移植（backport）支援等場景下能起到一定的作用。</dd>
              <dt>
                <span class="term">
                  <span class="strong">
                    <strong>vendor.mk</strong>
                  </span>
                </span>
              </dt>
              <dd><span class="strong"><strong>DEB_VENDOR</strong></span> 和 <span class="strong"><strong>DEB_PARENT_VENDOR</strong></span> 變數，以及 <span class="strong"><strong>dpkg_vendor_derives_from</strong></span> 巨集。它們在系統提供方的支援方面（Debian、Ubuntu 等）有其特定用處。</dd>
              <dt>
                <span class="term">
                  <span class="strong">
                    <strong>architecture.mk</strong>
                  </span>
                </span>
              </dt>
              <dd>設定 <span class="strong"><strong>DEB_HOST_</strong></span>* 和 <span class="strong"><strong>DEB_BUILD_</strong></span>* 變數。除此之外存在一種替代方案，即直接呼叫 <span class="strong"><strong>dpkg-architecture</strong></span> 來取得變數，一次呼叫查詢得到一個變數值。如顯性呼叫 <span class="strong"><strong>dpkg-architecture</strong></span> 以取得必需變數的話，便不再需要在 <span class="strong"><strong>debian/rules</strong></span> 中包含 <span class="strong"><strong>architecture.mk</strong></span> 了（後者會引入全部架構相關的變數）。</dd>
              <dt>
                <span class="term">
                  <span class="strong">
                    <strong>buildflags.mk</strong>
                  </span>
                </span>
              </dt>
              <dd>設定 <span class="strong"><strong>CFLAGS</strong></span>、<span class="strong"><strong>CPPFLAGS</strong></span>、<span class="strong"><strong>CXXFLAGS</strong></span>、<span class="strong"><strong>OBJCFLAGS</strong></span>、<span class="strong"><strong>OBJCXXFLAGS</strong></span>、<span class="strong"><strong>GCJFLAGS</strong></span>、<span class="strong"><strong>FFLAGS</strong></span>、<span class="strong"><strong>FCFLAGS</strong></span> 和 <span class="strong"><strong>LDFLAGS</strong></span> 這些構建標誌（build flags）。</dd>
            </dl>
          </div>
          <p>如果您希望在 <span class="strong"><strong>debian/rules</strong></span> 中使用其中的某些變數，您可以將相關的程式碼複製到 <span class="strong"><strong>debian/rules</strong></span> 檔案中，或是重寫一份簡單的替代實現。總而言之請保持 <span class="strong"><strong>debian/rules</strong></span> 檔案儘量簡單。</p>
          <p>例如，您按如下的方法在 <span class="strong"><strong>debian/rules</strong></span> 檔案中新增內容，從而為 <span class="strong"><strong>linux-any</strong></span> 目標架構添加額外的 <span class="strong"><strong>CONFIGURE_FLAGS</strong></span>：</p>
          <pre class="screen">DEB_HOST_ARCH_OS ?= $(shell dpkg-architecture -qDEB_HOST_ARCH_OS)
 ...
ifeq ($(DEB_HOST_ARCH_OS),linux)
CONFIGURE_FLAGS += --enable-wayland
endif</pre>
          <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Tip">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[提示]" src="images/tip.png"/>
                </td>
                <th align="left">提示</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>歷史上對於 <span class="strong"><strong>debhelper</strong></span> 相容等級小於等於 8 的情況下，在 <span class="strong"><strong>debian/rules</strong></span> 檔案中包含 <span class="strong"><strong>buildflags.mk</strong></span> 檔案是很有用的，它可以合適地設定一些構建標誌，如 <span class="strong"><strong>CPPFLAGS</strong></span>、<span class="strong"><strong>CFLAGS</strong></span>、<span class="strong"><strong>LDFLAGS</strong></span> 等，同時保證對特定選項，如 <span class="strong"><strong>DEB_CFLAGS_MAINT_APPEND</strong></span> 和 <span class="strong"><strong>DEB_BUILD_MAINT_OPTIONS</strong></span> 的合適處理。現在您應當使用的 <span class="strong"><strong>debhelper</strong></span> 相容等級大於等於 9，故如無特殊原因，請不要繼續包含 <span class="strong"><strong>buildflags.mk</strong></span>，請交由 <span class="strong"><strong>dh</strong></span> 命令來處理和設定這些構建標誌。</p>
                </td>
              </tr>
            </table>
          </div>
          <p>參見 <a class="xref" href="ch05.zh-tw.html#multiarch" title="5.20. 多體系架構">節 5.20, “多體系架構”</a>、<span class="strong"><strong>dpkg-architecture</strong></span>(1) 和 <span class="strong"><strong>dpkg-buildflags</strong></span>(1)。</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="reproducible"/>5.4.5. 可重現的構建</h3>
              </div>
            </div>
          </div>
          <p>為了做到套件可重現的構建，這裡給出一些相關的建議。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">不要嵌入基於系統時間的時間戳。</li>
              <li class="listitem">在 <span class="strong"><strong>debian/rules</strong></span> 中使用“<span class="strong"><strong>dh $@</strong></span>”以應用最新的 <span class="strong"><strong>debhelper</strong></span> 特性。</li>
              <li class="listitem">
Export the build environment as “<span class="strong"><strong>LC_ALL=C.UTF-8</strong></span>” (see <a class="xref" href="ch07.zh-tw.html#utf-8-build" title="7.15. 在 UTF-8 環境下構建">節 7.15, “在 UTF-8 環境下構建”</a>).
</li>
              <li class="listitem">對上游原始碼中使用的時間戳，使用 debhelper 提供的環境變數 <span class="strong"><strong>$SOURCE_DATE_EPOCH</strong></span> 的值。</li>
              <li class="listitem">
                <p class="simpara">閱讀<a class="ulink" href="https://wiki.debian.org/ReproducibleBuilds">可重現構建</a>瞭解更多資訊。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><a class="ulink" href="https://wiki.debian.org/ReproducibleBuilds/Howto">可重現構建操作方法</a>。</li>
                    <li class="listitem"><a class="ulink" href="https://wiki.debian.org/ReproducibleBuilds/TimestampsProposal">可重現構建時間戳處理提議</a>。</li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
          <p>由 <span class="strong"><strong>dpkg-genbuildinfo</strong></span>(1) 生成的控制檔案 <span class="emphasis"><em>source-name_source-version_arch</em></span><span class="strong"><strong>.buildinfo</strong></span> 記錄了構建環境資訊。參見 <span class="strong"><strong>deb-buildinfo</strong></span>(5)</p>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="control"/>5.5. debian/control</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debian/control</strong></span> 檔案包含了由空行分隔的數塊參數資料。每塊元資料按照如下的順序定義了下面這些內容：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">Debian 原始碼包的參數資料</li>
            <li class="listitem">Debian 二進位制套件的參數</li>
          </ul>
        </div>
        <p>參見《Debian 政策手冊》中的 <a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-controlfields">第 5 章 - Control 檔案及其欄位</a> 一章以瞭解每塊參數的具體定義。</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="split"/>5.5.1. Debian 二進位制套件的拆分</h3>
              </div>
            </div>
          </div>
          <p>對行為良好的構建系統來說，對 Debian 二進位制包的拆分可以由如下方式實現。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">為所有二進位制套件在 <span class="strong"><strong>debian/control</strong></span> 檔案中建立對應的二進位制套件條目。</li>
              <li class="listitem">在對應的 <span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>二進位制套件名</em></span><span class="strong"><strong>.install</strong></span> 檔案中列出所有檔案的路徑（相對於 <span class="strong"><strong>debian/tmp</strong></span> 目錄）。</li>
            </ul>
          </div>
          <p>請檢視本指南中相關的例子：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem"><a class="xref" href="ch08.zh-tw.html#autotools-multi" title="8.11. Autotools（多個二進位制套件）">節 8.11, “Autotools（多個二進位制套件）”</a>（基於 Autotools）</li>
              <li class="listitem"><a class="xref" href="ch08.zh-tw.html#cmake-multi" title="8.12. CMake（多個二進位制套件）">節 8.12, “CMake（多個二進位制套件）”</a>（基於 CMake）</li>
            </ul>
          </div>
          <div class="section">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="boption"/>5.5.1.1. debmake -b</h4>
                </div>
              </div>
            </div>
            <p><span class="strong"><strong>debmake</strong></span> 命令的 <span class="strong"><strong>-b</strong></span> 選項提供了一個符合直覺又靈活的功能，可以用來建立 <span class="strong"><strong>debian/control</strong></span> 的初始模板檔案，其中可以定義多個 Debian 二進位制套件，每節中含有如下欄位：</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <span class="strong">
                    <strong>Package:</strong>
                  </span>
                </li>
                <li class="listitem">
                  <span class="strong">
                    <strong>Architecture:</strong>
                  </span>
                </li>
                <li class="listitem">
                  <span class="strong">
                    <strong>Multi-Arch:</strong>
                  </span>
                </li>
                <li class="listitem">
                  <span class="strong">
                    <strong>Depends:</strong>
                  </span>
                </li>
                <li class="listitem">
                  <span class="strong">
                    <strong>Pre-Depends:</strong>
                  </span>
                </li>
              </ul>
            </div>
            <p><span class="strong"><strong>debmake</strong></span> 命令也會在每個適當的依賴欄位中設置合適的變數替換佔位符（substvars）。</p>
            <p>我們在這裡直接引用 <span class="strong"><strong>debmake</strong></span> 手冊頁中的相關一部分內容。</p>
            <div class="variablelist">
              <dl class="variablelist">
                <dt>
                  <span class="term"><span class="strong"><strong>-b</strong></span> "<span class="emphasis"><em>二進位制套件名[:type],…</em></span>", <span class="strong"><strong>--binaryspec</strong></span> "<span class="emphasis"><em>二進位制套件名[:type],…</em></span>"</span>
                </dt>
                <dd>
                  <p class="simpara">設定二進位制套件的指定型別內容，使用一個用逗號分隔的<span class="emphasis"><em>二進位制套件名:型別</em></span>成對列表；例如，使用完整形式“<span class="strong"><strong>foo:bin,foo-doc:doc,libfoo1:lib,libfoo-dev:dev</strong></span>”或者使用短形式，“<span class="strong"><strong>-doc,libfoo1,libfoo-dev</strong></span>”。</p>
                  <p class="simpara">這裡，<span class="emphasis"><em>二進位制套件</em></span>是二進位制套件名稱，可選的<span class="emphasis"><em>類型</em></span>應當從下面的<span class="emphasis"><em>型別</em></span>值中進行選取：</p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem"><span class="strong"><strong>bin</strong></span>：C/C++ 預編譯 ELF 二進位制程式碼套件（any，foreign）（預設，別名：<span class="strong"><strong>""</strong></span>，即，<span class="emphasis"><em>空字串</em></span>）</li>
                      <li class="listitem"><span class="strong"><strong>data</strong></span>：資料（字型、影象、……）套件（all，foreign）（別名：<span class="strong"><strong>da</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>dev</strong></span>：程式庫開發套件（any，same）（別名：<span class="strong"><strong>de</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>doc</strong></span>：文件套件（all，foreign）（別名：<span class="strong"><strong>do</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>lib</strong></span>：程式庫套件（any，same）（別名：<span class="strong"><strong>l</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>perl</strong></span>：Perl 指令碼套件（all，foreign）（別名：<span class="strong"><strong>pl</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>python</strong></span>：Python 指令碼套件（all，foreign）（別名：<span class="strong"><strong>py</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>python3</strong></span>：Python3 指令碼套件（all，foreign）（別名：<span class="strong"><strong>py3</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>ruby</strong></span>：Ruby 指令碼套件（all，foreign）（別名：<span class="strong"><strong>rb</strong></span>）</li>
                      <li class="listitem"><span class="strong"><strong>script</strong></span>：Shell 指令碼套件（all，foreign）（別名：<span class="strong"><strong>sh</strong></span>）</li>
                    </ul>
                  </div>
                  <p class="simpara">括號內成對的值，例如（any，foreign），是套件的<span class="strong"><strong>架構</strong></span>和<span class="strong"><strong>多架構（Multi-Arch）</strong></span>特性的值，它們將設定在 <span class="strong"><strong>debian/control</strong></span> 檔案中。</p>
                  <p class="simpara">大多數情況下，<span class="strong"><strong>debmake</strong></span> 命令可以有效地從<span class="emphasis"><em>二進位制套件</em></span>的名稱猜測出正確的<span class="emphasis"><em>型別</em></span>。如果<span class="emphasis"><em>型別</em></span>的值並不明顯，程式將回退到將<span class="emphasis"><em>型別</em></span>設定為<span class="strong"><strong>bin</strong></span>。例如，<span class="strong"><strong>libfoo</strong></span> 設定<span class="emphasis"><em>型別</em></span>為 <span class="strong"><strong>lib</strong></span>，而 <span class="strong"><strong>font-bar</strong></span> 會令程式設定<span class="emphasis"><em>型別</em></span>為 <span class="strong"><strong>data</strong></span>，……</p>
                  <p class="simpara">如果原始碼樹的內容和<span class="emphasis"><em>型別</em></span>的設定不一致，<span class="strong"><strong>debmake</strong></span> 命令會發出警告。</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="section">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="package-split-example"/>5.5.1.2. 拆包的場景和例子</h4>
                </div>
              </div>
            </div>
            <p>對於下面這樣的上游原始碼範例，我們在這裡給出使用 <span class="strong"><strong>debmake</strong></span> 處理時一些典型的 multiarch 套件拆分的場景和做法：</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">一個程式庫原始碼 <span class="emphasis"><em>libfoo-1.0</em></span><span class="strong"><strong>.tar.gz</strong></span></li>
                <li class="listitem">一個軟體工具原始碼 <span class="emphasis"><em>bar-1.0</em></span><span class="strong"><strong>.tar.gz</strong></span>，軟體由編譯型語言編寫</li>
                <li class="listitem">一個軟體工具原始碼 <span class="emphasis"><em>baz-1.0</em></span><span class="strong"><strong>.tar.gz</strong></span>，軟體由解釋型語言編寫</li>
              </ul>
            </div>
            <div class="informaltable">
              <table class="informaltable" border="1">
                <colgroup>
                  <col class="col_1"/>
                  <col class="col_2"/>
                  <col class="col_3"/>
                  <col class="col_4"/>
                  <col class="col_5"/>
                </colgroup>
                <thead>
                  <tr>
                    <th style="text-align: left" valign="top">
                      <span class="emphasis">
                        <em>二進位制套件</em>
                      </span>
                    </th>
                    <th style="text-align: left" valign="top">
                      <span class="emphasis">
                        <em>型別</em>
                      </span>
                    </th>
                    <th style="text-align: left" valign="top">
                      <span class="strong">
                        <strong>Architecture:</strong>
                      </span>
                    </th>
                    <th style="text-align: left" valign="top">
                      <span class="strong">
                        <strong>Multi-Arch:</strong>
                      </span>
                    </th>
                    <th style="text-align: left" valign="top">套件內容</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>lib</strong>
                        </span>
                        <span class="emphasis">
                          <em>foo1</em>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>lib</strong>
                        </span>
                        <sup>*</sup>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>any</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>same</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>共享程式庫，可共同安裝</p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>lib</strong>
                        </span>
                        <span class="emphasis">
                          <em>foo</em>
                        </span>
                        <span class="strong">
                          <strong>-dev</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>dev</strong>
                        </span>
                        <sup>*</sup>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>any</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>same</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>共享程式庫標頭檔案及相關開發檔案，可共同安裝</p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>lib</strong>
                        </span>
                        <span class="emphasis">
                          <em>foo</em>
                        </span>
                        <span class="strong">
                          <strong>-tools</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>bin</strong>
                        </span>
                        <sup>*</sup>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>any</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>foreign</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>執行時支援程式，不可共同安裝</p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>lib</strong>
                        </span>
                        <span class="emphasis">
                          <em>foo</em>
                        </span>
                        <span class="strong">
                          <strong>-doc</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>doc</strong>
                        </span>
                        <sup>*</sup>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>all</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>foreign</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>共享程式庫文件</p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="emphasis">
                          <em>bar</em>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>bin</strong>
                        </span>
                        <sup>*</sup>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>any</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>foreign</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>編譯好的程式檔案，不可共同安裝</p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="emphasis">
                          <em>bar</em>
                        </span>
                        <span class="strong">
                          <strong>-doc</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>doc</strong>
                        </span>
                        <sup>*</sup>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>all</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>foreign</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>程式的配套文件檔案</p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="emphasis">
                          <em>baz</em>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>script</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>all</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>foreign</p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>解釋型程式檔案</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="section">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a id="libnames"/>5.5.1.3. 程式庫套件名稱</h4>
                </div>
              </div>
            </div>
            <p>Let’s consider that the upstream source tarball of the <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo</em></span> library is updated from <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo-7.0</em></span><span class="strong"><strong>.tar.gz</strong></span> to <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo-8.0</em></span><span class="strong"><strong>.tar.gz</strong></span> with a new SONAME major version which affects other packages.</p>
            <p>程式庫的二進位制套件將必須從 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo7</em></span> 重新命名為 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo8</em></span> 以保持使用 <span class="strong"><strong>unstable</strong></span> 套件的系統上所有依賴該程式庫的套件在上傳了基於 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo-8.0</em></span><span class="strong"><strong>.tar.gz</strong></span> 的新程式庫後仍然能夠正常運行。</p>
            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
              <table border="0" summary="Warning">
                <tr>
                  <td rowspan="2" align="center" valign="top">
                    <img alt="[警告]" src="images/warning.png"/>
                  </td>
                  <th align="left">警告</th>
                </tr>
                <tr>
                  <td align="left" valign="top">
                    <p>如果這個二進位制程式庫套件沒有得到更名，許多使用 <span class="strong"><strong>unstable</strong></span> 套件的系統上的各個依賴該程式庫的套件會在新的程式庫包上傳後立刻破損，即便立刻請求進行 binNMU 上傳也無法避免這個問題。由於種種原因，binNMU 不可能在上傳後立刻開始進行，故無法緩解問題。</p>
                  </td>
                </tr>
              </table>
            </div>
            <p><span class="strong"><strong>-dev</strong></span> 套件必須遵循以下命名規則：</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p class="simpara">使用<span class="strong"><strong>不帶版本號的 -dev</strong></span> 套件名稱：<span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo</em></span><span class="strong"><strong>-dev</strong></span></p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">該情況通常適用於依賴關係處於葉節點的程式庫套件。</li>
                      <li class="listitem">
                        <p class="simpara">倉庫內只允許存在一個版本的程式庫原始碼包。</p>
                        <div class="itemizedlist">
                          <ul class="itemizedlist">
                            <li class="listitem">其相關聯的程式庫套件在程式庫變遷進行時需要從 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo7</em></span> 重新命名為 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo8</em></span> 以避免 <span class="strong"><strong>unstable</strong></span> 倉庫內依賴關係的破壞。</li>
                          </ul>
                        </div>
                      </li>
                      <li class="listitem">該方法適用於簡單 binNMU 可以快速解決所有受影響套件對該程式庫依賴的情況下。（<a class="ulink" href="https://en.wikipedia.org/wiki/Application_binary_interface">ABI</a> 有變化，過時的 <a class="ulink" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> 被移除而常用、活躍的 API 未變化。）</li>
                      <li class="listitem">該方法有時也能適用於可協調進行手動的程式碼更新，影響範圍限定在有限的一些套件中的情況下。（<a class="ulink" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> 有變化）</li>
                    </ul>
                  </div>
                </li>
                <li class="listitem">
                  <p class="simpara">使用<span class="strong"><strong>帶版本的 -dev</strong></span> 套件名稱：<span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo7</em></span><span class="strong"><strong>-dev</strong></span> 和 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo8</em></span><span class="strong"><strong>-dev</strong></span></p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">該情況通常適用於各類重要程式庫套件。</li>
                      <li class="listitem">
                        <p class="simpara">兩個版本的程式庫原始碼包可同時出現在發行版倉庫中。</p>
                        <div class="itemizedlist">
                          <ul class="itemizedlist">
                            <li class="listitem">令所有依賴該程式庫的套件依賴 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo</em></span><span class="strong"><strong>-dev</strong></span>。</li>
                            <li class="listitem">令 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo7</em></span><span class="strong"><strong>-dev</strong></span> 和 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo8</em></span><span class="strong"><strong>-dev</strong></span> 兩者都提供 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo</em></span><span class="strong"><strong>-dev</strong></span>。</li>
                            <li class="listitem">原始碼包需要從 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo-?.0</em></span><span class="strong"><strong>.tar.gz</strong></span> 相應地重新命名為 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo7-7.0</em></span><span class="strong"><strong>.tar.gz</strong></span> 和 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo8-8.0</em></span><span class="strong"><strong>.tar.gz</strong></span>。</li>
                            <li class="listitem">需要仔細選擇 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo7</em></span> 和 <span class="strong"><strong>lib</strong></span><span class="emphasis"><em>foo8</em></span> 套件檔案安裝時的路徑，如標頭檔案等等，以保證它們可以同時安裝。</li>
                          </ul>
                        </div>
                      </li>
                      <li class="listitem">可能的話，不要使用這個重量級的、需要大量人為干預的方法。</li>
                      <li class="listitem">該方法適用於存在多個依賴該程式庫的套件，且升級時常常涉及手動程式碼更新的場景。（<a class="ulink" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> 有變化）否則，受影響的套件會無法從原始碼重新構建並導致對發行而言致命的 bug 出現。</li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
            <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
              <table border="0" summary="Tip">
                <tr>
                  <td rowspan="2" align="center" valign="top">
                    <img alt="[提示]" src="images/tip.png"/>
                  </td>
                  <th align="left">提示</th>
                </tr>
                <tr>
                  <td align="left" valign="top">
                    <p>如果包內資料檔案編碼方案有所變化（如，從 latin1 變為 utf-8），該場景應比照 API 變化做類似的考慮與處理。</p>
                  </td>
                </tr>
              </table>
            </div>
            <p>參見 <a class="xref" href="ch05.zh-tw.html#lib" title="5.18. 程式庫套件">節 5.18, “程式庫套件”</a>。</p>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="substvar"/>5.5.2. Substvar</h3>
              </div>
            </div>
          </div>
          <p><span class="strong"><strong>debian/control</strong></span> 也定義了套件的依賴關系，其中<a class="ulink" href="https://www.debian.org/doc/debian-policy/ch-source.html#s-substvars">變數替換機制</a>（substvar）的功能可以用來將套件維護者從追蹤（大多數簡單的）套件依賴的重複勞動中解放出來。請參見 <span class="strong"><strong>deb-substvars</strong></span>(5)。</p>
          <p><span class="strong"><strong>debmake</strong></span> 命令支援下列變數替換指令：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem"><span class="strong"><strong>${misc:Depends}</strong></span>，可用於所有二進位制套件</li>
              <li class="listitem"><span class="strong"><strong>${misc:Pre-Depends}</strong></span>，可用於所有 multiarch 套件</li>
              <li class="listitem"><span class="strong"><strong>${shlibs:Depends}</strong></span>，可用於所有含有二進位制可執行檔案或程式庫的套件</li>
              <li class="listitem"><span class="strong"><strong>${python:Depends}</strong></span>，可用於所有 Python 套件</li>
              <li class="listitem"><span class="strong"><strong>${python3:Depends}</strong></span>，可用於所有 Python3 套件</li>
              <li class="listitem"><span class="strong"><strong>${perl:Depends}</strong></span>，用於所有 Perl 套件</li>
              <li class="listitem"><span class="strong"><strong>${ruby:Depends}</strong></span>，用於所有 Ruby 套件</li>
            </ul>
          </div>
          <p>For the shared library, required libraries found simply by "<span class="strong"><strong>objdump -p</strong></span> <span class="emphasis"><em>/path/to/program</em></span> <span class="strong"><strong>| grep NEEDED</strong></span>" are covered by the <span class="strong"><strong>shlib</strong></span> substvar.</p>
          <p>對於 Python 和其它直譯器來說，所需的模組通常由對包含類似“<span class="strong"><strong>import</strong></span>”、“<span class="strong"><strong>use</strong></span>”、“<span class="strong"><strong>require</strong></span>”等等關鍵字的行進行解析，並會體現在各自對應的變數替換佔位符所在位置上。</p>
          <p>對其它沒有部署屬於自己範疇內的變數替換機制的情況，<span class="strong"><strong>misc</strong></span> 變數替換佔位符通常用來覆蓋對應的依賴替換需求。</p>
          <p>對 POSIX shell 程式來說，並沒有簡單的辦法來驗證其依賴關係，substvar 的變數替換也無法自動得出它們的依賴。</p>
          <p>對使用動態載入機制，包括 <a class="ulink" href="https://wiki.gnome.org/Projects/GObjectIntrospection">GObject introspection</a> 機制的程式庫和模組來說，現在沒有簡單的方法可以檢查依賴關係，變數替換機制也無法自動推匯出所需的依賴。</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="binnmu"/>5.5.3. binNMU 安全</h3>
              </div>
            </div>
          </div>
          <p>一個 <a class="ulink" href="https://wiki.debian.org/binNMU">binNMU（二進位制非維護者上傳）</a> 是為程式庫遷移或其它目的所作的非維護者套件上傳。在一次 binNMU 上傳中，只有“<span class="strong"><strong>Architecture: any</strong></span>”的套件會被重構建，其版本號會在末尾附加一個編號（例如，原來版本為 2.3.4-3，新上傳的包版本會變成 2.3.4-3+b1）。所有“<span class="strong"><strong>Architecture: all</strong></span>”的包將不會重新構建。</p>
          <p>來自同一個原始碼包的各個二進位制包如果在 <span class="strong"><strong>debian/control</strong></span> 檔案中有互相的依賴關係，這些二進位制包通常情況下應當對 binNMU 是安全的（即，進行 binNMU 不會破壞依賴關係）。然而，在“<span class="strong"><strong>Architecture: any</strong></span>”和“<span class="strong"><strong>Architecture: all</strong></span>”的套件同時由同一原始碼包產出，且互相之間有依賴關係時，需要小心對待所依賴的版本，必要時應做出調整。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p class="simpara">“<span class="strong"><strong>Architecture: any</strong></span>”的套件依賴於“<span class="strong"><strong>Architecture: any</strong></span>”<span class="emphasis"><em>foo</em></span> 套件</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>Depends:</strong></span> <span class="emphasis"><em>foo</em></span> <span class="strong"><strong>(= ${binary:Version})</strong></span></li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p class="simpara">“<span class="strong"><strong>Architecture: any</strong></span>”的套件依賴於“<span class="strong"><strong>Architecture: all</strong></span>”<span class="emphasis"><em>bar</em></span> 套件</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>Depends:</strong></span> <span class="emphasis"><em>bar</em></span> <span class="strong"><strong>(= ${source:Version}</strong></span></li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p class="simpara">“<span class="strong"><strong>Architecture: all</strong></span>”的套件依賴於“<span class="strong"><strong>Architecture: any</strong></span>”<span class="emphasis"><em>baz</em></span> 套件</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>Depends:</strong></span> <span class="emphasis"><em>baz</em></span> <span class="strong"><strong>(&gt;= ${source:Version})</strong></span>, <span class="emphasis"><em>baz</em></span> <span class="strong"><strong>(&lt;&lt; ${source:Upstream-Version}.0~)</strong></span></li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="changelog"/>5.6. debian/changelog</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debian/changelog</strong></span> 檔案記錄了 Debian 軟體包的歷史並在其第一行定義了上游套件的版本和 Debian 修訂版本。所有改變的內容應當以明確、正式而簡明的語言風格進行記錄。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara">即便您在自己獨立進行套件上傳，您也必須記錄所有較重要、使用者可見的變更，例如：</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">安全相關的漏洞修復。</li>
                  <li class="listitem">使用者介面變動。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">如果您需要他人協助您進行上傳，您應當更詳盡地記錄變更內容，包括所有打包相關的變動，從而方便他人對您的套件進行審查。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">協助上傳的人員不應該也通常不會猜測您沒有寫出來的想法，所以請認真書寫變更信息。</li>
                  <li class="listitem">通常來說，協助您上傳的人的時間比您的時間更寶貴。</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> 命令會建立初始的模板檔案，其中帶有上游套件版本和 Debian 打包修訂編號。發行版部分被設定為 <span class="strong"><strong>UNRELEASED</strong></span> 以避免半成品不小心被上傳進入 Debian 倉庫。</p>
        <p>通常使用 <span class="strong"><strong>debchange</strong></span> 命令（它具有一個別名，即 <span class="strong"><strong>dch</strong></span>）對其進行編輯。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>您也可以手動使用任何文字編輯器修改 <span class="strong"><strong>debian/changelog</strong></span> 檔案，只要您能夠遵循 <span class="strong"><strong>debchange</strong></span> 命令所使用的特定文字排版格式即可。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p><span class="strong"><strong>debian/changelog</strong></span> 檔案使用的日期字串可以使用“<span class="strong"><strong>LC_ALL=C date -R</strong></span>”命令手動生成。</p>
              </td>
            </tr>
          </table>
        </div>
        <p>該檔案將由 <span class="strong"><strong>dh_installchangelogs</strong></span> 命令安裝到 <span class="strong"><strong>/usr/share/doc/</strong></span><span class="emphasis"><em>binarypackage</em></span> 目錄，檔名為 <span class="strong"><strong>changelog.Debian.gz</strong></span>。</p>
        <p>上游的變更日誌則會安裝至 <span class="strong"><strong>/usr/share/doc/</strong></span><span class="emphasis"><em>binarypackage</em></span> 目錄中，檔名為 <span class="strong"><strong>changelog.gz</strong></span>。</p>
        <p>上游的變更日誌是由 <span class="strong"><strong>dh_installchangelogs</strong></span> 程式自動進行搜尋和處理的；它會使用大小寫不敏感的搜尋方式尋找上游程式碼中特定名稱的檔案，如 <span class="strong"><strong>changelog</strong></span>、<span class="strong"><strong>changes</strong></span>、<span class="strong"><strong>changelog.txt</strong></span>、<span class="strong"><strong>changes.txt</strong></span>、<span class="strong"><strong>history</strong></span>、<span class="strong"><strong>history.txt</strong></span> 或 <span class="strong"><strong>changelog.md</strong></span>。除了根目錄，程式還會在 <span class="strong"><strong>doc/</strong></span> 目錄和 <span class="strong"><strong>docs/</strong></span> 目錄內進行搜尋。</p>
        <p>當您完成了主要打包工作並驗證了其質量之後，請考慮執行“<span class="strong"><strong>dch -r</strong></span>”命令並將最終完成的 <span class="strong"><strong>debian/changelog</strong></span> 檔案中發行版（distribution）部分進行設定，通常該欄位應當使用 <span class="strong"><strong>unstable</strong></span>。<a href="#ftn.idm2493" class="footnote" id="idm2493"><sup class="footnote">[13]</sup></a> 如果您的打包是一次向後移植（backports）、是安全更新或是對長期支援版的上傳等等其它情況，請使用相應合適的發行版名稱。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="copyright"/>5.7. debian/copyright</h2>
            </div>
          </div>
        </div>
        <p>Debian 以十分嚴肅的態度對待版權和許可證資訊。《Debian 政策手冊》強制規定軟體包的 <span class="strong"><strong>debian/copyright</strong></span> 檔案中需要提供相關資訊的摘要。</p>
        <p>您應當按照 <a class="ulink" href="https://www.debian.org/doc/packaging-manuals/copyright-format/1.0/">機器可解析的 debian/copyright 檔案</a>（DEP-5）對其進行排版。</p>
        <div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Caution">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[注意]" src="images/caution.png"/>
              </td>
              <th align="left">注意</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>這裡的 <span class="strong"><strong>debian/copyright</strong></span> 檔案中描述的許可證資訊匹配資訊應當合適地進行排序，以確保越寬泛的檔案匹配越靠前。請參見 <a class="xref" href="ch06.zh-tw.html#koption" title="6.4. debmake -k">節 6.4, “debmake -k”</a>。</p>
              </td>
            </tr>
          </table>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> 命令會以掃描整個原始碼樹的方式建立初步的、相容 DEP-5 的模板檔案。它會內部呼叫許可證檢查工具來對許可證文字進行分類。<a href="#ftn.idm2509" class="footnote" id="idm2509"><sup class="footnote">[14]</sup></a></p>
        <p>除非明確指定（有些嚴格過頭的） <span class="strong"><strong>-P</strong></span> 選項，<span class="strong"><strong>debmake</strong></span> 命令會為了實用性而跳過對自動生成的檔案的檢查與報告，預設它們採用寬鬆的許可證。</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[注意]" src="images/note.png"/>
              </td>
              <th align="left">注意</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>如果您發現了這個許可證檢查工具存在一些問題，請向 <span class="strong"><strong>debmake</strong></span> 套件提交缺陷報告並提供包含出現問題的許可證和版權資訊在內的相關文字內容。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[注意]" src="images/note.png"/>
              </td>
              <th align="left">注意</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p><span class="strong"><strong>debmake</strong></span> 命令專注於在建立 <span class="strong"><strong>debian/copyright</strong></span> 模板時聚合相同的授權和許可證資訊並收錄其詳細內容。為了在有限的時間內儘可能完成工作，工具將只會提取檔案中第一塊看起來像授權文字或許可證宣告的部分。因此，生成的許可證資訊可能並不完美。請同時考慮使用其它工具，如 <span class="strong"><strong>licensecheck</strong></span> 輔助進行檢查。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>我們強烈推薦您使用 <span class="strong"><strong>licensecheck</strong></span>(1) 命令再次檢查原始碼許可證的狀態，並在有必要的情況下進行人工程式碼審查。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="patches"/>5.8. debian/patches/*</h2>
            </div>
          </div>
        </div>
        <p>在<span class="strong"><strong>構建</strong></span>過程開始之前，<span class="strong"><strong>debian/patches/</strong></span> 目錄內的 <span class="strong"><strong>-p1</strong></span> 等級的補丁將會按照在 <span class="strong"><strong>debian/patches/series</strong></span> 檔案中指定的順序依次應用於上游程式碼樹中。</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[注意]" src="images/note.png"/>
              </td>
              <th align="left">注意</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>原生 Debian 套件（參見 <a class="xref" href="ch05.zh-tw.html#native" title="5.3. 原生 Debian 套件">節 5.3, “原生 Debian 套件”</a>）將不使用這些檔案。</p>
              </td>
            </tr>
          </table>
        </div>
        <p>要準備這一系列 <span class="strong"><strong>-p1</strong></span> 等級的補丁，有幾種不同的方式可供您選擇。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>diff</strong></span> 命令</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">參見 <a class="xref" href="ch04.zh-tw.html#diff-u" title="4.8.1. 使用 diff -u 處理補丁">節 4.8.1, “使用 diff -u 處理補丁”</a></li>
                  <li class="listitem">
                    <p class="simpara">原始但萬能的方法</p>
                    <div class="itemizedlist">
                      <ul class="itemizedlist">
                        <li class="listitem">補丁的來源多種多樣，它可以來自其它發行版、郵件列表中的帖文或是來自上游 <span class="strong"><strong>git</strong></span> 倉庫的揀選補丁，由“<span class="strong"><strong>git format-patches</strong></span>”生成</li>
                      </ul>
                    </div>
                  </li>
                  <li class="listitem">不涉及 <span class="strong"><strong>.pc/</strong></span> 目錄的問題</li>
                  <li class="listitem">不修改上游原始碼樹</li>
                  <li class="listitem">手工更新 <span class="strong"><strong>debian/patches/series</strong></span> 檔案</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>dquilt</strong></span> 命令</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">參見 <a class="xref" href="ch03.zh-tw.html#quilt-setup" title="3.4. quilt">節 3.4, “quilt”</a></li>
                  <li class="listitem">基本的便利方案</li>
                  <li class="listitem">會以合適方式生成 <span class="strong"><strong>.pc/</strong></span> 目錄及其中的資料</li>
                  <li class="listitem">會修改上游原始碼樹</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">“<span class="strong"><strong>dpkg-source --commit</strong></span>”命令</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">參見 <a class="xref" href="ch04.zh-tw.html#dpkg-source-commit" title="4.8.3. 使用 dpkg-source --commit 處理補丁">節 4.8.3, “使用 dpkg-source --commit 處理補丁”</a></li>
                  <li class="listitem">更新、更優雅一些的方案</li>
                  <li class="listitem">會以合適方式生成 <span class="strong"><strong>.pc/</strong></span> 目錄及其中的資料</li>
                  <li class="listitem">會修改上游原始碼樹</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">由 <span class="strong"><strong>dpkg-buildpackage</strong></span> 自動生成補丁</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">參見 <a class="xref" href="ch05.zh-tw.html#alt-vcs" title="5.14. 在版本控制系統中進行記錄（備選方案）">節 5.14, “在版本控制系統中進行記錄（備選方案）”</a></li>
                  <li class="listitem">在 <span class="strong"><strong>debian/source/local-options</strong></span> 檔案中添加 <span class="strong"><strong>single-debian-patch</strong></span> 這一行</li>
                  <li class="listitem">設定 <span class="strong"><strong>debian/source/local-patch-header</strong></span> 文件</li>
                  <li class="listitem">不涉及 <span class="strong"><strong>.pc/</strong></span> 目錄的問題</li>
                  <li class="listitem">在 Debian 分支中（常見為 <span class="strong"><strong>master</strong></span> 分支）存儲經過修改的上游原始碼樹</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>gbp-pq</strong></span> 命令</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">配合 <span class="strong"><strong>git-buildpackage</strong></span> 工具的基本 <span class="strong"><strong>git</strong></span> 工作流</li>
                  <li class="listitem">不涉及 <span class="strong"><strong>.pc/</strong></span> 目錄的問題</li>
                  <li class="listitem">在可丟棄分支上儲存經過修改的上游原始碼樹（<span class="strong"><strong>patch-queue/master</strong></span>）</li>
                  <li class="listitem">在 Debian 分支中（常見為 <span class="strong"><strong>master</strong></span> 分支）存儲未經修改的原始碼樹</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>gbp-dpm</strong></span> 命令</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">配合 <span class="strong"><strong>git-dpm</strong></span> 套件的更細緻的 <span class="strong"><strong>git</strong></span> 工作流</li>
                  <li class="listitem">不涉及 <span class="strong"><strong>.pc/</strong></span> 目錄的問題</li>
                  <li class="listitem">在補丁分支中（通常命名為 <span class="strong"><strong>patched/</strong></span><span class="emphasis"><em>隨便啥名字</em></span>）儲存經過修改的上游原始碼樹</li>
                  <li class="listitem">在 Debian 分支中（通常命名為 <span class="strong"><strong>master/</strong></span><span class="emphasis"><em>隨便啥名字</em></span>）儲存未經修改的上游原始碼樹</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>無論這些補丁的來源如何，都建議使用兼容於 <a class="ulink" href="http://dep.debian.net/deps/dep3/">DEP-3</a> 的頭部資訊對其進行標記。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p><span class="strong"><strong>dgit</strong></span> 套件提供了另外一套直接使用 git 集成操作 Debian 套件倉庫的工具。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="dpkg-source-x"/>5.8.1. dpkg-source -x</h3>
              </div>
            </div>
          </div>
          <p>“<span class="strong"><strong>dpkg-source -x</strong></span>” 命令可以對 Debian 原始碼包進行解壓縮。</p>
          <p>該命令通常會將 <span class="strong"><strong>debian/patches/</strong></span> 目錄內的補丁應用在原始碼樹中，並將補丁狀態記錄在 <span class="strong"><strong>.pc/</strong></span> 目錄中。</p>
          <p>如果您想保持原始碼樹不做修改（例如，為了在 <a class="xref" href="ch05.zh-tw.html#vcs" title="5.13. 在版本控制系統中進行記錄（標準）">節 5.13, “在版本控制系統中進行記錄（標準）”</a> 中繼續使用），請在命令列中使用 <span class="strong"><strong>--skip-patches</strong></span> 選項。</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="quilt-dpkg"/>5.8.2. dquilt 和 dpkg-source</h3>
              </div>
            </div>
          </div>
          <p>在 <span class="strong"><strong>dpkg-source</strong></span> 工具 1.16.1 版本之前，該工具還未提供 <span class="strong"><strong>--commit</strong></span> 選項對應的功能，此時需要 <span class="strong"><strong>quilt</strong></span> 命令（或者對它的封裝，<span class="strong"><strong>dquilt</strong></span> 命令）來管理 <span class="strong"><strong>debian/patches/</strong></span> 目錄中的 <span class="strong"><strong>-p1</strong></span> 等級的補丁。</p>
          <p>在使用 <span class="strong"><strong>dpkg-source</strong></span> 命令時，補丁應當能夠乾淨地進行應用。因此在補丁行數出現偏移或者其它情況出現時，您不能直接將舊補丁原封不動地複製到新版上游釋出對應打包版本的目錄中。</p>
          <p>與此相對的是 <span class="strong"><strong>dquilt</strong></span> 命令（參見 <a class="xref" href="ch03.zh-tw.html#quilt-setup" title="3.4. quilt">節 3.4, “quilt”</a>）對補丁的處理更加寬容。您可以呼叫 <span class="strong"><strong>dquilt</strong></span> 命令對補丁進行正常化。</p>
          <pre class="screen"> $ while dquilt push; do dquilt refresh ; done
 $ dquilt pop -a</pre>
          <p>使用 <span class="strong"><strong>dpkg-source</strong></span> 命令比起使用 <span class="strong"><strong>dquilt</strong></span> 命令來說存在一大優勢：<span class="strong"><strong>dquilt</strong></span> 命令無法自動處理二進位制檔案出現變更的情況，而 <span class="strong"><strong>dpkg-source</strong></span> 命令能夠探測出現內容變動的二進位制檔案，並將其列入 <span class="strong"><strong>debian/source/include-binaries</strong></span> 檔案以便在 Debian 打包用壓縮包中將檔案囊括其中。</p>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="signing-key"/>5.9. debian/upstream/signing-key.asc</h2>
            </div>
          </div>
        </div>
        <p>某些套件由 GPG 金鑰進行了簽名。</p>
        <p>例如，<a class="ulink" href="https://www.gnu.org/software/hello/">GNU hello</a> 可使用 HTTP 協議從 <a class="ulink" href="https://ftp.gnu.org/gnu/hello/">https://ftp.gnu.org/gnu/hello/</a> 下載。它含有以下檔案：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem"><span class="strong"><strong>hello-</strong></span><span class="emphasis"><em>version</em></span><span class="strong"><strong>.tar.gz</strong></span>（上游原始碼）</li>
            <li class="listitem"><span class="strong"><strong>hello-</strong></span><span class="emphasis"><em>version</em></span><span class="strong"><strong>.tar.gz.sig</strong></span>（分離的簽名）nature)</li>
          </ul>
        </div>
        <p>我們現在來選擇最新的版本套裝。</p>
        <pre class="screen">$ wget https://ftp.gnu.org/gnu/hello/hello-2.9.tar.gz
 ...
$ wget https://ftp.gnu.org/gnu/hello/hello-2.9.tar.gz.sig
 ...
$ gpg --verify hello-2.9.tar.gz.sig
gpg: Signature made Thu 10 Oct 2013 08:49:23 AM JST using DSA key ID 80EE4A00
gpg: Can't check signature: public key not found</pre>
        <p>如果您從郵件列表獲知上游維護者所使用的 GPG 公鑰資訊，請將它作為 <span class="strong"><strong>debian/upstream/signing-key.asc</strong></span> 檔案進行儲存。否則，請使用 hkp 公鑰伺服器並經由您的<a class="ulink" href="https://en.wikipedia.org/wiki/Web_of_trust">信任網</a>進行驗證。</p>
        <pre class="screen">$ gpg --keyserver hkp://keys.gnupg.net --recv-key 80EE4A00
gpg: requesting key 80EE4A00 from hkp server keys.gnupg.net
gpg: key 80EE4A00: public key "Reuben Thomas &lt;rrt@sc3d.org&gt;" imported
gpg: no ultimately trusted keys found
gpg: Total number processed: 1
gpg:               imported: 1
$ gpg --verify hello-2.9.tar.gz.sig
gpg: Signature made Thu 10 Oct 2013 08:49:23 AM JST using DSA key ID 80EE4A00
gpg: Good signature from "Reuben Thomas &lt;rrt@sc3d.org&gt;"
  ...
Primary key fingerprint: 9297 8852 A62F A5E2 85B2  A174 6808 9F73 80EE 4A00</pre>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>如果您的網路環境阻擋了對 HKP <span class="strong"><strong>11371</strong></span> 埠的連線，請考慮使用“<span class="strong"><strong>hkp://keyserver.ubuntu.com:80</strong></span>”。</p>
              </td>
            </tr>
          </table>
        </div>
        <p>在確認金鑰身份 <span class="strong"><strong>80EE4A00</strong></span> 值得信任之後，應當下載其公鑰並將其儲存在 <span class="strong"><strong>debian/upstream/signing-key.asc</strong></span> 檔案中。</p>
        <pre class="screen">$ gpg --armor --export 80EE4A00 &gt;debian/upstream/signing-key.asc</pre>
        <p>之後，應相應地在 <span class="strong"><strong>debian/watch</strong></span> 檔案中做如下的修改。</p>
        <pre class="screen">version=4
pgpsigurlmangle=s/$/.sig/  https://ftp.gnu.org/gnu/hello/ hello-(\d[\d.]*)\.tar\.(?:gz|bz2|xz)</pre>
        <p>現在 <span class="strong"><strong>uscan</strong></span> 命令會在掃描時自動使用 GPG 籤名驗證上游原始碼包的真實性。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="dfsg"/>5.10. debian/watch 和 DFSG</h2>
            </div>
          </div>
        </div>
        <p>Debian 嚴肅地對待軟體自由，遵循 <a class="ulink" href="https://www.debian.org/social_contract.html#guidelines">Debian 自由軟體指導方針（DFSG）</a>。</p>
        <p>在使用 <span class="strong"><strong>uscan</strong></span> 命令來更新 Debian 打包所用程式碼時，上游原始碼包（tarball）中不符合<a class="ulink" href="https://www.debian.org/social_contract.html#guidelines">Debian 自由軟體指導方針（DFSG）</a>的部分可以利用該工具簡單地進行移除。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">在 <span class="strong"><strong>debian/copyright</strong></span> 檔案中的 <span class="strong"><strong>Files-Excluded</strong></span> 一節中列出需要移除的檔案。</li>
            <li class="listitem">在 <span class="strong"><strong>debian/watch</strong></span> 檔案中列出下載上游原始碼包（tarball）所使用的 URL。</li>
            <li class="listitem">
              <p class="simpara">執行 <span class="strong"><strong>uscan</strong></span> 命令以下載新的上游原始碼包（tarball）。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">作為替代方案，您也可以使用“<span class="strong"><strong>gbp import-orig --uscan --pristine-tar</strong></span>”命令。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">最後得到 tarball 的版本編號會附加一個額外的字尾 <span class="strong"><strong>+dfsg</strong></span>。</li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="debianconf"/>5.11. 其它 debian/* 檔案</h2>
            </div>
          </div>
        </div>
        <p>另外也可以新增一些可選的配置檔案並放入 <span class="strong"><strong>debian/</strong></span> 目錄。它們大多用於控制由 <span class="strong"><strong>debhelper</strong></span> 套件提供的 <span class="strong"><strong>dh_</strong></span>* 命令的行為，但也有一些檔案會影響 <span class="strong"><strong>dpkg-source</strong></span>、<span class="strong"><strong>lintian</strong></span> 和 <span class="strong"><strong>gbp</strong></span> 這些命令。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>請檢查 <span class="strong"><strong>debhelper</strong></span>(7) 的內容以瞭解當前可用的 <span class="strong"><strong>dh_</strong></span>* 命令列表。</p>
              </td>
            </tr>
          </table>
        </div>
        <p>這些 <span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.</strong></span>* 的檔案提供了設定檔案安裝路徑的強大功能。即使上游原始碼沒有構建系統，這個軟體依然可以利用這裡提到的這些文件來進行打包。請參考 <a class="xref" href="ch08.zh-tw.html#nomakefile" title="8.2. 無 Makefile（shell，命令列介面）">節 8.2, “無 Makefile（shell，命令列介面）”</a> 的範例。</p>
        <p>下面列表中出現的“-x[1234]”上標指示了 <span class="strong"><strong>debmake</strong></span> <span class="strong"><strong>-x</strong></span> 選項生成對應模板檔案所需要的最小值。請參考 <span class="strong"><strong>debmake</strong></span>(1) 以瞭解詳情。</p>
        <p>下面按照字母表順序列出一些值得注意的可選配置檔案。</p>
        <div class="variablelist">
          <dl class="variablelist">
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.bug-control</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>將安裝至 <span class="emphasis"><em>binarypackage</em></span> 套件的 <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/control</strong></span> 位置。另請參考<a class="xref" href="ch05.zh-tw.html#bug" title="5.24. 錯誤報告">節 5.24, “錯誤報告”</a>。</dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.bug-presubj</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>將安裝至 <span class="emphasis"><em>binarypackage</em></span> 套件的 <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/presubj</strong></span> 位置。另請參考<a class="xref" href="ch05.zh-tw.html#bug" title="5.24. 錯誤報告">節 5.24, “錯誤報告”</a>。</dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.bug-script</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>將安裝至 <span class="emphasis"><em>binarypackage</em></span> 套件的 <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span> or <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/script</strong></span> 位置。另請參考<a class="xref" href="ch05.zh-tw.html#bug" title="5.24. 錯誤報告">節 5.24, “錯誤報告”</a>。</dd>
            <dt>
              <span class="term">
                <span class="emphasis">
                  <em>binarypackage</em>
                </span>
                <span class="strong">
                  <strong>.bash-completion</strong>
                </span>
              </span>
            </dt>
            <dd>
              <p class="simpara">列出需要安裝的 <code class="literal">bash</code> 補全指令碼。</p>
              <p class="simpara">需要在構建環境和使用者環境內均安裝 <code class="literal">bash-completion</code> 套件。</p>
              <p class="simpara">另請參考<span class="strong"><strong>dh_bash-completion</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>clean</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出（構建前）未被 <span class="strong"><strong>dh_auto_clean</strong></span> 命令清理，且需要手工清理的檔案。</p>
              <p class="simpara">另請參考 <span class="strong"><strong>dh_auto_clean</strong></span>(1) 和 <span class="strong"><strong>dh_clean</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>compat</strong></span> <sup><span class="strong"><strong>-x1</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">設定 <span class="strong"><strong>debhelper</strong></span> 相容等級（當前為“<span class="strong"><strong>9</strong></span>”）。</p>
              <p class="simpara">另請參考 <span class="strong"><strong>debhelper</strong></span>(8) 中“COMPATIBILITY LEVELS”一節。</p>
            </dd>
            <dt>
              <span class="term">
                <span class="emphasis">
                  <em>binarypackage</em>
                </span>
                <span class="strong">
                  <strong>.conffile</strong>
                </span>
              </span>
            </dt>
            <dd>
              <p class="simpara">如果相容等級大於 3（“compat &gt;= 3”），您沒有建立該檔案的必要，因為所有 <span class="strong"><strong>etc/</strong></span> 目錄下的檔案都是配置檔案（conffiles）。</p>
              <p class="simpara">如果您正要打包的程式要求每個使用者都對 <span class="strong"><strong>/etc</strong></span> 目錄下的配置檔案進行修改，可以採取兩種常見辦法使其不作為 conffile 配置檔案出現，避免 <span class="strong"><strong>dpkg</strong></span> 命令處理套件時給出不必要的處理選項。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">在 <span class="strong"><strong>/etc</strong></span> 目錄下建立一個符號連結，指向 <span class="strong"><strong>/var</strong></span> 目錄下的某些檔案；實際存在的檔案則使用維護者指令碼（maintainer script）予以建立。</li>
                  <li class="listitem">使用維護者指令碼（maintainer script）在 <span class="strong"><strong>/etc</strong></span> 目錄下建立並維護配置所需的檔案。</li>
                </ul>
              </div>
              <p class="simpara">另請參考 <span class="strong"><strong>dh_installdeb</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term">
                <span class="emphasis">
                  <em>binarypackage</em>
                </span>
                <span class="strong">
                  <strong>.config</strong>
                </span>
              </span>
            </dt>
            <dd>這是 <span class="strong"><strong>debconf</strong></span> <span class="strong"><strong>config</strong></span> 指令碼，用來在配置套件時向用戶詢問任何必需的問題。另請參見<a class="xref" href="ch05.zh-tw.html#debconf" title="5.19. debconf">節 5.19, “debconf”</a>。</dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.cron.hourly</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包內的 <span class="strong"><strong>etc/cron/hourly/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">另請參見 <span class="strong"><strong>dh_installcron</strong></span>(1) 和 <span class="strong"><strong>cron</strong></span>(8)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.cron.daily</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包內的 <span class="strong"><strong>etc/cron/daily/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">另請參見 <span class="strong"><strong>dh_installcron</strong></span>(1) 和 <span class="strong"><strong>cron</strong></span>(8)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.cron.weekly</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包內的 <span class="strong"><strong>etc/cron/weekly/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">另請參見 <span class="strong"><strong>dh_installcron</strong></span>(1) 和 <span class="strong"><strong>cron</strong></span>(8)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.cron.monthly</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包內的 <span class="strong"><strong>etc/cron/monthly/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">另請參見 <span class="strong"><strong>dh_installcron</strong></span>(1) 和 <span class="strong"><strong>cron</strong></span>(8)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.cron.d</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包內的 <span class="strong"><strong>etc/cron.d/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installcron</strong></span>(1)、<span class="strong"><strong>cron</strong></span>(8) 和 <span class="strong"><strong>crontab</strong></span>(5)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.default</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">若該檔案存在，它將被安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>etc/default/</strong></span><span class="emphasis"><em>binarypackage</em></span> 位置。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installinit</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.dirs</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出 <span class="emphasis"><em>binarypackage</em></span> 包中要建立的目錄。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installdirs</strong></span>(1)。</p>
              <p class="simpara">通常情況下您並不需要這麼做，因為所有的 <span class="strong"><strong>dh_install</strong></span>* 命令都會自動建立所需的目錄。請僅在遇到問題時考慮使用這一工具。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.doc-base</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">作為 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>doc-base</strong></span> 控制檔案進行安裝。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installdocs</strong></span>(1) 和 <span class="strong"><strong>doc-base</strong></span> 套件提供的 <a class="ulink" href="file:///usr/share/doc/doc-base/doc-base.html/index.html">Debian doc-base 手冊</a>。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.docs</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出要安裝在 <span class="emphasis"><em>binarypackage</em></span> 包中的文件檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installdocs</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.emacsen-compat</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>usr/lib/emacsen-common/packages/compat/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installemacsen</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.emacsen-install</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>usr/lib/emacsen-common/packages/install/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installemacsen</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.emacsen-remove</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>usr/lib/emacsen-common/packages/remove/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installemacsen</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.emacsen-startup</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>usr/lib/emacsen-common/packages/startup/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installemacsen</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.examples</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出要安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中 <span class="strong"><strong>usr/share/doc/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/examples/</strong></span> 位置下的範例檔案或目錄。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installexamples</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term">
                <span class="strong">
                  <strong>gbp.conf</strong>
                </span>
              </span>
            </dt>
            <dd>
              <p class="simpara">如果該檔案存在，它將作為 <span class="strong"><strong>gbp</strong></span> 命令的配置檔案發揮作用。</p>
              <p class="simpara">參見 <span class="strong"><strong>gbp.conf</strong></span>(5)、<span class="strong"><strong>gbp</strong></span>(1) 和 <span class="strong"><strong>git-buildpackage</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.info</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出要安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 info 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installinfo</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.init</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>etc/init.d/</strong></span><span class="emphasis"><em>binarypackage</em></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installinit</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.install</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出未被 <span class="strong"><strong>dh_auto_install</strong></span> 命令安裝的其它應當安裝的檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_install</strong></span>(1) 和 <span class="strong"><strong>dh_auto_install</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>license-examples/</strong></span>* <sup><span class="strong"><strong>-x4</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">這是 <span class="strong"><strong>debmake</strong></span> 命令生成的版權宣告檔案示例，請用它們作為 <span class="strong"><strong>debian/copyright</strong></span> 檔案的參考。</p>
              <p class="simpara">請在最終工作成果中刪除這些檔案。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.links</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出要生成符號連結的原始檔和目標檔案對。每一對連結均應在單獨的一行中列出，源檔案和目標檔案之間使用空白字元分隔。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_link</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.lintian-overrides</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至套件構建目錄的 <span class="strong"><strong>usr/share/lintian/overrides/</strong></span><span class="emphasis"><em>binarypackage</em></span> 位置。該檔案用於消除 <span class="strong"><strong>lintian</strong></span> 錯誤生成的診斷資訊。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_lintian</strong></span>(1)、<span class="strong"><strong>lintian</strong></span>(1) 和 <a class="ulink" href="https://lintian.debian.org/manual/index.html">Lintian 使用者手冊</a>。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>manpage.</strong></span>* <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">這些檔案是 <span class="strong"><strong>debmake</strong></span> 命令生成的 man 手冊頁模板檔案。請將其重新命名為合適的檔名並更新其內容。</p>
              <p class="simpara">Debian 的政策要求套件為其包含的每個程式、工具和函式同時提供一份相關的手冊頁。手冊頁使用 <span class="strong"><strong>nroff</strong></span>(1) 語法寫成。</p>
              <p class="simpara">如果您不熟悉如何編寫使用者手冊頁，請以 <span class="strong"><strong>manpage.asciidoc</strong></span> 或 <span class="strong"><strong>manpage.1</strong></span> 為起點。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.manpages</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">列出要安裝的 man 手冊頁。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installman</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.menu</strong></span> （已過時，不再安裝）</span>
            </dt>
            <dd>
              <p class="simpara"><a class="ulink" href="https://bugs.debian.org/741573">tech-ctte #741573</a> 決定“Debian 應該在合適的情況下使用 <span class="strong"><strong>.desktop</strong></span> 檔案”。</p>
              <p class="simpara">安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>usr/share/menu/</strong></span><span class="emphasis"><em>binarypackage</em></span> Debian 選單文件。</p>
              <p class="simpara">參見 <span class="strong"><strong>menufile</strong></span>(5) 以瞭解其格式。另請參見 <span class="strong"><strong>dh_installmenu</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term">
                <span class="strong">
                  <strong>NEWS</strong>
                </span>
              </span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="strong"><strong>usr/share/doc/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/NEWS.Debian</strong></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installchangelogs</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>patches/</strong></span>*</span>
            </dt>
            <dd>
              <p class="simpara">這是 <span class="strong"><strong>-p1</strong></span> 補丁檔案的集合，它們將在使用源程式碼構建之前應用在上游原始碼上。</p>
              <p class="simpara">參見 <span class="strong"><strong>dpkg-source</strong></span>(1)、<a class="xref" href="ch03.zh-tw.html#quilt-setup" title="3.4. quilt">節 3.4, “quilt”</a> 和 <a class="xref" href="ch04.zh-tw.html#alt-patch" title="4.8. 第三步（備選）：修改上游原始碼">節 4.8, “第三步（備選）：修改上游原始碼”</a>。</p>
              <p class="simpara"><span class="strong"><strong>debmake</strong></span> 預設不會生成補丁檔案。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>patches/series</strong></span> <sup><span class="strong"><strong>-x1</strong></span></sup></span>
            </dt>
            <dd><span class="strong"><strong>patches/</strong></span>* 補丁檔案的應用順序。</dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.preinst</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup>, </span>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.postinst</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup>, </span>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.prerm</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup>, </span>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.postrm</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">這些維護者指令碼將安裝至套件的 <span class="strong"><strong>DEBIAN</strong></span> 目錄下。</p>
              <p class="simpara">在這些指令碼中，<span class="strong"><strong>#DEBHELPER#</strong></span> 記號將由其它 <span class="strong"><strong>debhelper</strong></span> 命令進行處理，將其替換為相應的 shell 指令碼片段。</p>
              <p class="simpara">參考《Debian 政策手冊》的 <span class="strong"><strong>dh_installdeb</strong></span>(1) 和 <a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-maintainerscripts">第六章 - 套件維護指令碼和安裝過程</a> 一節。</p>
              <p class="simpara">參考《Debian 政策手冊》的 <span class="strong"><strong>debconf-devel</strong></span>(7) 和 <a class="ulink" href="https://www.debian.org/doc/debian-policy/#prompting-in-maintainer-scripts">3.9.1 維護者指令碼中的使用者互動提示</a> 一節。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>README.Debian</strong></span> <sup><span class="strong"><strong>-x1</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="strong"><strong>debian/control</strong></span> 檔案列出的第一個二進位制套件中的 <span class="strong"><strong>usr/share/doc/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/README.Debian</strong></span> 位置。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installdocs</strong></span>(1)。</p>
              <p class="simpara">該檔案提供了針對該 Debian 套件的資訊。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.service</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">如果該檔案存在，它將被安裝到 <span class="emphasis"><em>binarypackage</em></span> 包下面的 <span class="strong"><strong>lib/systemd/system/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.service</strong></span> 位置。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_systemd_enable</strong></span>(1)、<span class="strong"><strong>dh_systemd_start</strong></span>(1) 和 <span class="strong"><strong>dh_installinit</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>source/format</strong></span> <sup><span class="strong"><strong>-x1</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">Debian 套件格式。</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">使用“<span class="strong"><strong>3.0 (quilt)</strong></span>”以製作這個非原生套件（推薦）</li>
                  <li class="listitem">使用“<span class="strong"><strong>3.0 (native)</strong></span>”以製作這個原生套件</li>
                </ul>
              </div>
              <p class="simpara">參見 <span class="strong"><strong>dpkg-source</strong></span>(1) 的“原始碼包格式”一節。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>source/lintian-overrides</strong></span> 或 <span class="strong"><strong>source.lintian-overrides</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">這些檔案不會最終被安裝，但 <span class="strong"><strong>lintian</strong></span> 會對它們進行掃描以提供原始碼包的 override 資訊。</p>
              <p class="simpara">另請參考 <span class="strong"><strong>dh_lintian</strong></span>(1) 和 <span class="strong"><strong>lintian</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>source/local-options</strong></span> <sup><span class="strong"><strong>-x1</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara"><span class="strong"><strong>dpkg-source</strong></span> 命令使用此內容作為它的選項，比較重要的選項有：</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
                    <span class="strong">
                      <strong>unapply-patches</strong>
                    </span>
                  </li>
                  <li class="listitem">
                    <span class="strong">
                      <strong>abort-on-upstream-changes</strong>
                    </span>
                  </li>
                  <li class="listitem">
                    <span class="strong">
                      <strong>auto-commit</strong>
                    </span>
                  </li>
                  <li class="listitem">
                    <span class="strong">
                      <strong>single-debian-patch</strong>
                    </span>
                  </li>
                </ul>
              </div>
              <p class="simpara">該檔案不會包含在生成的原始碼包中，僅對維護者在版本控制系統中維護套件有意義。</p>
              <p class="simpara">參見 <span class="strong"><strong>dpkg-source</strong></span>(1) 中的“檔案格式”一節。</p>
            </dd>
            <dt>
              <span class="term">
                <span class="strong">
                  <strong>source/local-patch-header</strong>
                </span>
              </span>
            </dt>
            <dd>
              <p class="simpara">自由格式的文字，將被包含在自動生成補丁的頂部。</p>
              <p class="simpara">該檔案不會包含在生成的原始碼包中，僅對維護者在版本控制系統中維護套件有意義。</p>
              <p class="simpara">+ 參見 <span class="strong"><strong>dpkg-source</strong></span>(1) 的“檔案格式”一節。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.symbols</strong></span> <sup><span class="strong"><strong>-x2</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">這些符號檔案如果存在，將交由 <span class="strong"><strong>dpkg-gensymbols</strong></span> 命令進行處理和安裝。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_makeshlibs</strong></span>(1) 和 <a class="xref" href="ch05.zh-tw.html#symbols" title="5.18.1. 程式庫符號">節 5.18.1, “程式庫符號”</a>。</p>
            </dd>
            <dt>
              <span class="term">
                <span class="emphasis">
                  <em>binarypackage</em>
                </span>
                <span class="strong">
                  <strong>.templates</strong>
                </span>
              </span>
            </dt>
            <dd>這是 <span class="strong"><strong>debconf</strong></span> <span class="strong"><strong>模板</strong></span>檔案，用於在安裝過程中向用戶詢問必需的問題以正確配置套件。請參閱 <a class="xref" href="ch05.zh-tw.html#debconf" title="5.19. debconf">節 5.19, “debconf”</a>。</dd>
            <dt>
              <span class="term">
                <span class="strong">
                  <strong>tests/control</strong>
                </span>
              </span>
            </dt>
            <dd>這是一個 RFC822 格式的測試元資料檔案，定義在 <a class="ulink" href="http://dep.debian.net/deps/dep8/">DEP-8</a>。參見 <span class="strong"><strong>autopkgtest</strong></span>(1) 和<a class="xref" href="ch05.zh-tw.html#ci" title="5.22. 持續整合">節 5.22, “持續整合”</a>。</dd>
            <dt>
              <span class="term">
                <span class="strong">
                  <strong>TODO</strong>
                </span>
              </span>
            </dt>
            <dd>
              <p class="simpara">安裝至 <span class="strong"><strong>debian/control</strong></span> 檔案列出的第一個二進位制包中的 <span class="strong"><strong>usr/share/doc/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/TODO.Debian</strong></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installdocs</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.tmpfile</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">如果該檔案存在，它將被安裝至 <span class="emphasis"><em>binarypackage</em></span> 包中的 <span class="strong"><strong>usr/lib/tmpfiles.d/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.conf</strong></span> 檔案。</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_systemd_enable</strong></span>(1)、<span class="strong"><strong>dh_systemd_start</strong></span>(1) 和 <span class="strong"><strong>dh_installinit</strong></span>(1)。</p>
            </dd>
            <dt>
              <span class="term"><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.upstart</strong></span> <sup><span class="strong"><strong>-x3</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">如果該檔案存在，它將被安裝至套件構建目錄的 etc/init/package.conf 位置。（已棄用）</p>
              <p class="simpara">參見 <span class="strong"><strong>dh_installinit</strong></span>(1) 和 <a class="xref" href="ch08.zh-tw.html#emptypkg" title="8.1. 挑選最好的模板">節 8.1, “挑選最好的模板”</a>。</p>
            </dd>
            <dt>
              <span class="term"><span class="strong"><strong>watch</strong></span> <sup><span class="strong"><strong>-x1</strong></span></sup></span>
            </dt>
            <dd>
              <p class="simpara">用於下載最新上游版本的 <span class="strong"><strong>uscan</strong></span> 命令的控制檔案。</p>
              <p class="simpara">該控制檔案也可配置以使用其 GPG 簽名自動驗證上游 tarball 的真實性（參見 <a class="xref" href="ch05.zh-tw.html#signing-key" title="5.9. debian/upstream/signing-key.asc">節 5.9, “debian/upstream/signing-key.asc”</a>）。</p>
              <p class="simpara">參見 <a class="xref" href="ch05.zh-tw.html#dfsg" title="5.10. debian/watch 和 DFSG">節 5.10, “debian/watch 和 DFSG”</a> 和 <span class="strong"><strong>uscan</strong></span>(1)。</p>
            </dd>
          </dl>
        </div>
        <p>這裡給出針對上面列表中資訊的一些額外提醒。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">對只生成一個二進位制包的情況，列表檔名中的 <span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.</strong></span> 這一部分可以不出現。</li>
            <li class="listitem">對有多個二進位制包的原始碼包，一個缺少檔名裡 <span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.</strong></span> 部分的配置檔案，會被應用於 <span class="strong"><strong>debian/control</strong></span> 裡列出的第一個二進位制包。</li>
            <li class="listitem">在生成多個二進位制包的情況下，各個二進位制包可以分別指定配置檔案；只需在其對應配置檔案的檔名之前加上它們各自對應的包名即可，如 <span class="emphasis"><em>package-1</em></span><span class="strong"><strong>.install</strong></span>、<span class="emphasis"><em>package-2</em></span><span class="strong"><strong>.install</strong></span> 等等。</li>
            <li class="listitem"><span class="strong"><strong>debmake</strong></span> 可能沒有自動生成某些模板配置文件。如遇到這種情況，您可以使用文字編輯器手動建立遺失的檔案。</li>
            <li class="listitem"><span class="strong"><strong>debmake</strong></span> 命令生成的帶額外 <span class="strong"><strong>.ex</strong></span> 字尾名的配置檔案必須在移除這個多餘字尾名後才能發揮作用。</li>
            <li class="listitem">您應當刪除 <span class="strong"><strong>.ex</strong></span> 命令生成但對您無用的配置模板檔案。</li>
            <li class="listitem">請按需複製配置模板檔案以匹配其對應的二進位制包名稱以及您的需求。</li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="custom"/>5.12. Debian 打包的定製化</h2>
            </div>
          </div>
        </div>
        <p>我們來重新歸納一下 Debian 打包定製化的相關內容。</p>
        <p>所有對 Debian 套件進行定製化的資料都存在於 <span class="strong"><strong>debian/</strong></span> 目錄中。我們在<a class="xref" href="ch04.zh-tw.html#step-maintainer" title="4.6. 第三步：編輯模板檔案">節 4.6, “第三步：編輯模板檔案”</a>這裡給出了一個簡單的例子。通常情況下，定製化會涉及以下各個專案：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">Debian 套件構建系統可以經由 <span class="strong"><strong>debian/rules</strong></span> 檔案進行定製（參見<a class="xref" href="ch05.zh-tw.html#customrules" title="5.4.3. 設定 debian/rules">節 5.4.3, “設定 debian/rules”</a>）。</li>
            <li class="listitem">可以使用額外的配置檔案（如 <span class="strong"><strong>debian/</strong></span> directory 目錄下的 <span class="emphasis"><em>package</em></span><span class="strong"><strong>.install</strong></span> 和 <span class="emphasis"><em>package</em></span><span class="strong"><strong>.docs</strong></span> 檔案）以配合來自 <span class="strong"><strong>debhelper</strong></span> 套件的 <span class="strong"><strong>dh_</strong></span>* 命令設定 Debian 套件檔案的安裝路徑等資訊（請參見 <a class="xref" href="ch05.zh-tw.html#debianconf" title="5.11. 其它 debian/* 檔案">節 5.11, “其它 debian/* 檔案”</a>）。</li>
          </ul>
        </div>
        <p>如果以上提到的手段仍然不足以製作滿足要求的 Debian 套件的話，對上游原始碼的修改應當使用 <span class="strong"><strong>-p1</strong></span> 補丁檔案存放在打包原始碼樹 <span class="strong"><strong>debian/patches/</strong></span> 目錄下。這些補丁將按照 <span class="strong"><strong>debian/patches/series</strong></span> 檔案所規定的順序在構建套件之前應用（參見 <a class="xref" href="ch05.zh-tw.html#patches" title="5.8. debian/patches/*">節 5.8, “debian/patches/*”</a>）。<a class="xref" href="ch04.zh-tw.html#alt-patch" title="4.8. 第三步（備選）：修改上游原始碼">節 4.8, “第三步（備選）：修改上游原始碼”</a> 這裡給出了一些簡單的例子。</p>
        <p>您應當以引入最少修改的方式解決打包中出現的根本問題。所生成的套件應當考慮到未來的更新需求並有一定的健壯性。</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[注意]" src="images/note.png"/>
              </td>
              <th align="left">注意</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>如果補丁對上游有所幫助的話，也請將解決根本問題的補丁反饋給上游作者和維護者。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="vcs"/>5.13. 在版本控制系統中進行記錄（標準）</h2>
            </div>
          </div>
        </div>
        <p>通常情況下，Debian 打包活動使用 <a class="ulink" href="https://en.wikipedia.org/wiki/Git">Git</a> 作為<a class="ulink" href="https://en.wikipedia.org/wiki/Version_control">版本控制系統（VCS）</a>進行記錄；通常會用到下列的分支。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>master</strong></span> 分支</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">記錄用於 Debian 打包的原始碼樹。</li>
                  <li class="listitem">原始碼樹的上游部分將照原樣記錄，不做修改。</li>
                  <li class="listitem">Debian 打包中需要對上游原始碼所作的修改記錄在 <span class="strong"><strong>debian/patches/</strong></span> 目錄中，以 <span class="strong"><strong>-p1</strong></span> 等級的補丁形式存在。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>upstream</strong></span> 分支</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">記錄從上游釋出的 tarball（原始碼壓縮檔案）解壓縮所得到的原始碼樹。</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>新增一個 <span class="strong"><strong>.gitignore</strong></span> 檔案並將 <span class="strong"><strong>.pc</strong></span> 檔案列入其中也是一個好主意。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>可以在 <span class="strong"><strong>debian/source/local-options</strong></span> 檔案中新增 <span class="strong"><strong>unapply-patches</strong></span> 和 <span class="strong"><strong>abort-on-upstream-changes</strong></span> 這兩行以保持上游原始碼處於未修改狀態。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>您也可以使用除 <span class="strong"><strong>upstream</strong></span> 分支以外其它名稱的分支追蹤上游版本控制資料以方便揀選補丁。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="alt-vcs"/>5.14. 在版本控制系統中進行記錄（備選方案）</h2>
            </div>
          </div>
        </div>
        <p>您也可以選擇不建立 <span class="strong"><strong>-p1</strong></span> 等級的補丁。這時，您可以使用下列分支來記錄 Debian 打包活動。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>master</strong></span> 分支</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">記錄用於 Debian 打包的原始碼樹。</li>
                  <li class="listitem">原始碼樹的上游部分在應用了為 Debian 打包所作的修改之後進行記錄。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>upstream</strong></span> 分支</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">記錄從上游釋出的 tarball（原始碼壓縮檔案）解壓縮所得到的原始碼樹。</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>如下在 <span class="strong"><strong>debian/</strong></span> 目錄下額外新增一些檔案即可達到目的。</p>
        <pre class="screen"> $ tar -xvzf &lt;package-version&gt;.tar.gz
 $ ln -sf &lt;package_version&gt;.orig.tar.gz
 $ cd &lt;package-version&gt;/
 ... hack...hack...
 $ echo "single-debian-patch" &gt;&gt; debian/source/local-options
 $ cat &gt;debian/source/local-patch-header &lt;&lt;END
 This patch contains all the Debian-specific changes mixed
 together. To review them separately, please inspect the VCS
 history at https://git.debian.org/?=collab-maint/foo.git.</pre>
        <p>如此可讓 Debian 打包過程（<span class="strong"><strong>dpkg-buildpackage</strong></span>、<span class="strong"><strong>debuild</strong></span> 等）所呼叫的 <span class="strong"><strong>dpkg-source</strong></span> 命令自動生成一個 <span class="strong"><strong>-p1</strong></span> 等級的補丁檔案 <span class="strong"><strong>debian/patches/debian-changes</strong></span>。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>這種做法可以應用在任何版本控制工具中。這麼做會把所有修改合併到同一個補丁檔案中而丟失其開發歷史，因此請務必保持版本控制系統的資料公開可見。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p><span class="strong"><strong>debian/source/local-options</strong></span> 和 <span class="strong"><strong>debian/source/local-patch-header</strong></span> 檔案只用於在版本控制系統中記錄資訊。它們不應包含在 Debian 原始碼包中。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="build-noextra"/>5.15. 構建套件時排除不必要的內容</h2>
            </div>
          </div>
        </div>
        <p>在某些情況下，直接使用自動生成的 Debian 原始碼包會引入不必要的一些內容。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">上游原始碼樹可能由某個版本控制系統進行管理。直接從這個原始碼樹進行構建時，所生成的 Debian 原始碼包會包含來自版本控制系統的多餘檔案。</li>
            <li class="listitem">上游原始碼樹可能包含了一些自動生成的檔案。當從這個原始碼樹重新構建套件時，所生成的 Debian 原始碼包會包含這些自動生成的不必要的檔案。</li>
          </ul>
        </div>
        <p>通常情況下，<a class="xref" href="ch03.zh-tw.html#devscripts-setup" title="3.5. devscripts">節 3.5, “devscripts”</a> 中設定的用於 <span class="strong"><strong>dpkg-source</strong></span> 命令的 <span class="strong"><strong>-i</strong></span> 和 <span class="strong"><strong>-I</strong></span> 選項可以避免這些問題。這裡 <span class="strong"><strong>-i</strong></span> 針對非原生套件而 <span class="strong"><strong>-I</strong></span> 則針對原生套件。請參見 <span class="strong"><strong>dpkg-source</strong></span>(1) 和“<span class="strong"><strong>dpkg-source --help</strong></span>”的輸出。</p>
        <p>以下幾種方法均可避免引入不必要的內容。</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="rules-clean"/>5.15.1. 使用 debian/rules clean 進行修復</h3>
              </div>
            </div>
          </div>
          <p>含有多餘檔案的問題可以使用“<span class="strong"><strong>debian/rules clean</strong></span>”這個 Makefile 目標的呼叫來解決，只需在該目標內刪除檔案即可。它也能處理自動生成的檔案。</p>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/note.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>執行 <span class="strong"><strong>dpkg-buildpackage</strong></span> 命令時，它會在“<span class="strong"><strong>dpkg-source --build</strong></span>”命令之前被調用“<span class="strong"><strong>debian/rules clean</strong></span>”目標，而“<span class="strong"><strong>dpkg-source --build</strong></span>”命令會忽略被刪除的檔案。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="git-clean"/>5.15.2. 使用版本控制系統修復</h3>
              </div>
            </div>
          </div>
          <p>含有多餘檔案的問題還可以使用版本控制系統修復；具體來說，可以在首次構建之前將原始碼樹提交到版本控制系統中。</p>
          <p>您可以在第二次構建套件之前恢復最初的原始碼樹。例如：</p>
          <pre class="screen"> $ git reset --hard
 $ git clean -dfx
 $ debuild</pre>
          <p>這裡工作的原理是 <span class="strong"><strong>dpkg-source</strong></span> 命令會忽略原始碼樹中典型的版本控制系統相關的檔案，相關的設定可以在 <a class="xref" href="ch03.zh-tw.html#devscripts-setup" title="3.5. devscripts">節 3.5, “devscripts”</a> 的 <span class="strong"><strong>DEBUILD_DPKG_BUILDPACKAGE_OPTS</strong></span> 設定中找到。</p>
          <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Tip">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[提示]" src="images/tip.png"/>
                </td>
                <th align="left">提示</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>如果原始碼樹未受版本控制系統管理，您可以在第一次構建之前執行“<span class="strong"><strong>git init; git add -A .; git commit</strong></span>”來初始化。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="extend-diff-ignore"/>5.15.3. 使用 extend-diff-ignore 修復</h3>
              </div>
            </div>
          </div>
          <p>這種做法僅適合非原生套件。</p>
          <p>含有多餘檔案的問題可以使用在 <span class="strong"><strong>debian/source/options</strong></span> 檔案中新增忽略資訊的方式解決，令編譯系統忽略多餘的檔案；具體配置語法為新增 <span class="strong"><strong>extend-diff-ignore=…</strong></span>”一行內容。</p>
          <p>如需排除 <span class="strong"><strong>config.sub</strong></span>、<span class="strong"><strong>config.guess</strong></span> 和 <span class="strong"><strong>Makefile</strong></span> 檔案：</p>
          <pre class="screen"># Don't store changes on autogenerated files
extend-diff-ignore = "(^|/)(config\.sub|config\.guess|Makefile)$"</pre>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/note.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>即使您無法刪除檔案，這種做法總可以正常工作。您無需在每次構建之前手動刪除檔案並手動進行恢復。</p>
                </td>
              </tr>
            </table>
          </div>
          <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Tip">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[提示]" src="images/tip.png"/>
                </td>
                <th align="left">提示</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>如果您轉而使用 <span class="strong"><strong>debian/source/local-options</strong></span> 檔案，您可以在生成的原始碼包中隱藏該項設定。這種做法在本地非標準版本控制系統和您的打包工作有衝突時可能有用。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="tar-ignore"/>5.15.4. 使用 tar-ignore 修復</h3>
              </div>
            </div>
          </div>
          <p>這個方法只適用於原生套件。</p>
          <p>您可以使用這種做法在生成的原始碼包中排除某些檔案；只需在 <span class="strong"><strong>debian/source/options</strong></span> 檔案或者 <span class="strong"><strong>debian/source/local-options</strong></span> 檔案中新增含有萬用字元的 “<span class="strong"><strong>tar-ignore=…</strong></span>”一行內容即可。</p>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/note.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>例如，如果您的原生套件的原始碼包使用了一些具有 <span class="strong"><strong>.o</strong></span> 副檔名的檔案作為測試資料的話，<a class="xref" href="ch03.zh-tw.html#devscripts-setup" title="3.5. devscripts">節 3.5, “devscripts”</a> 的預設設定就過於激進了，這些檔案會被當作多餘的檔案預設自動排除。如需解決這個問題，您可以在 <a class="xref" href="ch03.zh-tw.html#devscripts-setup" title="3.5. devscripts">節 3.5, “devscripts”</a> 中的 <span class="strong"><strong>DEBUILD_DPKG_BUILDPACKAGE_OPTS</strong></span> 引數中移除 <span class="strong"><strong>-I</strong></span> 選項，同時在每個套件的 <span class="strong"><strong>debian/source/local-options</strong></span> 檔案中新增 “<span class="strong"><strong>tar-ignore=…</strong></span>”的配置行。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="build"/>5.16. 上游構建系統</h2>
            </div>
          </div>
        </div>
        <p>上游的構建系統設計為經過數個步驟以從原始碼發行檔案得到並在系統中安裝所生成的二進位制檔案。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>在嘗試製作 Debian 套件之前，您應當熟悉瞭解上游原始碼所使用的構建系統並嘗試構建軟體。</p>
              </td>
            </tr>
          </table>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="autotools"/>5.16.1. Autotools</h3>
              </div>
            </div>
          </div>
          <p>使用 Autotools（<span class="strong"><strong>autoconf</strong></span> + <span class="strong"><strong>automake</strong></span>）包括四個步驟。</p>
          <div class="orderedlist">
            <ol class="orderedlist">
              <li class="listitem">設定構建系統（“<span class="strong"><strong>vim configure.ac Makefile.am</strong></span>”和“<span class="strong"><strong>autoreconf -ivf</strong></span>”）</li>
              <li class="listitem">配置構建系統（“<span class="strong"><strong>./configure</strong></span>”）</li>
              <li class="listitem">構建原始碼樹（“<span class="strong"><strong>make</strong></span>”）</li>
              <li class="listitem">安裝二進位制檔案（“<span class="strong"><strong>make install</strong></span>”）</li>
            </ol>
          </div>
          <p>第一步通常由上游維護者完成並使用“<span class="strong"><strong>make dist</strong></span>”命令生成上游原始碼壓縮包（tarball）。（所生成的原始碼壓縮包不僅含有原始的版本控制系統中的檔案，也含有其它生成的檔案。）</p>
          <p>套件維護者至少要處理第二步到第四步的工作。可以在 <span class="strong"><strong>debian/rules</strong></span> 檔案中使用“<span class="strong"><strong>dh $@ --with autotools-dev</strong></span>”的命令以自動處理這些步驟。</p>
          <p>套件維護者也可以想要處理第一步到第四步所有的工作。這時，可以在 <span class="strong"><strong>debian/rules</strong></span> 檔案中使用“<span class="strong"><strong>dh $@ --with autoreconf</strong></span>”命令。這樣會將所有自動生成的檔案更新到最新的版本，通常可以提供對新架構的更好支援。</p>
          <p>對於使用 <span class="strong"><strong>compat</strong></span> level（相容等級）<span class="strong"><strong>10</strong></span> 或更高等級的原始碼包，使用最簡單的“<span class="strong"><strong>dh $@</strong></span>”而不帶“<span class="strong"><strong>--with autoreconf</strong></span>”選項已可自動處理上述第一步到第四步全部內容。</p>
          <p>如果您想進一步學習 Autotools，請參考：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
<a class="ulink" href="https://www.gnu.org/software/automake/manual/index.html">GNU Automake 文件</a>
</li>
              <li class="listitem">
<a class="ulink" href="https://www.gnu.org/software/autoconf/manual/index.html">GNU Autoconf 文件</a>
</li>
              <li class="listitem">
<a class="ulink" href="https://www.lrde.epita.fr/~adl/autotools.html">Autotools 教材</a>
</li>
              <li class="listitem">
<a class="ulink" href="https://www.dwheeler.com/autotools/introduction-autotools.pdf">對 autotools 的介紹（autoconf、automake 和 libtool）</a>
</li>
              <li class="listitem">
<a class="ulink" href="https://autotools.io/index.html">Autotools 流言終結者</a>
</li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="cmake"/>5.16.2. CMake</h3>
              </div>
            </div>
          </div>
          <p>使用 CMake 通常也包含四個步驟。</p>
          <div class="orderedlist">
            <ol class="orderedlist">
              <li class="listitem">設定構建系統（“<span class="strong"><strong>vim CMakeLists.txt config.h.in</strong></span>”）</li>
              <li class="listitem">配置構建系統（“<span class="strong"><strong>cmake</strong></span>”）</li>
              <li class="listitem">構建原始碼樹（“<span class="strong"><strong>make</strong></span>”）</li>
              <li class="listitem">安裝二進位制檔案（“<span class="strong"><strong>make install</strong></span>”）</li>
            </ol>
          </div>
          <p>上游原始碼包（tarball）不包含自動生成的檔案，通常是在第一步之後直接由 <span class="strong"><strong>tar</strong></span> 命令打包生成。</p>
          <p>套件維護者需要處理第二步到第四步的工作。</p>
          <p>如果您想進一步學習 CMake，請參考：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
<a class="ulink" href="https://cmake.org/">CMake</a>
</li>
              <li class="listitem">
<a class="ulink" href="https://cmake.org/cmake-tutorial/">CMake 教材</a>
</li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="distutils"/>5.16.3. Python distutils</h3>
              </div>
            </div>
          </div>
          <p>使用 Python distutils 通常包含三個步驟。</p>
          <div class="orderedlist">
            <ol class="orderedlist">
              <li class="listitem">設定並配置構建系統（“<span class="strong"><strong>vim setup.py</strong></span>”）</li>
              <li class="listitem">構建原始碼樹（“<span class="strong"><strong>python setup.py build</strong></span>”）</li>
              <li class="listitem">安裝二進位制檔案（“<span class="strong"><strong>python setup.py install</strong></span>”）</li>
            </ol>
          </div>
          <p>上游維護者通常會處理好第一步並使用“<span class="strong"><strong>python setup.py sdist</strong></span>”命令構建好上游原始碼包並進行發行。</p>
          <p>套件維護者需要處理第二步工作。在 <span class="strong"><strong>jessie</strong></span> 釋出後，打包時只需要在 <span class="strong"><strong>debian/rules</strong></span> 檔案中使用最簡單的“<span class="strong"><strong>dh $@</strong></span>”命令。</p>
          <p>其它構建系統，如 CMake，其使用方法和 Python 這裡的情況都很類似。</p>
          <p>要更多瞭解 Python3 和 <span class="strong"><strong>distutils</strong></span> 請參見：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
<a class="ulink" href="https://docs.python.org/3/">Python3</a>
</li>
              <li class="listitem">
<a class="ulink" href="https://docs.python.org/3.4/library/distutils.html#module-distutils">distutils</a>
</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="dbg"/>5.17. 除錯資訊</h2>
            </div>
          </div>
        </div>
        <p>Debian 軟體吧在構建時都會帶上除錯資訊；但打包生成二進位制套件時，這些打包資訊會按照《Debian 政策手冊》中<a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-files">第十章 - 檔案</a>的要求進行移除。</p>
        <p>參見</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">《Debian 開發者參考》中的 <a class="ulink" href="https://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html#bpp-dbg">6.7.9. 除錯套件的最佳實踐</a>。</li>
            <li class="listitem">“Debugging with gdb”中的 <a class="ulink" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Separate-Debug-Files.html#Separate-Debug-Files">18.2 單獨檔案中的除錯資訊</a></li>
            <li class="listitem"><span class="strong"><strong>dh_strip</strong></span>(1)</li>
            <li class="listitem"><span class="strong"><strong>strip</strong></span>(1)</li>
            <li class="listitem"><span class="strong"><strong>readelf</strong></span>(1)</li>
            <li class="listitem"><span class="strong"><strong>objcopy</strong></span>(1)</li>
            <li class="listitem">Debian 維基 <a class="ulink" href="https://wiki.debian.org/DebugPackage">除錯套件</a></li>
            <li class="listitem">Debian 維基 <a class="ulink" href="https://wiki.debian.org/AutomaticDebugPackages">自動除錯套件</a></li>
            <li class="listitem">Debian debian-devel 列表釋出的郵件：<a class="ulink" href="https://lists.debian.org/debian-devel/2015/08/msg00443.html">自動除錯套件狀態</a> (2015-08-15)</li>
          </ul>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="dbgsym"/>5.17.1. 新的 -dbgsym 套件（Stretch 9.0 或更新）</h3>
              </div>
            </div>
          </div>
          <p>除錯資訊由 <span class="strong"><strong>dh_strip</strong></span> 命令的預設行為自動打包並進行移除。所分離得到的除錯套件名具有 <span class="strong"><strong>-dbgsym</strong></span> 的字尾。</p>
          <p>If there were no <span class="strong"><strong>-dbg</strong></span> packages defined in the <span class="strong"><strong>debian/control</strong></span> file, no special care is needed for updating the package after the Stretch 9.0 release.</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem"><span class="strong"><strong>debian/rules</strong></span> 檔案不應顯性包括 <span class="strong"><strong>dh_strip</strong></span> 。</li>
              <li class="listitem">把 <span class="strong"><strong>debian/compat</strong></span> 設定到 <span class="strong"><strong>11</strong></span> 或更新版本。</li>
              <li class="listitem">把 <span class="strong"><strong>Build-Depends</strong></span> 設定為 <span class="strong"><strong>debhelper (&gt;=11~)</strong></span> 或更新的版本。</li>
            </ul>
          </div>
          <p>如果在 <span class="strong"><strong>debian/control</strong></span> 檔案中曾經定義過 <span class="strong"><strong>-dbg</strong></span> 套件，在 Stretch 9.0 釋出之後對舊套件更新需要進行額外的處理。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">在 <span class="strong"><strong>debian/control</strong></span> 檔案中刪除 <span class="strong"><strong>-dbg</strong></span> 套件定義的部分。</li>
              <li class="listitem">將 <span class="strong"><strong>debian/rules</strong></span> 檔案中“<span class="strong"><strong>dh_strip --dbg-package=</strong></span><span class="emphasis"><em>package”</em></span>這部分替換為“<span class="strong"><strong>dh_strip --dbgsym-migration=</strong></span><span class="emphasis"><em>package”</em></span>以避免自動產生的除錯套件與（現在過時的）<span class="strong"><strong>-dbg</strong></span> 檔案產生衝突。參見 <span class="strong"><strong>dh_strip</strong></span>(1)。</li>
              <li class="listitem">把 <span class="strong"><strong>debian/compat</strong></span> 設定到 <span class="strong"><strong>11</strong></span> 或更新版本。</li>
              <li class="listitem">把 <span class="strong"><strong>Build-Depends</strong></span> 設定為 <span class="strong"><strong>debhelper (&gt;=11~)</strong></span> 或更新的版本。</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="lib"/>5.18. 程式庫套件</h2>
            </div>
          </div>
        </div>
        <p>打包軟體程式庫需要您投入更多的工作。下面有一些打包軟體程式庫的提醒和建議：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">程式庫二進位制套件必須根據 <a class="xref" href="ch05.zh-tw.html#libnames" title="5.5.1.3. 程式庫套件名稱">節 5.5.1.3, “程式庫套件名稱”</a> 進行命名。</li>
            <li class="listitem">Debian 按照 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;/lib</strong></span><span class="emphasis"><em>foo-0.1</em></span><span class="strong"><strong>.so.</strong></span><span class="emphasis"><em>1.0.0</em></span> 這樣的路徑提供共享連結程式庫（參見 <a class="xref" href="ch05.zh-tw.html#multiarch" title="5.20. 多體系架構">節 5.20, “多體系架構”</a>）。</li>
            <li class="listitem">Debian 鼓勵在共享程式庫中使用帶版本的符號（見 <a class="xref" href="ch05.zh-tw.html#symbols" title="5.18.1. 程式庫符號">節 5.18.1, “程式庫符號”</a>）。</li>
            <li class="listitem">Debian 不提供 <span class="strong"><strong>*.la</strong></span> libtool 程式庫歸檔檔案。</li>
            <li class="listitem">Debian 不推薦使用、提供 <span class="strong"><strong>*.a</strong></span> 靜態程式庫檔案。</li>
          </ul>
        </div>
        <p>在打包共享程式庫軟體之前，請查閱：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">《Debian 政策手冊》的<a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-sharedlibs">第八章 - 共享程式庫</a></li>
            <li class="listitem">《Debian 政策手冊》的<a class="ulink" href="https://www.debian.org/doc/debian-policy/#libraries">10.2 軟體程式庫</a></li>
            <li class="listitem">《Debian 開發者參考》中的 <a class="ulink" href="https://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html#bpp-libraries">6.7.2. 軟體程式庫</a></li>
          </ul>
        </div>
        <p>如需研究其歷史背景，請參見：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara">
<a class="ulink" href="https://debconf4.debconf.org/talks/dependency-hell/img1.html">逃離依賴地獄</a> <a href="#ftn.idm3842" class="footnote" id="idm3842"><sup class="footnote">[15]</sup></a>
</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">該文件鼓勵在共享程式庫中使用帶版本的符號。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">
<a class="ulink" href="https://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html">Debian 程式庫打包指南</a> <a href="#ftn.idm3851" class="footnote" id="idm3851"><sup class="footnote">[16]</sup></a>
</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">也請閱讀<a class="ulink" href="https://lists.debian.org/debian-devel/2004/06/msg00069.html">這裡的公告</a>後面跟隨的討論串。</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="symbols"/>5.18.1. 程式庫符號</h3>
              </div>
            </div>
          </div>
          <p>Debian <span class="strong"><strong>lenny</strong></span>（5.0，2009年5月）中引入的 <span class="strong"><strong>dpkg</strong></span> 符號支援可以幫助我們管理同一共享鏈接程式庫套件的向後 ABI 相容性（backward ABI compatibility）。二進位制套件中的 <span class="strong"><strong>DEBIAN/symbols</strong></span> 檔案提供了每個符號及其對應的最小版本號。</p>
          <p>一個極其簡化的軟體程式庫打包流程大概如下所示。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p class="simpara">從前一個二進位制套件中使用“<span class="strong"><strong>dpkg-deb -e</strong></span>”命令解壓縮得到舊有的 <span class="strong"><strong>DEBIAN/symbols</strong></span> 檔案。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">或者，<span class="strong"><strong>mc</strong></span> 命令也可以用來解壓得到 <span class="strong"><strong>DEBIAN/symbols</strong></span> 檔案。</li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p class="simpara">將其複製為 <span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.symbols</strong></span> 檔案。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">如果這是第一次打包的話，可以只建立一個空檔案。</li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p class="simpara">構建二進位制套件。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p class="simpara">如果 <span class="strong"><strong>dpkg-gensymbols</strong></span> 命令警告添加了新的符號的話：</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist">
                          <li class="listitem">使用“<span class="strong"><strong>dpkg-deb -e</strong></span>”命令解壓得到更新的 <span class="strong"><strong>DEBIAN/symbols</strong></span> 檔案。</li>
                          <li class="listitem">將其中的 Debian 修訂版本號，例如 <span class="strong"><strong>-1</strong></span>，從檔案中去除。</li>
                          <li class="listitem">將其複製為 <span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.symbols</strong></span> 檔案。</li>
                          <li class="listitem">重新構建二進位制套件。</li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p class="simpara">如果 <span class="strong"><strong>dpkg-gensymbols</strong></span> 命令不報和新連結符號有關的警告：</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist">
                          <li class="listitem">您已完成了共享程式庫的打包工作。</li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
          <p>如需瞭解詳細資訊，您應當閱讀下列第一手參考資料。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">《Debian 政策手冊》的<a class="ulink" href="https://www.debian.org/doc/debian-policy/#the-symbols-system">8.6.3 符號（symbols）系統</a></li>
              <li class="listitem"><span class="strong"><strong>dh_makeshlibs</strong></span>(1)</li>
              <li class="listitem"><span class="strong"><strong>dpkg-gensymbols</strong></span>(1)</li>
              <li class="listitem"><span class="strong"><strong>dpkg-shlibdeps</strong></span>(1)</li>
              <li class="listitem"><span class="strong"><strong>deb-symbols</strong></span>(5)</li>
            </ul>
          </div>
          <p>您也應當檢視：</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">Debian 維基 <a class="ulink" href="https://wiki.debian.org/UsingSymbolsFiles">使用符號檔案</a></li>
              <li class="listitem">Debian 維基 <a class="ulink" href="https://wiki.debian.org/Projects/ImprovedDpkgShlibdeps">專案/改進的DpkgShlibdeps</a></li>
              <li class="listitem">Debian kde 團隊 <a class="ulink" href="https://pkg-kde.alioth.debian.org/symbolfiles.html">處理 symbols 檔案</a></li>
              <li class="listitem">
<a class="xref" href="ch08.zh-tw.html#autotools-multi" title="8.11. Autotools（多個二進位制套件）">節 8.11, “Autotools（多個二進位制套件）”</a>
</li>
              <li class="listitem">
<a class="xref" href="ch08.zh-tw.html#cmake-multi" title="8.12. CMake（多個二進位制套件）">節 8.12, “CMake（多個二進位制套件）”</a>
</li>
            </ul>
          </div>
          <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Tip">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[提示]" src="images/tip.png"/>
                </td>
                <th align="left">提示</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>對於 C++ 軟體程式庫或者其它一些難以追蹤符號變化的場景，請遵循《Debian 政策手冊》的 <span class="strong"><strong>-1</strong></span> 一節的內容。請確保這樣操作時事先刪除 <span class="strong"><strong>debmake</strong></span> 命令生成的空的 <span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.symbols</strong></span> 檔案。在這種情況下，應當轉而使用 <span class="strong"><strong>DEBIAN/shlibs</strong></span> 檔案。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="lib-trans"/>5.18.2. 程式庫變遷</h3>
              </div>
            </div>
          </div>
          <p>當您打包新版本的程式庫套件而且此次更新影響到其它的套件時，您必須向 <span class="strong"><strong>release.debian.org</strong></span> 偽套件提交一個變遷 bug 報告並附帶一個<a class="ulink" href="https://ben.debian.net/#_query_language">ben 檔案</a>；您可以使用 <span class="strong"><strong>reportbug</strong></span> 工具進行提交。提交後，請等待<a class="ulink" href="https://wiki.debian.org/Teams/ReleaseTeam">發行團隊</a>的稽核批准方可進行下一步。</p>
          <p>發行團隊提供了<a class="ulink" href="https://release.debian.org/transitions/">變遷追蹤系統</a>。參見 <a class="ulink" href="https://wiki.debian.org/Teams/ReleaseTeam/Transitions">變遷（Transition）</a>。</p>
          <div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Caution">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/caution.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p>請確保您按照 <a class="xref" href="ch05.zh-tw.html#libnames" title="5.5.1.3. 程式庫套件名稱">節 5.5.1.3, “程式庫套件名稱”</a> 的描述正確地對二進位制套件進行了重命名。</p>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="debconf"/>5.19. debconf</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debconf</strong></span> 套件可以幫助我們在下列兩種情況下配置套件：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">在 <span class="strong"><strong>debian-installer</strong></span>（Debian 安裝程式）預安裝時進行非互動式配置。</li>
            <li class="listitem">
              <p class="simpara">使用選單介面進行互動式配置（<span class="strong"><strong>對話方塊（dialog）</strong></span>、<span class="strong"><strong>gnome</strong></span>、<span class="strong"><strong>kde</strong></span> 等等）</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">套件安裝時：由 <span class="strong"><strong>dpkg</strong></span> 命令呼叫</li>
                  <li class="listitem">對已安裝套件：由 <span class="strong"><strong>dpkg-reconfigure</strong></span> 命令呼叫</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>套件安裝時的所有使用者互動都必須由這裡的 <span class="strong"><strong>debconf</strong></span> 系統進行處理，下列配置檔案對這個過程進行控制。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara">
                <span class="strong">
                  <strong>debian/</strong>
                </span>
                <span class="emphasis">
                  <em>binarypackage</em>
                </span>
                <span class="strong">
                  <strong>.config</strong>
                </span>
              </p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">這是 <span class="strong"><strong>debconf</strong></span> <span class="strong"><strong>config</strong></span> 指令碼，用於向用戶詢問對於配置套件必需的問題。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">
                <span class="strong">
                  <strong>debian/</strong>
                </span>
                <span class="emphasis">
                  <em>binarypackage</em>
                </span>
                <span class="strong">
                  <strong>.template</strong>
                </span>
              </p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">這是 <span class="strong"><strong>debconf</strong></span> <span class="strong"><strong>templates</strong></span>（模板）檔案，用於向用戶詢問對於配置套件必需的問題。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">套件配置指令碼</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
                    <span class="strong">
                      <strong>debian/</strong>
                    </span>
                    <span class="emphasis">
                      <em>binarypackage</em>
                    </span>
                    <span class="strong">
                      <strong>.preinst</strong>
                    </span>
                  </li>
                  <li class="listitem">
                    <span class="strong">
                      <strong>debian/</strong>
                    </span>
                    <span class="emphasis">
                      <em>binarypackage</em>
                    </span>
                    <span class="strong">
                      <strong>.prerm</strong>
                    </span>
                  </li>
                  <li class="listitem">
                    <span class="strong">
                      <strong>debian/</strong>
                    </span>
                    <span class="emphasis">
                      <em>binarypackage</em>
                    </span>
                    <span class="strong">
                      <strong>.postinst</strong>
                    </span>
                  </li>
                  <li class="listitem">
                    <span class="strong">
                      <strong>debian/</strong>
                    </span>
                    <span class="emphasis">
                      <em>binarypackage</em>
                    </span>
                    <span class="strong">
                      <strong>.postrm</strong>
                    </span>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>參見 <span class="strong"><strong>dh_installdebconf</strong></span>(1)、<span class="strong"><strong>debconf</strong></span>(7)、<span class="strong"><strong>debconf-devel</strong></span>(7) 和《Debian 政策手冊》中的 <a class="ulink" href="https://www.debian.org/doc/debian-policy/#prompting-in-maintainer-scripts">3.9.1 維護者指令碼中的使用者互動提示</a>。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="multiarch"/>5.20. 多體系架構</h2>
            </div>
          </div>
        </div>
        <p>Debian <span class="strong"><strong>wheezy</strong></span>（7.0，2013年5月）在 <span class="strong"><strong>dpkg</strong></span> 和 <span class="strong"><strong>apt</strong></span> 中引入了對跨架構二進位制套件安裝的多架構支援（特別是 <span class="strong"><strong>i386</strong></span> 架構和 <span class="strong"><strong>amd64</strong></span> 架構，但也支援其它的組合），這部分內容值得我們額外關注。</p>
        <p>您應當詳細閱讀下列參考內容。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara">Ubuntu 維基（上游）</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
<a class="ulink" href="https://wiki.ubuntu.com/MultiarchSpec">多架構規範（MultiarchSpec）</a>
</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara">Debian 維基（Debian 的現狀）</p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
<a class="ulink" href="https://wiki.debian.org/Multiarch">Debian 多架構支援</a>
</li>
                  <li class="listitem">
<a class="ulink" href="https://wiki.debian.org/Multiarch/Implementation">多架構支援/實現（Multiarch/Implementation）</a>
</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>多架構支援使用三元組（<span class="strong"><strong>&lt;triplet&gt;</strong></span>）的值，例如 <span class="strong"><strong>i386-linux-gnu</strong></span>  和 <span class="strong"><strong>x86_64-linux-gnu</strong></span>；它們出現在共享連結程式庫的安裝路徑中，例如 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;/</strong></span>，等等。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">三元組 <span class="strong"><strong>&lt;triplet&gt;</strong></span> 的值由 <span class="strong"><strong>debhelper</strong></span> 指令碼隱性提前設定好，套件維護者無需擔心。</li>
            <li class="listitem">
              <p class="simpara">不過，在 <span class="strong"><strong>debian/rules</strong></span> 檔案中用於 <span class="strong"><strong>override_dh_</strong></span>* 目標的三元組 <span class="strong"><strong>&lt;triplet&gt;</strong></span> 值需要由維護者手動進行顯性設定。三元組 <span class="strong"><strong>&lt;triplet&gt;</strong></span> 的值可由 <span class="strong"><strong>$(DEB_HOST_MULTIARCH)</strong></span> 變數在 <span class="strong"><strong>debian/rules</strong></span> 檔案中取得到，具體方法如下：</p>
              <pre class="screen">DEB_HOST_MULTIARCH = $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)
...
override_dh_install:
        mkdir -p package1/lib/$(DEB_HOST_MULTIARCH)
        cp -dR tmp/lib/. package1/lib/$(DEB_HOST_MULTIARCH)</pre>
            </li>
          </ul>
        </div>
        <p>參見：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
<a class="xref" href="ch05.zh-tw.html#variablesrules" title="5.4.4. debian/rules 中的變數">節 5.4.4, “debian/rules 中的變數”</a>
</li>
            <li class="listitem"><span class="strong"><strong>dpkg-architecture</strong></span>(1)</li>
            <li class="listitem">
<a class="xref" href="ch05.zh-tw.html#boption" title="5.5.1.1. debmake -b">節 5.5.1.1, “debmake -b”</a>
</li>
            <li class="listitem">
<a class="xref" href="ch05.zh-tw.html#package-split-example" title="5.5.1.2. 拆包的場景和例子">節 5.5.1.2, “拆包的場景和例子”</a>
</li>
          </ul>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="_the_multiarch_library_path"/>5.20.1. 多架構程式庫路徑</h3>
              </div>
            </div>
          </div>
          <p>Debian 政策要求遵守<a class="ulink" href="https://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html">檔案系統層級標準</a>。其中 <a class="ulink" href="https://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html#USRLIBLIBRARIESFORPROGRAMMINGANDPA">/usr/lib：程式和套件的程式庫</a> 宣告“<span class="strong"><strong>/usr/lib</strong></span> 包含目標檔案、程式庫和其它不應由使用者或 shell 指令碼直接呼叫的內部二進位制檔案。”</p>
          <p>Debian 在<a class="ulink" href="https://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html">檔案系統層級標準</a>的基礎上新增一項例外，即使用 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;/</strong></span> 而非 <span class="strong"><strong>/usr/lib&lt;qual&gt;/</strong></span>（例如，<span class="strong"><strong>/lib32/</strong></span> 和 <span class="strong"><strong>/lib64/</strong></span>）以對多架構程式庫提供支持。</p>
          <div class="table">
            <a id="idm4110"/>
            <p class="title">
              <strong>表格 5.1. 多架構程式庫路徑選項</strong>
            </p>
            <div class="table-contents">
              <table class="table" summary="多架構程式庫路徑選項" border="1">
                <colgroup>
                  <col class="col_1"/>
                  <col class="col_2"/>
                  <col class="col_3"/>
                </colgroup>
                <thead>
                  <tr>
                    <th style="text-align: left" valign="top">經典路徑</th>
                    <th style="text-align: left" valign="top">i386 多體系架構路徑</th>
                    <th style="text-align: left" valign="top">amd64 多體系架構路徑</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/lib/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/lib/i386-linux-gnu/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/lib/x86_64-linux-gnu/</strong>
                        </span>
                      </p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/i386-linux-gnu/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/x86_64-linux-gnu/</strong>
                        </span>
                      </p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break"/>
          <p>對基於 Autotools 且由 <span class="strong"><strong>debhelper</strong></span> （compat&gt;=9）管理的套件來說，這些路徑設定已由 <span class="strong"><strong>dh_auto_configure</strong></span> 命令自動處理。</p>
          <p>對於其它使用不支援的構建系統的套件，您需要按照下面的方式手動調整安裝路徑。</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">如果在 <span class="strong"><strong>debian/rules</strong></span> 檔案中設定了 <span class="strong"><strong>override_dh_auto_configure</strong></span> 目標且其中手動呼叫了“<span class="strong"><strong>./configure</strong></span>”命令，請確保將其替換為“<span class="strong"><strong>dh_auto_configure --</strong></span>”，這樣可以將安裝路徑從 <span class="strong"><strong>/usr/lib/</strong></span> 替換為 <span class="strong"><strong>/usr/lib/$(DEB_HOST_MULTIARCH)/</strong></span>。</li>
              <li class="listitem">請在 <span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>foo</em></span><span class="strong"><strong>.install</strong></span> 檔案中將所有出現的 <span class="strong"><strong>/usr/lib/</strong></span> 字串替換為 <span class="strong"><strong>/usr/lib/*/</strong></span>。</li>
            </ul>
          </div>
          <p>所有啟用多架構的套件安裝至相同路徑的檔案必須內容完全相同。您必須小心處理，避免資料位元組序或者壓縮演算法等等問題帶來的檔案內容差異。</p>
          <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <table border="0" summary="Note">
              <tr>
                <td rowspan="2" align="center" valign="top">
                  <img alt="[注意]" src="images/note.png"/>
                </td>
                <th align="left">注意</th>
              </tr>
              <tr>
                <td align="left" valign="top">
                  <p><span class="strong"><strong>./configure</strong></span> 的 <span class="strong"><strong>--libexecdir</strong></span>選項指定了由程式而非使用者所使用的可執行檔案的預設安裝路徑。其 Autotools 的預設值為 <span class="strong"><strong>/usr/libexec/</strong></span> 但在未啟用多架構特性的 Debian 系統上其預設值是 <span class="strong"><strong>/usr/lib/</strong></span>。如果這些可執行程式屬於被標記為“Multi-arch: foreign”的套件，最好還是使用例如 <span class="strong"><strong>/usr/lib/</strong></span> 或者 <span class="strong"><strong>/usr/lib/</strong></span><span class="emphasis"><em>套件名</em></span> 這樣的路徑而非使用 <span class="strong"><strong>dh_auto_configure</strong></span> 設定的 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;/</strong></span> 路徑。<a class="ulink" href="https://www.gnu.org/prep/standards/html_node/Directory-Variables.html">GNU 程式設計規範：7.2.5 用於安裝目錄的變數</a> 對 <span class="strong"><strong>libexecdir</strong></span> 的描述是“<span class="strong"><strong>libexecdir</strong></span> 的定義對所有套件相同，所以您應當將您的資料安裝在其下的一個子目錄中。大多數套件將資料安裝至 <span class="strong"><strong>$(libexecdir)/package-name/</strong></span> 之中……”（在與 Debian 政策不衝突的前提下，遵守 GNU 的標準總是更好的。）</p>
                </td>
              </tr>
            </table>
          </div>
          <p>位於預設路徑 <span class="strong"><strong>/usr/lib/</strong></span> 和 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;/</strong></span> 的共享程式庫可被自動載入。</p>
          <p>對位於其它路徑的共享程式庫，必須使用 <span class="strong"><strong>pkg-config</strong></span> 命令設定 GCC 選項 <span class="strong"><strong>-l</strong></span> 以正確進行載入。</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="_the_multiarch_header_file_path"/>5.20.2. 多架構標頭檔案路徑</h3>
              </div>
            </div>
          </div>
          <p>在支援多架構的 Debian 系統上，GCC 預設會同時包含、使用 <span class="strong"><strong>/usr/include/</strong></span> 和 <span class="strong"><strong>/usr/include/&lt;triplet&gt;/</strong></span> 下的標頭檔案。</p>
          <p>如果標頭檔案不在這些路徑中，必須使用 <span class="strong"><strong>pkg-config</strong></span> 命令設定 GCC 的 <span class="strong"><strong>-I</strong></span> 引數以使得“<span class="strong"><strong>#include &lt;</strong></span><span class="emphasis"><em>foo.h</em></span><span class="strong"><strong>&gt;</strong></span>”正常工作。</p>
          <div class="table">
            <a id="idm4195"/>
            <p class="title">
              <strong>表格 5.2. 多架構標頭檔案路徑選項</strong>
            </p>
            <div class="table-contents">
              <table class="table" summary="多架構標頭檔案路徑選項" border="1">
                <colgroup>
                  <col class="col_1"/>
                  <col class="col_2"/>
                  <col class="col_3"/>
                </colgroup>
                <thead>
                  <tr>
                    <th style="text-align: left" valign="top">經典路徑</th>
                    <th style="text-align: left" valign="top">i386 多體系架構路徑</th>
                    <th style="text-align: left" valign="top">amd64 多體系架構路徑</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/include/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/include/i386-linux-gnu/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/include/x86_64-linux-gnu/</strong>
                        </span>
                      </p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/include/</strong>
                        </span>
                        <span class="emphasis">
                          <em>套件名</em>
                        </span>
                        <span class="strong">
                          <strong>/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/include/i386-linux-gnu/</strong>
                        </span>
                        <span class="emphasis">
                          <em>套件名</em>
                        </span>
                        <span class="strong">
                          <strong>/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/include/x86_64-linux-gnu/</strong>
                        </span>
                        <span class="emphasis">
                          <em>套件名</em>
                        </span>
                        <span class="strong">
                          <strong>/</strong>
                        </span>
                      </p>
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p/>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/i386-linux-gnu/</strong>
                        </span>
                        <span class="emphasis">
                          <em>套件名</em>
                        </span>
                        <span class="strong">
                          <strong>/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/x86_64-linux-gnu/</strong>
                        </span>
                        <span class="emphasis">
                          <em>軟體包名</em>
                        </span>
                        <span class="strong">
                          <strong>/</strong>
                        </span>
                      </p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break"/>
          <p>為程式庫檔案使用 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;/</strong></span><span class="emphasis"><em>套件名</em></span><span class="strong"><strong>/</strong></span> 路徑可幫助上游維護者對使用 <span class="strong"><strong>/usr/lib/&lt;triplet&gt;</strong></span> 的多架構系統和使用 <span class="strong"><strong>/usr/lib&lt;qual&gt;/</strong></span> 的雙架構系統使用相同的安裝指令碼。<a href="#ftn.idm4252" class="footnote" id="idm4252"><sup class="footnote">[17]</sup></a></p>
          <p>使用包含 <span class="emphasis"><em>packagename</em></span> 的檔案路徑也使得在同一系統上同時安裝多個架構的開發程式庫成為可能。</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="_the_multiarch_emphasis_role_strong_pc_emphasis_file_path"/>5.20.3. 多架構支援下的 <span class="strong"><strong>*.pc</strong></span> 檔案路徑</h3>
              </div>
            </div>
          </div>
          <p><span class="emphasis"><em>packagename</em></span> 用來取得系統上已安裝程式庫的資訊。它在 <span class="strong"><strong>*.pc</strong></span> 檔案中儲存配置引數，用來設定 GCC 的 <span class="strong"><strong>-I</strong></span> 和 <span class="strong"><strong>-l</strong></span> 選項。</p>
          <div class="table">
            <a id="idm4266"/>
            <p class="title">
              <strong>表格 5.3. <span class="strong">*.pc</span> 檔案路徑選項</strong>
            </p>
            <div class="table-contents">
              <table class="table" summary="*.pc 檔案路徑選項" border="1">
                <colgroup>
                  <col class="col_1"/>
                  <col class="col_2"/>
                  <col class="col_3"/>
                </colgroup>
                <thead>
                  <tr>
                    <th style="text-align: left" valign="top">經典路徑</th>
                    <th style="text-align: left" valign="top">i386 多體系架構路徑</th>
                    <th style="text-align: left" valign="top">amd64 多體系架構路徑</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/pkgconfig/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/pkgconfig/</strong>
                        </span>
                      </p>
                    </td>
                    <td style="text-align: left" valign="top">
                      <p>
                        <span class="strong">
                          <strong>/usr/lib/x86_64-linux-gnu/pkgconfig/</strong>
                        </span>
                      </p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break"/>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="harden"/>5.21. 編譯強化</h2>
            </div>
          </div>
        </div>
        <p>自 Debian <span class="strong"><strong>jessie</strong></span>（8.0 開始）的編譯器強化支援要求我們在打包時加以注意。</p>
        <p>您應當詳細閱讀下列參考內容。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">Debian 維基 <a class="ulink" href="https://wiki.debian.org/Hardening">Hardening（強化）</a></li>
            <li class="listitem">Debian 維基 <a class="ulink" href="https://wiki.debian.org/HardeningWalkthrough">Hardening Walkthrough（強化指南）</a></li>
          </ul>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> 命令會向 <span class="strong"><strong>debian/rules</strong></span> 檔案中按需新增 <span class="strong"><strong>DEB_BUILD_MAINT_OPTIONS</strong></span>、<span class="strong"><strong>DEB_CFLAGS_MAINT_APPEND</strong></span> 和 <span class="strong"><strong>DEB_LDFLAGS_MAINT_APPEND</strong></span> 的專案（參見 <a class="xref" href="ch04.zh-tw.html" title="章 4. 簡單例子">章 4, <em>簡單例子</em></a> 和 <span class="strong"><strong>dpkg-buildflags</strong></span>(1)）。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="ci"/>5.22. 持續整合</h2>
            </div>
          </div>
        </div>
        <p><a class="ulink" href="http://dep.debian.net/deps/dep8/">DEP-8</a> 定義了 <span class="strong"><strong>debian/tests/control</strong></span> 檔案的格式，它是 RFC822 風格的測試元資料檔案，用於 Debian 套件的<a class="ulink" href="https://en.wikipedia.org/wiki/Continuous_integration">持續整合</a>（CI）。</p>
        <p>它在完成構建包含 <span class="strong"><strong>debian/tests/control</strong></span> 文件的原始碼包、得到二進位制包之後發揮作用。在執行 <span class="strong"><strong>autopkgtest</strong></span> 命令時，所生成的二進位制套件會根據這個檔案在虛擬環境中自動進行安裝和測試。</p>
        <p>請參考 <span class="strong"><strong>/usr/share/doc/autopkgtest/</strong></span> 目錄下的文件和《Debian 打包指導”中的 <a class="ulink" href="http://packaging.ubuntu.com/html/auto-pkg-test.html">3. autopkgtest: 套件的自動測試</a>。</p>
        <p>您可以在 Debian 系統上探索使用不同的持續整合系統。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem"><span class="strong"><strong>debci</strong></span> 套件：建立在 <span class="strong"><strong>autopkgtest</strong></span> 之上的持續整合平臺</li>
            <li class="listitem"><span class="strong"><strong>jenkins</strong></span> 套件：通用持續整合平臺</li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="bootstrap"/>5.23. 自建構</h2>
            </div>
          </div>
        </div>
        <p>Debian 關心對新硬體架構的移植工作。新架構的移植工作對<a class="ulink" href="https://wiki.debian.org/DebianBootstrap">自建構（bootstrapping）</a>操作有所要求，以完成對初始最小本地構建系統的交叉編譯。為了在自建構（bootstrapping）時避免構建依賴成環的問題，需要使用 <a class="ulink" href="https://wiki.debian.org/BuildProfileSpec">配置型別（profile）</a> 的構建功能特性來縮減所需構建依賴。</p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>如果一個核心套件 <code class="literal">foo</code> 構建時依賴於 <code class="literal">bar</code> 套件，但後者會引入一長串構建依賴鏈而且 <code class="literal">bar</code> 僅在 <code class="literal">foo</code> 的 <span class="strong"><strong>test</strong></span> 目標中使用（即僅用於構建後測試），那麼您可以安全地在 <code class="literal">foo</code> 套件的 <span class="strong"><strong>Build-depends</strong></span> 一欄中將 <code class="literal">bar</code> 標記為 <span class="strong"><strong>&lt;!nocheck&gt;</strong></span> 以規避構建依賴環。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="bug"/>5.24. 錯誤報告</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>reportbug</strong></span> 命令用於提交 <span class="emphasis"><em>binarypackage</em></span> 套件的錯誤報告；<span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/</strong></span> 可以對針對該軟體所提交報告的內容進行設定。</p>
        <p><span class="strong"><strong>dh_bugfiles</strong></span> 命令將安裝以下位於 <span class="strong"><strong>debian/</strong></span> 目錄中的的模板檔案。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.bug-control</strong></span> → <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/control</strong></span></p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">該檔案包含諸如重定向錯誤報告至其它套件的一些指導性內容。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.bug-presubj</strong></span> → <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/presubj</strong></span></p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">該檔案的內容將由 <span class="strong"><strong>reportbug</strong></span> 命令向用戶展示。</li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p class="simpara"><span class="strong"><strong>debian/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>.bug-script</strong></span> → <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span> or <span class="strong"><strong>usr/share/bug/</strong></span><span class="emphasis"><em>binarypackage</em></span><span class="strong"><strong>/script</strong></span></p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem"><span class="strong"><strong>reportbug</strong></span> 命令執行此指令碼以生成錯誤報告的模板檔案。</li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>參見 <span class="strong"><strong>dh_bugfiles</strong></span>(1) 和 <a class="ulink" href="file:///usr/share/doc/reportbug/README.developers.gz">為開發者提供的 reportbug 功能特性</a></p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Tip">
            <tr>
              <td rowspan="2" align="center" valign="top">
                <img alt="[提示]" src="images/tip.png"/>
              </td>
              <th align="left">提示</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>如果您總是需要提醒提交報告的使用者某些注意事項或詢問他們某些問題，使用這些檔案可以將這個過程自動化。</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="footnotes">
        <br/>
        <hr/>
        <div id="ftn.idm1599" class="footnote">
          <p><a href="#idm1599" class="simpara"><sup class="simpara">[10] </sup></a>對九成以上的套件來說，套件名稱都不會超過 24 個字元；上游版本號通常不超過 10 個字元，而 Debian 修訂版本號也通常不超過 3 個字元。</p>
        </div>
        <div id="ftn.idm1772" class="footnote">
          <p><a href="#idm1772" class="simpara"><sup class="simpara">[11] </sup></a>這個簡化形式在 <span class="strong"><strong>debhelper</strong></span> 套件第七版或更新的版本中可用。本指南內容假設您在使用 <span class="strong"><strong>debhelper</strong></span> 第九版或更新的版本。</p>
        </div>
        <div id="ftn.idm1777" class="footnote">
          <p><a href="#idm1777" class="simpara"><sup class="simpara">[12] </sup></a><span class="strong"><strong>debmake</strong></span> 命令會產生稍微複雜一些的 <span class="strong"><strong>debian/rules</strong></span> 檔案。雖然如此，其核心結構沒有什麼變化。</p>
        </div>
        <div id="ftn.idm2493" class="footnote">
          <p><a href="#idm2493" class="simpara"><sup class="simpara">[13] </sup></a>如果您在使用 <span class="strong"><strong>vim</strong></span> 編輯器，請確保使用“<span class="strong"><strong>:wq</strong></span>”命令對內容進行儲存。</p>
        </div>
        <div id="ftn.idm2509" class="footnote">
          <p><a href="#idm2509" class="simpara"><sup class="simpara">[14] </sup></a>程式以前會在內部呼叫來自 <span class="strong"><strong>devscripts</strong></span> 軟體包的 <span class="strong"><strong>licensecheck</strong></span> 命令來進行檢查。現在的 <span class="strong"><strong>licensecheck</strong></span> 命令由獨立的 <span class="strong"><strong>licensecheck</strong></span> 套件所提供，相較從前的實現也有了較大的改進。</p>
        </div>
        <div id="ftn.idm3842" class="footnote">
          <p><a href="#idm3842" class="simpara"><sup class="simpara">[15] </sup></a>該文件是在 <span class="strong"><strong>symbols</strong></span> 檔案被引入之前寫成的。</p>
        </div>
        <div id="ftn.idm3851" class="footnote">
          <p><a href="#idm3851" class="simpara"><sup class="simpara">[16] </sup></a>在<a class="ulink" href="https://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html#devpkg">第六章 - 開發（-DEV）套件</a>中，存在強烈的使用含有 SONAME 版本號的 <span class="strong"><strong>-dev</strong></span> 套件名而非僅使用 <span class="strong"><strong>-dev</strong></span> 作為名稱的偏好，但前 ftp-master 成員（Steve Langasek）對此有不同意見。請注意該文件在 <span class="strong"><strong>multiarch</strong></span> 系統和 <span class="strong"><strong>symbols</strong></span> 引入之前寫成，可能有一定程度的過時。</p>
        </div>
        <div id="ftn.idm4252" class="footnote">
          <p><a href="#idm4252" class="simpara"><sup class="simpara">[17] </sup></a>這個路徑和 FHS 相容。<a class="ulink" href="https://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html#USRLIBLIBRARIESFORPROGRAMMINGANDPA">檔案系統層級標準：/usr/lib：程式和套件的程式庫</a> 稱“應用程式可以使用 <span class="strong"><strong>/usr/lib</strong></span> 下的一個子目錄。如果一個應用程式使用一個子目錄，所有由此程式所使用的架構相關資料均須放置於該子目錄下。”</p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <hr/>
      <table width="100%" summary="Navigation footer">
        <tr>
          <td align="left"><a accesskey="p" href="ch04.zh-tw.html"><img src="images/prev.png" alt="前一頁"/></a> </td>
          <td align="center"> </td>
          <td align="right"> <a accesskey="n" href="ch06.zh-tw.html"><img src="images/next.png" alt="下一頁"/></a></td>
        </tr>
        <tr>
          <td align="left" valign="top">章 4. 簡單例子 </td>
          <td align="center">
            <a accesskey="h" href="index.zh-tw.html">
              <img src="images/home.png" alt="起始頁"/>
            </a>
          </td>
          <td align="right" valign="top"> 章 6. debmake 選項</td>
        </tr>
      </table>
    </div>
  </body>
</html>
