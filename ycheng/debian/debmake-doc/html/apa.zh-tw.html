<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>附錄 A. debmake(1) 手冊頁</title>
    <link rel="stylesheet" type="text/css" href="debian.css"/>
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="home" href="index.zh-tw.html" title="Debian 維護者指南"/>
    <link rel="up" href="index.zh-tw.html" title="Debian 維護者指南"/>
    <link rel="prev" href="ch08.zh-tw.html" title="章 8. 更多範例"/>
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">附錄 A. <span class="strong"><strong>debmake</strong></span>(1) 手冊頁</th>
        </tr>
        <tr>
          <td align="left"><a accesskey="p" href="ch08.zh-tw.html"><img src="images/prev.png" alt="前一頁"/></a> </td>
          <th width="60%" align="center"> </th>
          <td align="right"> </td>
        </tr>
      </table>
      <hr/>
    </div>
    <div class="appendix">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="manpage"/>附錄 A. <span class="strong"><strong>debmake</strong></span>(1) 手冊頁</h1>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_name"/>A.1. 名稱</h2>
            </div>
          </div>
        </div>
        <p>debmake，用來製作 Debian 原始碼包的程式</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_synopsis"/>A.2. 概述</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> [<span class="strong"><strong>-h</strong></span>] [<span class="strong"><strong>-c</strong></span> | <span class="strong"><strong>-k</strong></span>] [<span class="strong"><strong>-n</strong></span> | <span class="strong"><strong>-a</strong></span> <span class="emphasis"><em>套件名-版本號</em></span><span class="strong"><strong>.orig.tar.gz</strong></span> | <span class="strong"><strong>-d</strong></span> | <span class="strong"><strong>-t</strong></span> ] [<span class="strong"><strong>-p</strong></span> <span class="emphasis"><em>package</em></span>] [<span class="strong"><strong>-u</strong></span> <span class="emphasis"><em>version</em></span>] [<span class="strong"><strong>-r</strong></span> <span class="emphasis"><em>修訂號</em></span>] [<span class="strong"><strong>-z</strong></span> <span class="emphasis"><em>擴充套件</em></span>] [<span class="strong"><strong>-b</strong></span> "<span class="emphasis"><em>binarypackage</em></span><span class="emphasis"><em><span class=":__type__">, …</span></em></span>]" [<span class="strong"><strong>-e</strong></span> <span class="emphasis"><em>foo@example.org</em></span>] [<span class="strong"><strong>-f</strong></span> "<span class="emphasis"><em>名稱 姓氏</em></span>"] [<span class="strong"><strong>-i</strong></span> "<span class="emphasis"><em>構建工具</em></span>" | <span class="strong"><strong>-j</strong></span>] [<span class="strong"><strong>-l</strong></span> <span class="emphasis"><em>license_file</em></span>] [<span class="strong"><strong>-m</strong></span>] [<span class="strong"><strong>-o</strong></span> <span class="emphasis"><em>file</em></span>] [<span class="strong"><strong>-q</strong></span>] [<span class="strong"><strong>-s</strong></span>] [<span class="strong"><strong>-v</strong></span>] [<span class="strong"><strong>-w</strong></span> "<span class="emphasis"><em>addon, …</em></span>"] [<span class="strong"><strong>-x</strong></span> [01234]] [<span class="strong"><strong>-y</strong></span>] [<span class="strong"><strong>-L</strong></span>] [<span class="strong"><strong>-P</strong></span>] [<span class="strong"><strong>-T</strong></span>]</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_description"/>A.3. 描述</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> 協助從上游原始碼構建一個 Debian 套件，通常做法如下：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">下載上游原始碼壓縮包（tarball）並命名為 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>.tar.gz</strong></span> 檔案。</li>
            <li class="listitem">對其進行解壓縮並將所有檔案放置於 <span class="emphasis"><em>package-version/</em></span> 目錄之下。</li>
            <li class="listitem">在 <span class="emphasis"><em>package-version/</em></span> 目錄中呼叫 debmake，並按需帶上引數。</li>
            <li class="listitem">手工調整 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>/debian/</strong></span> 目錄下的檔案。</li>
            <li class="listitem">在 <span class="emphasis"><em>package-version/</em></span> 目錄下呼叫 <span class="strong"><strong>dpkg-buildpackage</strong></span>（通常使用其高層封裝工具，例如 <span class="strong"><strong>debuild</strong></span> 或者 <span class="strong"><strong>pdebuild</strong></span>）以構建 Debian 套件。</li>
          </ul>
        </div>
        <p>請確保將 <span class="strong"><strong>-b</strong></span>、<span class="strong"><strong>-f</strong></span>、<span class="strong"><strong>-l</strong></span> 和 <span class="strong"><strong>-w</strong></span> 選項的引數使用引號合適地保護起來，以避免 shell 環境的干擾。</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="_optional_arguments"/>A.3.1. 可選引數：</h3>
              </div>
            </div>
          </div>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term"><span class="strong"><strong>-h</strong></span>, <span class="strong"><strong>--help</strong></span></span>
              </dt>
              <dd>顯示本幫助資訊並退出。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-c</strong></span>, <span class="strong"><strong>--copyright</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">為授權+許可證文字而掃描原始碼，然後退出。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>-c</strong></span>：簡單輸出風格</li>
                    <li class="listitem"><span class="strong"><strong>-cc</strong></span>：正常輸出風格（類似 <span class="strong"><strong>debian/copyright</strong></span> 檔案）</li>
                    <li class="listitem"><span class="strong"><strong>-ccc</strong></span>：除錯輸出風格</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-k</strong></span>, <span class="strong"><strong>--kludge</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">對 <span class="strong"><strong>debian/copyright</strong></span> 檔案和原始碼進行比較並退出。</p>
                <p class="simpara"><span class="strong"><strong>debian/copyright</strong></span> 必須將通用的檔案匹配模式放在前部並將個別檔案的例外放在後部。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>-k</strong></span>：基本輸出風格</li>
                    <li class="listitem"><span class="strong"><strong>-kk</strong></span>：冗長輸出風格</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-n</strong></span>, <span class="strong"><strong>--native</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">製作一個原生 Debian 原始碼包，即不涉及 <span class="strong"><strong>.orig.tar.gz</strong></span>。這樣將製作一個“<span class="strong"><strong>3.0 (native)</strong></span>”格式的包。</p>
                <p class="simpara">如果您正打算打包一個含 <span class="strong"><strong>debian/</strong></span>* 目錄的 Debian 特有的原始碼樹成為一個 Debian 原生套件的話，還請三思。您可以使用“<span class="strong"><strong>debmake -d -i debuild</strong></span>”或者“<span class="strong"><strong>debmake -t -i debuild</strong></span>”命令來建立一個“<span class="strong"><strong>3.0 (quilt)</strong></span>”格式的非原生 Debian 套件。唯一的區別是 <span class="strong"><strong>debian/changelog</strong></span> 檔案必須使用非原生套件對應的命名規範：<span class="emphasis"><em>版本號-修訂號</em></span>。非原生的套件對下游發行版更友好。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-a</strong></span> <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>.tar.gz</strong></span>, <span class="strong"><strong>--archive</strong></span> <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>.tar.gz</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">直接使用上游原始碼壓縮包。（<span class="strong"><strong>-p</strong></span>, <span class="strong"><strong>-u</strong></span>, <span class="strong"><strong>-z</strong></span>：被覆蓋）</p>
                <p class="simpara">上游原始碼壓縮包可以命名為 <span class="emphasis"><em>package_version</em></span><span class="strong"><strong>.orig.tar.gz</strong></span> 或者 <span class="strong"><strong>tar.gz</strong></span>。在某些情況下，也可使用 <span class="strong"><strong>tar.bz2</strong></span> 或 <span class="strong"><strong>tar.xz</strong></span>。</p>
                <p class="simpara">如果所指定的原始碼壓縮包檔名中包含大寫字母，Debian 打包時生成的名稱會將其轉化為小寫字母。</p>
                <p class="simpara">如果所指定的引數是一個指向上游原始碼壓縮包的 URL（http://、https:// 或 ftp://），程式將會使用 <span class="strong"><strong>wget</strong></span> 或 <span class="strong"><strong>curl</strong></span> 下載這個壓縮包。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-d</strong></span>, <span class="strong"><strong>--dist</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">先執行“make dist”命令或其等效命令以生成上游原始碼壓縮包並在打包過程中使用。</p>
                <p class="simpara">“<span class="strong"><strong>debmake -d</strong></span>”命令設計用於在 <span class="emphasis"><em>套件名/</em></span> 目錄下使用了上游版本控制系統的場景，且其構建系統支持“<span class="strong"><strong>make dist</strong></span>”或其等效命令。（如 automake/autoconf、Python distutils 等等）</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-t</strong></span>, <span class="strong"><strong>--tar</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">執行“<span class="strong"><strong>tar</strong></span>”命令以生成上游原始碼壓縮包並在打包過程中使用。</p>
                <p class="simpara">“<span class="strong"><strong>debmake -t</strong></span>”命令設計用於在 <span class="emphasis"><em>套件名/</em></span> 目錄下使用了上游版本控制系統的場景。除非您使用了 <span class="strong"><strong>-u</strong></span> 選項或者使用 <span class="strong"><strong>debian/changelog</strong></span> 檔案提供了上游版本號，預設情況下程式將運用協調世界時日期和時間按照 <span class="strong"><strong>0~%y%m%d%H%M</strong></span> 的格式作為快照的上游版本號，例如 <span class="emphasis"><em>0~1403012359</em></span>。所生成的壓縮包將排除上游版本控制系統中的 <span class="strong"><strong>debian/</strong></span> 目錄。（它也會排除常見的版本控制系統目錄：<span class="strong"><strong>.git/ .hg/ .svn/ .CVS/</strong></span>。）</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-p</strong></span> <span class="emphasis"><em>套件名</em></span>, <span class="strong"><strong>--package</strong></span> <span class="emphasis"><em>套件名</em></span></span>
              </dt>
              <dd>設定 Debian 套件名稱。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-u</strong></span> <span class="emphasis"><em>上游版本號</em></span>, <span class="strong"><strong>--upstreamversion</strong></span> <span class="emphasis"><em>版本號</em></span></span>
              </dt>
              <dd>設定上游套件版本。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-r</strong></span> <span class="emphasis"><em>修訂號</em></span>, <span class="strong"><strong>--revision</strong></span> <span class="emphasis"><em>修訂號</em></span></span>
              </dt>
              <dd>設定 Debian 套件修訂號。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-z</strong></span> <span class="emphasis"><em>副檔名</em></span>, <span class="strong"><strong>--targz</strong></span> <span class="emphasis"><em>副檔名</em></span></span>
              </dt>
              <dd>設定原始碼壓縮包型別，<span class="emphasis"><em>副檔名</em></span>=(<span class="strong"><strong>tar.gz</strong></span>|<span class="strong"><strong>tar.bz2</strong></span>|<span class="strong"><strong>tar.xz</strong></span>)。（別名：<span class="strong"><strong>z</strong></span>, <span class="strong"><strong>b</strong></span>, <span class="strong"><strong>x</strong></span>）</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-b</strong></span> "<span class="emphasis"><em>二進位制套件名[:type],…</em></span>", <span class="strong"><strong>--binaryspec</strong></span> "<span class="emphasis"><em>二進位制套件名[:type],…</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">設定二進位制套件的指定型別內容，使用一個用逗號分隔的<span class="emphasis"><em>二進位制套件名:型別</em></span>成對列表；例如，使用完整形式“<span class="strong"><strong>foo:bin,foo-doc:doc,libfoo1:lib,libfoo-dev:dev</strong></span>”或者使用短形式，“<span class="strong"><strong>-doc,libfoo1,libfoo-dev</strong></span>”。</p>
                <p class="simpara">這裡，<span class="emphasis"><em>二進位制套件</em></span>是二進位制套件名稱，可選的<span class="emphasis"><em>類型</em></span>應當從下面的<span class="emphasis"><em>型別</em></span>值中進行選取：</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>bin</strong></span>：C/C++ 預編譯 ELF 二進位制程式碼套件（any，foreign）（預設，別名：<span class="strong"><strong>""</strong></span>，即，<span class="emphasis"><em>空字串</em></span>）</li>
                    <li class="listitem"><span class="strong"><strong>data</strong></span>：資料（字型、影象、……）套件（all，foreign）（別名：<span class="strong"><strong>da</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>dev</strong></span>：程式庫開發套件（any，same）（別名：<span class="strong"><strong>de</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>doc</strong></span>：文件套件（all，foreign）（別名：<span class="strong"><strong>do</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>lib</strong></span>：程式庫套件（any，same）（別名：<span class="strong"><strong>l</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>perl</strong></span>：Perl 指令碼套件（all，foreign）（別名：<span class="strong"><strong>pl</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>python</strong></span>：Python 指令碼套件（all，foreign）（別名：<span class="strong"><strong>py</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>python3</strong></span>：Python3 指令碼套件（all，foreign）（別名：<span class="strong"><strong>py3</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>ruby</strong></span>：Ruby 指令碼套件（all，foreign）（別名：<span class="strong"><strong>rb</strong></span>）</li>
                    <li class="listitem"><span class="strong"><strong>script</strong></span>：Shell 指令碼套件（all，foreign）（別名：<span class="strong"><strong>sh</strong></span>）</li>
                  </ul>
                </div>
                <p class="simpara">括號內成對的值，例如（any，foreign），是套件的<span class="strong"><strong>架構</strong></span>和<span class="strong"><strong>多架構（Multi-Arch）</strong></span>特性的值，它們將設定在 <span class="strong"><strong>debian/control</strong></span> 檔案中。</p>
                <p class="simpara">大多數情況下，<span class="strong"><strong>debmake</strong></span> 命令可以有效地從<span class="emphasis"><em>二進位制套件</em></span>的名稱猜測出正確的<span class="emphasis"><em>型別</em></span>。如果<span class="emphasis"><em>型別</em></span>的值並不明顯，程式將回退到將<span class="emphasis"><em>型別</em></span>設定為<span class="strong"><strong>bin</strong></span>。例如，<span class="strong"><strong>libfoo</strong></span> 設定<span class="emphasis"><em>型別</em></span>為 <span class="strong"><strong>lib</strong></span>，而 <span class="strong"><strong>font-bar</strong></span> 會令程式設定<span class="emphasis"><em>型別</em></span>為 <span class="strong"><strong>data</strong></span>，……</p>
                <p class="simpara">如果原始碼樹的內容和<span class="emphasis"><em>型別</em></span>的設定不一致，<span class="strong"><strong>debmake</strong></span> 命令會發出警告。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-e</strong></span> <span class="emphasis"><em>foo@example.org</em></span>, <span class="strong"><strong>--email</strong></span> <span class="emphasis"><em>foo@example.org</em></span></span>
              </dt>
              <dd>
                <p class="simpara">設定電子郵件地址。</p>
                <p class="simpara">預設值為環境變數 <span class="strong"><strong>$DEBEMAIL</strong></span> 的值。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-f</strong></span> "<span class="emphasis"><em>名稱 姓氏</em></span>", <span class="strong"><strong>--fullname</strong></span> "<span class="emphasis"><em>名稱 姓氏</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">設定全名。</p>
                <p class="simpara">預設值為環境變數 <span class="strong"><strong>$DEBFULLNAME</strong></span> 的值。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-i</strong></span> "<span class="emphasis"><em>構建工具</em></span>", <span class="strong"><strong>--invoke</strong></span> "<span class="emphasis"><em>構建工具</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">在執行結束時呼叫“構建工具”。<span class="emphasis"><em>構建工具</em></span>可以是“<span class="strong"><strong>dpkg-buildpackage</strong></span>”、“<span class="strong"><strong>debuild</strong></span>”、“<span class="strong"><strong>pdebuild</strong></span>”、<span class="strong"><strong>pdebuild --pbuilder cowbuilder</strong></span>”等等。</p>
                <p class="simpara">預設情況是不執行任何程式。</p>
                <p class="simpara">設定該選項也會自動設定 <span class="strong"><strong>--local</strong></span> 選項。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-j</strong></span>, <span class="strong"><strong>--judge</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">執行 <span class="strong"><strong>dpkg-depcheck</strong></span> 以檢查構建依賴和檔案路徑。檢查日誌將儲存在父目錄下。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="emphasis"><em>套件名</em></span><span class="strong"><strong>.build-dep.log</strong></span>：<span class="strong"><strong>dpkg-depcheck</strong></span> 的日誌檔案。</li>
                    <li class="listitem"><span class="emphasis"><em>套件名</em></span><span class="strong"><strong>.install.log</strong></span>：記錄 <span class="strong"><strong>debian/tmp</strong></span> 目錄下所安裝檔案的日誌。</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-l</strong></span> "<span class="emphasis"><em>許可證檔案,…</em></span>", <span class="strong"><strong>--license</strong></span> "<span class="emphasis"><em>許可證檔案,…</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">在存放許可證掃描結果的 <span class="strong"><strong>debian/copyright</strong></span> 檔案末尾新增格式化後的許可證文字。</p>
                <p class="simpara">預設值是新增 <span class="strong"><strong>COPYING</strong></span> 和 <span class="strong"><strong>LICENSE</strong></span> 檔案，您只需要在<span class="emphasis"><em>許可證檔案</em></span>部分新增額外的檔名即可，並使用“<span class="strong"><strong>,</strong></span>”分隔各個檔名。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-m</strong></span>, <span class="strong"><strong>--monoarch</strong></span></span>
              </dt>
              <dd>強制套件不使用多架構特性。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-o</strong></span> <span class="emphasis"><em>檔案</em></span>, <span class="strong"><strong>--option</strong></span> <span class="emphasis"><em>檔案</em></span></span>
              </dt>
              <dd>
                <p class="simpara">從指定<span class="emphasis"><em>file</em></span>讀取可選引數。（這個選項不適合日常使用。）</p>
                <p class="simpara">所指定檔案 <span class="emphasis"><em>file</em></span> 的內容將作為 Python3 程式碼在 <span class="strong"><strong>para.py</strong></span> 的末尾進行解析。例如，您可以使用下述檔案指定套件描述資訊。</p>
                <pre class="screen">para['desc'] = 'program short description'
para['desc_long'] = '''\
 program long description which you wish to include.
 .
 Empty line is space + .
 You keep going on ...
'''</pre>
              </dd>
            </dl>
          </div>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term"><span class="strong"><strong>-q</strong></span>, <span class="strong"><strong>--quitearly</strong></span></span>
              </dt>
              <dd>在建立 <span class="strong"><strong>debian/</strong></span> 目錄下的檔案之前即提前退出程式。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-s</strong></span>, <span class="strong"><strong>--spec</strong></span></span>
              </dt>
              <dd>使用上游配置檔案（例如 Python 裡的 setup.py 等）資訊來初始化套件描述內容。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-v</strong></span>, <span class="strong"><strong>--version</strong></span></span>
              </dt>
              <dd>顯示版本資訊。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-w</strong></span> "<span class="emphasis"><em>addon,…</em></span>", <span class="strong"><strong>--with</strong></span> "<span class="emphasis"><em>addon,…</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">在 <span class="strong"><strong>debian/rules</strong></span> 檔案中向 <span class="strong"><strong>dh</strong></span>(1) 命令的引數中新增額外的 <span class="strong"><strong>dh</strong></span>(1) 引數以指定所使用的附加元件（<span class="emphasis"><em>addon</em></span>）。</p>
                <p class="simpara">The <span class="emphasis"><em>addon</em></span> values are listed all separated by “<span class="strong"><strong>,</strong></span>”, e.g., “<span class="strong"><strong>-w "python2,autoreconf"”</strong></span>.</p>
                <p class="simpara">For  Autotools based packages, setting <span class="strong"><strong>autoreconf</strong></span> as <span class="emphasis"><em>addon</em></span> forces running “<span class="strong"><strong>autoreconf -i -v -f</strong></span>” for every package building.  Otherwise, <span class="strong"><strong>autotools-dev</strong></span> as <span class="emphasis"><em>addon</em></span> is used as the default.</p>
                <p class="simpara">對基於 Autotools 的套件，如果它們最終要安裝 Python 程式，您需要顯性指定 <span class="strong"><strong>python2</strong></span> 作為 <span class="emphasis"><em>addon</em></span> 並指定“<span class="strong"><strong>compat &lt; 9</strong></span>”以明確指出您正在處理 Python 套件。但對基於 <span class="strong"><strong>setup.py</strong></span> 的套件來說，並不需要顯性指定 <span class="strong"><strong>python2</strong></span> 作為 <span class="emphasis"><em>addon</em></span>，因為這種依賴關係顯而易見，<span class="strong"><strong>debmake</strong></span> 會在需要且合適的時候自動為 <span class="strong"><strong>dh</strong></span>(1) 命令設定這樣的引數。</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-x</strong></span> <span class="emphasis"><em>n</em></span>, <span class="strong"><strong>--extra</strong></span> <span class="emphasis"><em>n</em></span></span>
              </dt>
              <dd>
                <p class="simpara">以模板檔案的形式建立配置檔案（請注意 <span class="strong"><strong>debian/changelog</strong></span>、<span class="strong"><strong>debian/control</strong></span>、<span class="strong"><strong>debian/copyright</strong></span> 和 <span class="strong"><strong>debian/rules</strong></span> 檔案是構建 Debian 二進位制套件所需的最小文件集合。）</p>
                <p class="simpara"><span class="emphasis"><em>n</em></span> 的數字大小決定了生成哪些配置模板檔案。</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>-x0</strong></span>：最少的配置檔案（這是存在任何已有配置檔案時的預設選項）</li>
                    <li class="listitem"><span class="strong"><strong>-x1</strong></span>：所有 <span class="strong"><strong>-x0</strong></span> 提供的檔案以及用於生成單個二進位制套件可能需要的配置檔案。（這是隻生成單個二進位制套件，且不存在其它已有配置檔案時的預設選項）</li>
                    <li class="listitem"><span class="strong"><strong>-x2</strong></span>：所有 <span class="strong"><strong>-x2</strong></span> 提供的檔案以及用於生成多個二進位制套件可能需要的配置檔案。（這是生成多個二進位制套件，且不存在其它已有配置檔案時的預設選項）</li>
                    <li class="listitem"><span class="strong"><strong>-x3</strong></span>：所有 <span class="strong"><strong>-x2</strong></span> 提供的檔案以及不常使用的配置模板檔案。不常使用的配置模板檔案在生成時會帶上 <span class="strong"><strong>.ex</strong></span> 字尾名以方便對其刪除。如需使用這些配置檔案，請重新命名這些檔案並去除 <span class="strong"><strong>.ex</strong></span> 的字尾。</li>
                    <li class="listitem"><span class="strong"><strong>-x4</strong></span> 選項：全部配置 <span class="strong"><strong>-x3</strong></span> 檔案加版權宣告檔案範例。</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-y</strong></span>, <span class="strong"><strong>--yes</strong></span></span>
              </dt>
              <dd>對所有提示“強制選擇是”（不提示選項“詢問 [是/否]”；重複選項兩次則為“強制選擇否”）</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-L</strong></span>, <span class="strong"><strong>--local</strong></span></span>
              </dt>
              <dd>為本地套件生成配置檔案以繞過 <span class="strong"><strong>lintian</strong></span>(1) 的檢查。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-P</strong></span>, <span class="strong"><strong>--pedantic</strong></span></span>
              </dt>
              <dd>對自動生成的檔案進行嚴格（甚至古板到迂腐程度）的檢查。</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-T</strong></span>, <span class="strong"><strong>--tutorial</strong></span></span>
              </dt>
              <dd>在模板檔案中輸出教材註釋行。</dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_examples"/>A.4. 範例</h2>
            </div>
          </div>
        </div>
        <p>對比較正常的原始碼來說，您可以使用一行命令簡單地構建一個自用的 Debian 二進位制套件。測試安裝這樣生成的套件通常比傳統的“<span class="strong"><strong>make install</strong></span>”命令安裝至 <span class="strong"><strong>/usr/local</strong></span> 目錄更好，因為 Debian 套件可以使用“<span class="strong"><strong>dpkg -P</strong></span> <span class="emphasis"><em>…”</em></span>”命令更乾淨地解除安裝掉。這裡提供構建這類測試套件的一些例子（這些例子應該在大多數情況下足夠使用。如果 <span class="strong"><strong>-d</strong></span> 選項無法工作，請嘗試使用 <span class="strong"><strong>-t</strong></span> 選項。）</p>
        <p>對典型的使用 autoconf/automake 的 C 程式原始碼樹：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -d -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
        <p>對於典型的 Python 模組原始碼樹：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -s -d -b":python" -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
        <p>對於 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>.tar.gz</strong></span> 存檔裡的一個典型 Python 模組：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -s -a <span class="emphasis"><em>package-version</em></span>.tar.gz -b":python" -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
        <p>對於典型的以 <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>.tar.gz</strong></span> 歸檔提供的 Perl 模組：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -a <span class="emphasis"><em>package-version</em></span>.tar.gz -b":perl" -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_helper_packages"/>A.5. 幫助套件</h2>
            </div>
          </div>
        </div>
        <p>打包工作也許需要額外安裝一些專用的幫助套件。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">Python3 程式可能需要 <span class="strong"><strong>dh-python</strong></span> 套件。</li>
            <li class="listitem">Autotools (Autoconf + Automake) 構建系統可能需要 <span class="strong"><strong>autotools-dev</strong></span> 或 <span class="strong"><strong>dh-autoreconf</strong></span> 套件。</li>
            <li class="listitem">Ruby 程式可能需要 <span class="strong"><strong>gem2deb</strong></span> 套件。</li>
            <li class="listitem">Java 程式可能需要 <span class="strong"><strong>javahelper</strong></span> 套件。</li>
            <li class="listitem">Gnome 程式可能需要  <span class="strong"><strong>gobject-introspection</strong></span> 套件。</li>
            <li class="listitem">等等。</li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_caveat"/>A.6. 注意事項</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> 的目的是為套件維護者提供開始工作的模板檔案。註釋行以 <span class="strong"><strong>#</strong></span> 開始，其中包含一些教材文字。您在將套件上傳至 Debian 倉庫之前必須刪除或者修改這樣的註釋行。</p>
        <p>許可證資訊的提取和賦值過程應用了大量啟發式操作，因此在某些情況下可能不會正常工作。強烈建議您搭配使用其它工具，例如來自 <span class="strong"><strong>devscripts</strong></span> 套件的 <span class="strong"><strong>licensecheck</strong></span> 工具，以配合 <span class="strong"><strong>debmake</strong></span> 的使用。</p>
        <p>組成 Debian 套件名稱的字元選取存在一定的限制。最明顯的限制應當是套件名稱中禁止出現大寫字母。這裡給出正則表示式形式的規則總結：</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">上游套件名稱（<span class="strong"><strong>-p</strong></span>）：[-+.a-z0-9]{2,}</li>
            <li class="listitem">二進位制套件名稱（<span class="strong"><strong>-b</strong></span>）：[-+.a-z0-9]{2,}</li>
            <li class="listitem">上游版本號（<span class="strong"><strong>-u</strong></span>）：[0-9][-+.:~a-z0-9A-Z]*</li>
            <li class="listitem">Debian 修訂版本（<span class="strong"><strong>-r</strong></span>）： [0-9][+.~a-z0-9A-Z]*</li>
          </ul>
        </div>
        <p>請在《Debian 政策手冊》的 <a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-controlfields">第 5 章 - Control 檔案及其欄位</a> 一節中檢視其精確定義。</p>
        <p><span class="strong"><strong>debmake</strong></span> 所假設的打包情景是相對簡單的。因此，所有與直譯器相關的程式都會預設為“<span class="strong"><strong>Architecture: all</strong></span>”的情況。當然，這個假設並非總是成立。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_debug"/>A.7. 除錯</h2>
            </div>
          </div>
        </div>
        <p>請使用 <span class="strong"><strong>reportbug</strong></span> 命令報告 <span class="strong"><strong>debmake</strong></span> 套件的問題與錯誤。</p>
        <p>環境變數 <span class="strong"><strong>$DEBUG</strong></span> 中設定的字元用來確定日誌輸出等級。</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem"><span class="strong"><strong>i</strong></span>：列印資訊</li>
            <li class="listitem"><span class="strong"><strong>p</strong></span>：列出全部全域性引數</li>
            <li class="listitem"><span class="strong"><strong>d</strong></span>：列出所有二進位制套件解析得到的引數</li>
            <li class="listitem"><span class="strong"><strong>f</strong></span>：用於掃描授權資訊的輸入檔名</li>
            <li class="listitem"><span class="strong"><strong>y</strong></span>：授權資訊欄的年份/名稱切分資訊</li>
            <li class="listitem"><span class="strong"><strong>s</strong></span>：format_state 的行掃描器</li>
            <li class="listitem"><span class="strong"><strong>b</strong></span>：content_state 掃描迴圈：迴圈開始</li>
            <li class="listitem"><span class="strong"><strong>m</strong></span>: content_state 掃描迴圈：正則匹配之後</li>
            <li class="listitem"><span class="strong"><strong>e</strong></span>: content_state 掃描迴圈：迴圈結束</li>
            <li class="listitem"><span class="strong"><strong>c</strong></span>：列印授權區段文字</li>
            <li class="listitem"><span class="strong"><strong>l</strong></span>：列印許可證區段文字</li>
            <li class="listitem"><span class="strong"><strong>a</strong></span>：列印作者/翻譯者區段文字</li>
            <li class="listitem"><span class="strong"><strong>k</strong></span>：debian/copyright 各節的排序關鍵字</li>
            <li class="listitem"><span class="strong"><strong>n</strong></span>：debian/copyright 的掃描結果（“<span class="strong"><strong>debmake -k</strong></span>”）</li>
          </ul>
        </div>
        <p>用法如下：</p>
        <pre class="screen"> $ DEBUG=pdfbmeclak debmake ...</pre>
        <p>檢視原始碼中的 README.developer 檔案以瞭解更多資訊。</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_author"/>A.8. 作者</h2>
            </div>
          </div>
        </div>
        <p>版權所有 © 2014-2017 Osamu Aoki &lt;<a class="ulink" href="mailto:osamu@debian.org">osamu@debian.org</a>&gt;</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_license"/>A.9. 許可證</h2>
            </div>
          </div>
        </div>
        <p>Expat 許可證</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_see_also"/>A.10. 參見</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debmake-doc</strong></span> 套件提供了“Debian 維護者指南”手冊，以純文字、HTML 和 PDF 三種格式存放在 <span class="strong"><strong>/usr/share/doc/debmake-doc/</strong></span> 目錄下。</p>
        <p>另見 <span class="strong"><strong>dpkg-source</strong></span>(1), <span class="strong"><strong>deb-control</strong></span>(5), <span class="strong"><strong>debhelper</strong></span>(7), <span class="strong"><strong>dh</strong></span>(1), <span class="strong"><strong>dpkg-buildpackage</strong></span>(1), <span class="strong"><strong>debuild</strong></span>(1), <span class="strong"><strong>quilt</strong></span>(1), <span class="strong"><strong>dpkg-depcheck</strong></span>(1), <span class="strong"><strong>pdebuild</strong></span>(1), <span class="strong"><strong>pbuilder</strong></span>(8), <span class="strong"><strong>cowbuilder</strong></span>(8), <span class="strong"><strong>gbp-buildpackage</strong></span>(1), <span class="strong"><strong>gbp-pq</strong></span>(1) 和 <span class="strong"><strong>git-pbuilder</strong></span>(1) 的手冊頁。</p>
      </div>
    </div>
    <div class="navfooter">
      <hr/>
      <table width="100%" summary="Navigation footer">
        <tr>
          <td align="left"><a accesskey="p" href="ch08.zh-tw.html"><img src="images/prev.png" alt="前一頁"/></a> </td>
          <td align="center"> </td>
          <td align="right"> </td>
        </tr>
        <tr>
          <td align="left" valign="top">章 8. 更多範例 </td>
          <td align="center">
            <a accesskey="h" href="index.zh-tw.html">
              <img src="images/home.png" alt="起始頁"/>
            </a>
          </td>
          <td align="right" valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
