<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>chuany: 新年開雙G Gentoo+Gnome</title>

<link rel="stylesheet" href="http://blog.linux.org.tw/~chuany/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://blog.linux.org.tw/~chuany/index.rdf" />

<link rel="start" href="http://blog.linux.org.tw/~chuany/" title="Home" />
<link rel="prev" href="http://blog.linux.org.tw/~chuany/archives/2003_12.html#000540" title="pconsole 幫你管理整個 Cluster" />



<script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'blog.linux.org.tw';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

//-->
</script>

<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://blog.linux.org.tw/~chuany/archives/000571.html"
    trackback:ping="http://mt.debian.org.tw/mt-tb.cgi/363"
    dc:title="新年開雙G Gentoo+Gnome"
    dc:identifier="http://blog.linux.org.tw/~chuany/archives/000571.html"
    dc:subject="Linux Tips"
    dc:description="從上週一開始, 小弟就裝 Gentoo Linux 到現在, 不僅花了很多時間在 compile, 也 花了不少時間把 Gentoo 的整個機制做一番了解.在安裝 Gentoo 的過程中遇到不 少小問題, 不過都解決了, 感謝協助小弟的朋友們與Gentoo TW/US Forums. 在這裡分享一下小弟的安裝過程. 首先小弟是使用 Stage3 安裝, 然後再用 emerge -e world 做全盤重新 compile, 但是在這其中, 小弟遇到第一個問題, 就是 portage 一直無法更新到最新版, 導致 整個 emerge -e world 的過程中一直在 loop,..."
    dc:creator="chuany"
    dc:date="2004-01-23T11:38:51+08:00" />
</rdf:RDF>
-->


<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://blog.linux.org.tw/~chuany/archives/2004_01.html#000571">
<dc:title>新年開雙G Gentoo+Gnome</dc:title>
<dc:description>從上週一開始, 小弟就裝 Gentoo Linux 到現在, 不僅花了很多時間在 compile, 也 花了不少時間把 Gentoo 的整個機制做一番了解.在安裝 Gentoo 的過程中遇到不 少小問題, 不過都解決了, 感謝協助小弟的朋友們與Gentoo TW/US Forums. 在這裡分享一下小弟的安裝過程. 首先小弟是使用 Stage3 安裝, 然後再用 emerge -e world 做全盤重新 compile, 但是在這其中, 小弟遇到第一個問題, 就是 portage 一直無法更新到最新版, 導致 整個 emerge -e world 的過程中一直在 loop,...</dc:description>
<dc:creator>chuany</dc:creator>
<dc:date>2004-01-23T11:38:51+08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-sa/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



</head>

<body>

<div id="banner">
<h1><a href="http://blog.linux.org.tw/~chuany/" accesskey="1">chuany</a></h1>
<span class="description">:wq chuany</span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="http://blog.linux.org.tw/~chuany/archives/2003_12.html#000540">&laquo; pconsole 幫你管理整個 Cluster</a> |

<a href="http://blog.linux.org.tw/~chuany/">回到主頁面</a>

</div>

</div>


<div class="blog">

<h2 class="date">January 23, 2004</h2>

<div class="blogbody">

<h3 class="title">新年開雙G Gentoo+Gnome</h3>

<p>從上週一開始, 小弟就裝 Gentoo Linux 到現在, 不僅花了很多時間在 compile, 也 <br />
花了不少時間把 Gentoo 的整個機制做一番了解.在安裝 Gentoo 的過程中遇到不 <br />
少小問題, 不過都解決了, 感謝協助小弟的朋友們與Gentoo TW/US Forums. </p>

<p>在這裡分享一下小弟的安裝過程. </p>

<p>首先小弟是使用 Stage3 安裝, 然後再用 emerge -e world 做全盤重新 compile, <br />
但是在這其中, 小弟遇到第一個問題, 就是 portage 一直無法更新到最新版, 導致 <br />
整個 emerge -e world 的過程中一直在 loop, 更妙的是, 小弟重新單獨去 upgrade <br />
portage 套件, 此時畫面都開始做抓新檔與重新 compile 的動作, 訊息也告訴 <br />
小弟已經升級到最新版了, 但當小弟 emerge -V 查看版本時, 還是一直停留在原先的 <br />
版本. 小弟不斷的 emerge sync 或是把 /usr/portage 砍掉重 emerge sync, 還是 <br />
一直發生同樣的狀況, 直到過了三天, 居然就神奇的升級成功, 所以小弟暫時先懷疑 <br />
一下, 應該是主站本身套件版本的管理有一些不同步的狀況, 才會這樣子. </p>

<p>小弟的Gentoo Linux安裝過程 <br />
http://chuany.net/~chuany/share/gentoo/gentoo_installation_step.txt </p>

<p>接下來, 小弟嘗試了許多不同的 Kernel 版本, 計有 gentoo-source-2.4.22-r2 <br />
gentoo-source-2.4.22-r5 vanilla-sources-2.4.24 <br />
gaming-sources-2.4.20-r7 唯一成功的有 gentoo-source-2.4.22-r2 與 <br />
vanilla-source-2.4.24, 全部都是使用 genkernel 來安裝的, 目前使用 <br />
vanilla-source-2.4.24 相當愉快, 所有的 device 都有正常抓到. 使用 <br />
genkernel 的原因有以下幾點: <br />
(1) 小弟真的很懶. <br />
(2) 不想遇到任何因為沒 compile 進去, 就無法使用該裝置的麻煩. <br />
(3) genkernel all 真的是相當快樂! </p>

<p>所以還是因為懶, 唯一有發生跟 Kernel Module 有關的問題是在做 <br />
module-update 時, 出現以下訊息, 不過看起來不礙事, 所以就用囉! <br />
gentoo root # modules-update <br />
depmod: *** Unresolved symbols in <br />
/lib/modules/2.4.24/kernel/drivers/net/wan/comx.o </p>

<p>在使用 genkernel 時, 有一點要記住, 預設 /boot 不會被 mount 進來, 所以記 <br />
得要手動先 mount 進來, 以免產生的 kernel 與 initrd 檔會被放在根目錄的 <br />
/boot 下, 而非真的放在你要開機的 /boot 的目錄下. </p>

<p>在 Xwindow 的安裝部份, 小弟是參考以下網址的內容安裝: <br />
http://www.gentoo.org/doc/en/desktop.xml <br />
在這裡提一下, Gentoo 若要安裝 gdm/kdm 這些套件來使用, 其實他是整合在 <br />
/etc/init.d/xdm 這個 script 裡, 而這個 script 會去參照 /etc/rc.conf 裡有 <br />
關 X 的設定, 所以只要(1)XF86Config檔 (2)/etc/rc.conf 這兩個檔案有設定正 <br />
確, 再配上 rc-update add xdm default, 以後每次重開機, 都可以進入美美的 <br />
Login 畫面喔! </p>

<p>另外, 若要掛上 xcin 的話, 可以在 /etc/X11/Session/ 把 Gnome 與 <br />
kde-3.1.5裡填上: </p>

<p>kde-3.1.5: <br />
#!/bin/sh <br />
export LC_ALL=zh_TW.Big5 <br />
export LANG=zh_TW.Big5 <br />
export XMODIFIERS="@im=xcin" <br />
exec xcin & <br />
exec gnome-settings-daemon & <br />
/usr/kde/3.1/bin/startkde </p>

<p>Gnome: 在最上面填上(不是第一行) <br />
export LC_ALL=zh_TW.Big5 <br />
export LANG=zh_TW.Big5 <br />
export XMODIFIERS="@im=xcin" <br />
exec xcin & </p>

<p>小弟在安裝 X 時, 起初是選擇使用 KDE, 因為 KDE 在字型與 Locale 方面的設定 <br />
都相當簡易, 且有 AceLan 大大的極力推薦, 所以就更是願意花時間去等待, 但是 <br />
小弟發現自己使用 KDE 的 QT 軟體不多, 反倒是都在使用 GTK 的軟體, 這樣子就 <br />
覺得使用 KDE 很浪費, 所以就改用 Gnome, 這也是為什麼在上面 kde-3.1.5 有 <br />
exec gnome-setting-daemon 這行的原因, 請參考以下網址: <br />
http://forums.gentoo.org.tw/viewtopic.php?t=41006&highlight=gnome-setting </p>

<p>在字型方面, 就都使用 Microsoft 的 mingliu.ttc 字型檔, 將該檔 rename 成 <br />
ttf 放置在 /usr/X11R6/lib/X11/fonts/truetype 裡面, 並使用 xfs , 這樣在 <br />
KDE 與 Gnome 裡都可以選來使用. 也很滿意. </p>

<p>剩下的就是自己怎麼去美化桌面環境與安裝應用軟體. 這個部份就到 <br />
/usr/portage 裡去尋寶囉! </p>

<p>Note: <br />
(1)xcin會一直往上跑的問題: <br />
http://forums.gentoo.org.tw/viewtopic.php?t=41362&highlight=xcin <br />
(2)gdesklet如何使用的問題: <br />
http://forums.gentoo.org/viewtopic.php?t=119211&highlight=gdesklet <br />
(3)Gnome Theme/Splash: <br />
http://art.gnome.org/ <br />
(4)Kernel Module AutoLoad: <br />
/etc/modules.autoload.d/kernel-2.4 (看你用哪一版的 Kernel) </p>

<p>ScreenShot: <br />
http://chuany.net/~chuany/share/gentoo/png/mail.png <br />
http://chuany.net/~chuany/share/gentoo/png/mplayer.png <br />
http://chuany.net/~chuany/share/gentoo/png/desktop.png <br />
http://chuany.net/~chuany/share/gentoo/png/gaim.png <br />
http://chuany.net/~chuany/share/gentoo/png/irc.png <br />
http://chuany.net/~chuany/share/gentoo/png/gqview.png <br />
http://chuany.net/~chuany/share/gentoo/png/burncd.png <br />
http://chuany.net/~chuany/share/gentoo/png/dict.png <br />
http://chuany.net/~chuany/share/gentoo/png/browser.png<br />
</p>

<a name="more"></a>


<span class="posted">由 chuany 發表於 January 23, 2004 11:38 AM
| <a href="http://mt.debian.org.tw/mt-tb.cgi?__mode=view&amp;entry_id=571" onclick="OpenTrackback(this.href); return false">引用</a>

<br /></span>

</div>


<div class="comments-head"><a name="comments"></a>迴響</div>




<div class="comments-head">發表迴響</div>

<div class="comments-body">
<form method="post" action="http://mt.debian.org.tw/mt-comments.cgi" name="comments_form" onsubmit="if (this.bakecookie[0].checked) rememberMe(this)">
<input type="hidden" name="static" value="1" />
<input type="hidden" name="entry_id" value="571" />

<div style="width:180px; padding-right:15px; margin-right:15px; float:left; text-align:left; border-right:1px dotted #bbb;">
	<label for="author">姓名:</label><br />
	<input tabindex="1" id="author" name="author" /><br /><br />

	<label for="email">Email 地址:</label><br />
	<input tabindex="2" id="email" name="email" /><br /><br />

	<label for="url">網址:</label><br />
	<input tabindex="3" id="url" name="url" /><br /><br />
</div>

記住我的資訊?<br />
<input type="radio" id="bakecookie" name="bakecookie" /><label for="bakecookie">是</label><input type="radio" id="forget" name="bakecookie" onclick="forgetMe(this.form)" value="Forget Info" style="margin-left: 15px;" /><label for="forget">否</label><br style="clear: both;" />

<label for="text">迴響數量:</label><br />
<textarea tabindex="4" id="text" name="text" rows="10" cols="50"></textarea><br /><br />

<input type="submit" name="preview" value="&nbsp;預覽&nbsp;" />
<input style="font-weight: bold;" type="submit" name="post" value="&nbsp;發表&nbsp;" /><br /><br />

</form>

<script type="text/javascript" language="javascript">
<!--
document.comments_form.email.value = getCookie("mtcmtmail");
document.comments_form.author.value = getCookie("mtcmtauth");
document.comments_form.url.value = getCookie("mtcmthome");
if (getCookie("mtcmtauth")) {
    document.comments_form.bakecookie[0].checked = true;
} else {
    document.comments_form.bakecookie[1].checked = true;
}
//-->
</script>
</div>


</div>
</div>
</body>
</html>
